(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hf(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ue={},Yr=[],zn=()=>{},D0=()=>!1,wc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),mf=e=>e.startsWith("onUpdate:"),Nt=Object.assign,gf=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},k0=Object.prototype.hasOwnProperty,Be=(e,t)=>k0.call(e,t),Ce=Array.isArray,Vo=e=>Sc(e)==="[object Map]",O0=e=>Sc(e)==="[object Set]",Pe=e=>typeof e=="function",_t=e=>typeof e=="string",lo=e=>typeof e=="symbol",ht=e=>e!==null&&typeof e=="object",Tv=e=>(ht(e)||Pe(e))&&Pe(e.then)&&Pe(e.catch),I0=Object.prototype.toString,Sc=e=>I0.call(e),N0=e=>Sc(e).slice(8,-1),L0=e=>Sc(e)==="[object Object]",vf=e=>_t(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Wo=hf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Cc=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},B0=/-(\w)/g,Ni=Cc(e=>e.replace(B0,(t,n)=>n?n.toUpperCase():"")),$0=/\B([A-Z])/g,Rr=Cc(e=>e.replace($0,"-$1").toLowerCase()),Av=Cc(e=>e.charAt(0).toUpperCase()+e.slice(1)),Nl=Cc(e=>e?`on${Av(e)}`:""),Li=(e,t)=>!Object.is(e,t),Ll=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Mv=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},j0=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Nd;const Dv=()=>Nd||(Nd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yf(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=_t(i)?V0(i):yf(i);if(r)for(const o in r)t[o]=r[o]}return t}else if(_t(e)||ht(e))return e}const F0=/;(?![^(]*\))/g,H0=/:([^]+)/,z0=/\/\*[^]*?\*\//g;function V0(e){const t={};return e.replace(z0,"").split(F0).forEach(n=>{if(n){const i=n.split(H0);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function _f(e){let t="";if(_t(e))t=e;else if(Ce(e))for(let n=0;n<e.length;n++){const i=_f(e[n]);i&&(t+=i+" ")}else if(ht(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const W0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",U0=hf(W0);function kv(e){return!!e||e===""}/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rn;class Ov{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=rn,!t&&rn&&(this.index=(rn.scopes||(rn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=rn;try{return rn=this,t()}finally{rn=n}}}on(){rn=this}off(){rn=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function G0(e){return new Ov(e)}function K0(){return rn}let We;const Bl=new WeakSet;class Iv{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,rn&&rn.active&&rn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bl.has(this)&&(Bl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Lv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ld(this),Bv(this);const t=We,n=Cn;We=this,Cn=!0;try{return this.fn()}finally{$v(this),We=t,Cn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ef(t);this.deps=this.depsTail=void 0,Ld(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yu(this)&&this.run()}get dirty(){return yu(this)}}let Nv=0,Uo,Go;function Lv(e,t=!1){if(e.flags|=8,t){e.next=Go,Go=e;return}e.next=Uo,Uo=e}function bf(){Nv++}function xf(){if(--Nv>0)return;if(Go){let t=Go;for(Go=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Uo;){let t=Uo;for(Uo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function Bv(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function $v(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),Ef(i),Y0(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function yu(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(jv(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function jv(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ia))return;e.globalVersion=ia;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!yu(e)){e.flags&=-3;return}const n=We,i=Cn;We=e,Cn=!0;try{Bv(e);const r=e.fn(e._value);(t.version===0||Li(r,e._value))&&(e._value=r,t.version++)}catch(r){throw t.version++,r}finally{We=n,Cn=i,$v(e),e.flags&=-3}}function Ef(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i),!n.subs&&n.computed){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Ef(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Y0(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Cn=!0;const Fv=[];function Fi(){Fv.push(Cn),Cn=!1}function Hi(){const e=Fv.pop();Cn=e===void 0?!0:e}function Ld(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=We;We=void 0;try{t()}finally{We=n}}}let ia=0;class q0{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wf{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!We||!Cn||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new q0(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,Hv(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=i)}return n}trigger(t){this.version++,ia++,this.notify(t)}notify(t){bf();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{xf()}}}function Hv(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Hv(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const _u=new WeakMap,yr=Symbol(""),bu=Symbol(""),ra=Symbol("");function Lt(e,t,n){if(Cn&&We){let i=_u.get(e);i||_u.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new wf),r.map=i,r.key=n),r.track()}}function oi(e,t,n,i,r,o){const a=_u.get(e);if(!a){ia++;return}const s=c=>{c&&c.trigger()};if(bf(),t==="clear")a.forEach(s);else{const c=Ce(e),l=c&&vf(n);if(c&&n==="length"){const u=Number(i);a.forEach((f,p)=>{(p==="length"||p===ra||!lo(p)&&p>=u)&&s(f)})}else switch(n!==void 0&&s(a.get(n)),l&&s(a.get(ra)),t){case"add":c?l&&s(a.get("length")):(s(a.get(yr)),Vo(e)&&s(a.get(bu)));break;case"delete":c||(s(a.get(yr)),Vo(e)&&s(a.get(bu)));break;case"set":Vo(e)&&s(a.get(yr));break}}xf()}function $r(e){const t=je(e);return t===e?t:(Lt(t,"iterate",ra),Rn(e)?t:t.map(Ft))}function Sf(e){return Lt(e=je(e),"iterate",ra),e}const X0={__proto__:null,[Symbol.iterator](){return $l(this,Symbol.iterator,Ft)},concat(...e){return $r(this).concat(...e.map(t=>Ce(t)?$r(t):t))},entries(){return $l(this,"entries",e=>(e[1]=Ft(e[1]),e))},every(e,t){return Qn(this,"every",e,t,void 0,arguments)},filter(e,t){return Qn(this,"filter",e,t,n=>n.map(Ft),arguments)},find(e,t){return Qn(this,"find",e,t,Ft,arguments)},findIndex(e,t){return Qn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Qn(this,"findLast",e,t,Ft,arguments)},findLastIndex(e,t){return Qn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Qn(this,"forEach",e,t,void 0,arguments)},includes(...e){return jl(this,"includes",e)},indexOf(...e){return jl(this,"indexOf",e)},join(e){return $r(this).join(e)},lastIndexOf(...e){return jl(this,"lastIndexOf",e)},map(e,t){return Qn(this,"map",e,t,void 0,arguments)},pop(){return Po(this,"pop")},push(...e){return Po(this,"push",e)},reduce(e,...t){return Bd(this,"reduce",e,t)},reduceRight(e,...t){return Bd(this,"reduceRight",e,t)},shift(){return Po(this,"shift")},some(e,t){return Qn(this,"some",e,t,void 0,arguments)},splice(...e){return Po(this,"splice",e)},toReversed(){return $r(this).toReversed()},toSorted(e){return $r(this).toSorted(e)},toSpliced(...e){return $r(this).toSpliced(...e)},unshift(...e){return Po(this,"unshift",e)},values(){return $l(this,"values",Ft)}};function $l(e,t,n){const i=Sf(e),r=i[t]();return i!==e&&!Rn(e)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.value&&(o.value=n(o.value)),o}),r}const Z0=Array.prototype;function Qn(e,t,n,i,r,o){const a=Sf(e),s=a!==e&&!Rn(e),c=a[t];if(c!==Z0[t]){const f=c.apply(e,o);return s?Ft(f):f}let l=n;a!==e&&(s?l=function(f,p){return n.call(this,Ft(f),p,e)}:n.length>2&&(l=function(f,p){return n.call(this,f,p,e)}));const u=c.call(a,l,i);return s&&r?r(u):u}function Bd(e,t,n,i){const r=Sf(e);let o=n;return r!==e&&(Rn(e)?n.length>3&&(o=function(a,s,c){return n.call(this,a,s,c,e)}):o=function(a,s,c){return n.call(this,a,Ft(s),c,e)}),r[t](o,...i)}function jl(e,t,n){const i=je(e);Lt(i,"iterate",ra);const r=i[t](...n);return(r===-1||r===!1)&&Tf(n[0])?(n[0]=je(n[0]),i[t](...n)):r}function Po(e,t,n=[]){Fi(),bf();const i=je(e)[t].apply(e,n);return xf(),Hi(),i}const J0=hf("__proto__,__v_isRef,__isVue"),zv=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(lo));function Q0(e){lo(e)||(e=String(e));const t=je(this);return Lt(t,"has",e),t.hasOwnProperty(e)}class Vv{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return i===(r?o?pE:Kv:o?Gv:Uv).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const a=Ce(t);if(!r){let c;if(a&&(c=X0[n]))return c;if(n==="hasOwnProperty")return Q0}const s=Reflect.get(t,n,It(t)?t:i);return(lo(n)?zv.has(n):J0(n))||(r||Lt(t,"get",n),o)?s:It(s)?a&&vf(n)?s:s.value:ht(s)?r?Yv(s):_a(s):s}}class Wv extends Vv{constructor(t=!1){super(!1,t)}set(t,n,i,r){let o=t[n];if(!this._isShallow){const c=br(o);if(!Rn(i)&&!br(i)&&(o=je(o),i=je(i)),!Ce(t)&&It(o)&&!It(i))return c?!1:(o.value=i,!0)}const a=Ce(t)&&vf(n)?Number(n)<t.length:Be(t,n),s=Reflect.set(t,n,i,It(t)?t:r);return t===je(r)&&(a?Li(i,o)&&oi(t,"set",n,i):oi(t,"add",n,i)),s}deleteProperty(t,n){const i=Be(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&oi(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!lo(n)||!zv.has(n))&&Lt(t,"has",n),i}ownKeys(t){return Lt(t,"iterate",Ce(t)?"length":yr),Reflect.ownKeys(t)}}class eE extends Vv{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const tE=new Wv,nE=new eE,iE=new Wv(!0);const Cf=e=>e,Rc=e=>Reflect.getPrototypeOf(e);function Qa(e,t,n=!1,i=!1){e=e.__v_raw;const r=je(e),o=je(t);n||(Li(t,o)&&Lt(r,"get",t),Lt(r,"get",o));const{has:a}=Rc(r),s=i?Cf:n?Af:Ft;if(a.call(r,t))return s(e.get(t));if(a.call(r,o))return s(e.get(o));e!==r&&e.get(t)}function es(e,t=!1){const n=this.__v_raw,i=je(n),r=je(e);return t||(Li(e,r)&&Lt(i,"has",e),Lt(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function ts(e,t=!1){return e=e.__v_raw,!t&&Lt(je(e),"iterate",yr),Reflect.get(e,"size",e)}function $d(e,t=!1){!t&&!Rn(e)&&!br(e)&&(e=je(e));const n=je(this);return Rc(n).has.call(n,e)||(n.add(e),oi(n,"add",e,e)),this}function jd(e,t,n=!1){!n&&!Rn(t)&&!br(t)&&(t=je(t));const i=je(this),{has:r,get:o}=Rc(i);let a=r.call(i,e);a||(e=je(e),a=r.call(i,e));const s=o.call(i,e);return i.set(e,t),a?Li(t,s)&&oi(i,"set",e,t):oi(i,"add",e,t),this}function Fd(e){const t=je(this),{has:n,get:i}=Rc(t);let r=n.call(t,e);r||(e=je(e),r=n.call(t,e)),i&&i.call(t,e);const o=t.delete(e);return r&&oi(t,"delete",e,void 0),o}function Hd(){const e=je(this),t=e.size!==0,n=e.clear();return t&&oi(e,"clear",void 0,void 0),n}function ns(e,t){return function(i,r){const o=this,a=o.__v_raw,s=je(a),c=t?Cf:e?Af:Ft;return!e&&Lt(s,"iterate",yr),a.forEach((l,u)=>i.call(r,c(l),c(u),o))}}function is(e,t,n){return function(...i){const r=this.__v_raw,o=je(r),a=Vo(o),s=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,l=r[e](...i),u=n?Cf:t?Af:Ft;return!t&&Lt(o,"iterate",c?bu:yr),{next(){const{value:f,done:p}=l.next();return p?{value:f,done:p}:{value:s?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function _i(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function rE(){const e={get(o){return Qa(this,o)},get size(){return ts(this)},has:es,add:$d,set:jd,delete:Fd,clear:Hd,forEach:ns(!1,!1)},t={get(o){return Qa(this,o,!1,!0)},get size(){return ts(this)},has:es,add(o){return $d.call(this,o,!0)},set(o,a){return jd.call(this,o,a,!0)},delete:Fd,clear:Hd,forEach:ns(!1,!0)},n={get(o){return Qa(this,o,!0)},get size(){return ts(this,!0)},has(o){return es.call(this,o,!0)},add:_i("add"),set:_i("set"),delete:_i("delete"),clear:_i("clear"),forEach:ns(!0,!1)},i={get(o){return Qa(this,o,!0,!0)},get size(){return ts(this,!0)},has(o){return es.call(this,o,!0)},add:_i("add"),set:_i("set"),delete:_i("delete"),clear:_i("clear"),forEach:ns(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=is(o,!1,!1),n[o]=is(o,!0,!1),t[o]=is(o,!1,!0),i[o]=is(o,!0,!0)}),[e,n,t,i]}const[oE,aE,sE,cE]=rE();function Rf(e,t){const n=t?e?cE:sE:e?aE:oE;return(i,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Be(n,r)&&r in i?n:i,r,o)}const lE={get:Rf(!1,!1)},uE={get:Rf(!1,!0)},fE={get:Rf(!0,!1)};const Uv=new WeakMap,Gv=new WeakMap,Kv=new WeakMap,pE=new WeakMap;function dE(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hE(e){return e.__v_skip||!Object.isExtensible(e)?0:dE(N0(e))}function _a(e){return br(e)?e:Pf(e,!1,tE,lE,Uv)}function mE(e){return Pf(e,!1,iE,uE,Gv)}function Yv(e){return Pf(e,!0,nE,fE,Kv)}function Pf(e,t,n,i,r){if(!ht(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const a=hE(e);if(a===0)return e;const s=new Proxy(e,a===2?i:n);return r.set(e,s),s}function Ko(e){return br(e)?Ko(e.__v_raw):!!(e&&e.__v_isReactive)}function br(e){return!!(e&&e.__v_isReadonly)}function Rn(e){return!!(e&&e.__v_isShallow)}function Tf(e){return e?!!e.__v_raw:!1}function je(e){const t=e&&e.__v_raw;return t?je(t):e}function qv(e){return!Be(e,"__v_skip")&&Object.isExtensible(e)&&Mv(e,"__v_skip",!0),e}const Ft=e=>ht(e)?_a(e):e,Af=e=>ht(e)?Yv(e):e;function It(e){return e?e.__v_isRef===!0:!1}function Xv(e){return gE(e,!1)}function gE(e,t){return It(e)?e:new vE(e,t)}class vE{constructor(t,n){this.dep=new wf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:je(t),this._value=n?t:Ft(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Rn(t)||br(t);t=i?t:je(t),Li(t,n)&&(this._rawValue=t,this._value=i?t:Ft(t),this.dep.trigger())}}function yE(e){return It(e)?e.value:e}const _E={get:(e,t,n)=>t==="__v_raw"?e:yE(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return It(r)&&!It(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Zv(e){return Ko(e)?e:new Proxy(e,_E)}class bE{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new wf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ia-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return Lv(this,!0),!0}get value(){const t=this.dep.track();return jv(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function xE(e,t,n=!1){let i,r;return Pe(e)?i=e:(i=e.get,r=e.set),new bE(i,r,n)}const rs={},Zs=new WeakMap;let pr;function EE(e,t=!1,n=pr){if(n){let i=Zs.get(n);i||Zs.set(n,i=[]),i.push(e)}}function wE(e,t,n=Ue){const{immediate:i,deep:r,once:o,scheduler:a,augmentJob:s,call:c}=n,l=y=>r?y:Rn(y)||r===!1||r===0?Mi(y,1):Mi(y);let u,f,p,d,h=!1,m=!1;if(It(e)?(f=()=>e.value,h=Rn(e)):Ko(e)?(f=()=>l(e),h=!0):Ce(e)?(m=!0,h=e.some(y=>Ko(y)||Rn(y)),f=()=>e.map(y=>{if(It(y))return y.value;if(Ko(y))return l(y);if(Pe(y))return c?c(y,2):y()})):Pe(e)?t?f=c?()=>c(e,2):e:f=()=>{if(p){Fi();try{p()}finally{Hi()}}const y=pr;pr=u;try{return c?c(e,3,[d]):e(d)}finally{pr=y}}:f=zn,t&&r){const y=f,S=r===!0?1/0:r;f=()=>Mi(y(),S)}const v=K0(),E=()=>{u.stop(),v&&gf(v.effects,u)};if(o&&t){const y=t;t=(...S)=>{y(...S),E()}}let C=m?new Array(e.length).fill(rs):rs;const x=y=>{if(!(!(u.flags&1)||!u.dirty&&!y))if(t){const S=u.run();if(r||h||(m?S.some((T,I)=>Li(T,C[I])):Li(S,C))){p&&p();const T=pr;pr=u;try{const I=[S,C===rs?void 0:m&&C[0]===rs?[]:C,d];c?c(t,3,I):t(...I),C=S}finally{pr=T}}}else u.run()};return s&&s(x),u=new Iv(f),u.scheduler=a?()=>a(x,!1):x,d=y=>EE(y,!1,u),p=u.onStop=()=>{const y=Zs.get(u);if(y){if(c)c(y,4);else for(const S of y)S();Zs.delete(u)}},t?i?x(!0):C=u.run():a?a(x.bind(null,!0),!0):u.run(),E.pause=u.pause.bind(u),E.resume=u.resume.bind(u),E.stop=E,E}function Mi(e,t=1/0,n){if(t<=0||!ht(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,It(e))Mi(e.value,t,n);else if(Ce(e))for(let i=0;i<e.length;i++)Mi(e[i],t,n);else if(O0(e)||Vo(e))e.forEach(i=>{Mi(i,t,n)});else if(L0(e)){for(const i in e)Mi(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Mi(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ba(e,t,n,i){try{return i?e(...i):e()}catch(r){Pc(r,t,n)}}function Un(e,t,n,i){if(Pe(e)){const r=ba(e,t,n,i);return r&&Tv(r)&&r.catch(o=>{Pc(o,t,n)}),r}if(Ce(e)){const r=[];for(let o=0;o<e.length;o++)r.push(Un(e[o],t,n,i));return r}}function Pc(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Ue;if(t){let s=t.parent;const c=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const u=s.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,c,l)===!1)return}s=s.parent}if(o){Fi(),ba(o,null,10,[e,c,l]),Hi();return}}SE(e,n,r,i,a)}function SE(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const Ht=[];let Nn=-1;const qr=[];let Ri=null,Kr=0;const Jv=Promise.resolve();let Js=null;function CE(e){const t=Js||Jv;return e?t.then(this?e.bind(this):e):t}function RE(e){let t=Nn+1,n=Ht.length;for(;t<n;){const i=t+n>>>1,r=Ht[i],o=oa(r);o<e||o===e&&r.flags&2?t=i+1:n=i}return t}function Mf(e){if(!(e.flags&1)){const t=oa(e),n=Ht[Ht.length-1];!n||!(e.flags&2)&&t>=oa(n)?Ht.push(e):Ht.splice(RE(t),0,e),e.flags|=1,Qv()}}function Qv(){Js||(Js=Jv.then(ty))}function PE(e){Ce(e)?qr.push(...e):Ri&&e.id===-1?Ri.splice(Kr+1,0,e):e.flags&1||(qr.push(e),e.flags|=1),Qv()}function zd(e,t,n=Nn+1){for(;n<Ht.length;n++){const i=Ht[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Ht.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function ey(e){if(qr.length){const t=[...new Set(qr)].sort((n,i)=>oa(n)-oa(i));if(qr.length=0,Ri){Ri.push(...t);return}for(Ri=t,Kr=0;Kr<Ri.length;Kr++){const n=Ri[Kr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ri=null,Kr=0}}const oa=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ty(e){try{for(Nn=0;Nn<Ht.length;Nn++){const t=Ht[Nn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ba(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Nn<Ht.length;Nn++){const t=Ht[Nn];t&&(t.flags&=-2)}Nn=-1,Ht.length=0,ey(),Js=null,(Ht.length||qr.length)&&ty()}}let Fn=null,ny=null;function Qs(e){const t=Fn;return Fn=e,ny=e&&e.type.__scopeId||null,t}function TE(e,t=Fn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Xd(-1);const o=Qs(t);let a;try{a=e(...r)}finally{Qs(o),i._d&&Xd(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function sr(e,t,n,i){const r=e.dirs,o=t&&t.dirs;for(let a=0;a<r.length;a++){const s=r[a];o&&(s.oldValue=o[a].value);let c=s.dir[i];c&&(Fi(),Un(c,n,8,[e.el,s,e,t]),Hi())}}const AE=Symbol("_vte"),ME=e=>e.__isTeleport;function Df(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Df(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function iy(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function xu(e,t,n,i,r=!1){if(Ce(e)){e.forEach((h,m)=>xu(h,t&&(Ce(t)?t[m]:t),n,i,r));return}if(Yo(i)&&!r)return;const o=i.shapeFlag&4?Nf(i.component):i.el,a=r?null:o,{i:s,r:c}=e,l=t&&t.r,u=s.refs===Ue?s.refs={}:s.refs,f=s.setupState,p=je(f),d=f===Ue?()=>!1:h=>Be(p,h);if(l!=null&&l!==c&&(_t(l)?(u[l]=null,d(l)&&(f[l]=null)):It(l)&&(l.value=null)),Pe(c))ba(c,s,12,[a,u]);else{const h=_t(c),m=It(c);if(h||m){const v=()=>{if(e.f){const E=h?d(c)?f[c]:u[c]:c.value;r?Ce(E)&&gf(E,o):Ce(E)?E.includes(o)||E.push(o):h?(u[c]=[o],d(c)&&(f[c]=u[c])):(c.value=[o],e.k&&(u[e.k]=c.value))}else h?(u[c]=a,d(c)&&(f[c]=a)):m&&(c.value=a,e.k&&(u[e.k]=a))};a?(v.id=-1,nn(v,n)):v()}}}const Yo=e=>!!e.type.__asyncLoader,ry=e=>e.type.__isKeepAlive;function DE(e,t){oy(e,"a",t)}function kE(e,t){oy(e,"da",t)}function oy(e,t,n=zt){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Tc(t,i,n),n){let r=n.parent;for(;r&&r.parent;)ry(r.parent.vnode)&&OE(i,t,n,r),r=r.parent}}function OE(e,t,n,i){const r=Tc(t,e,i,!0);ay(()=>{gf(i[t],r)},n)}function Tc(e,t,n=zt,i=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...a)=>{Fi();const s=xa(n),c=Un(t,n,e,a);return s(),Hi(),c});return i?r.unshift(o):r.push(o),o}}const li=e=>(t,n=zt)=>{(!Dc||e==="sp")&&Tc(e,(...i)=>t(...i),n)},IE=li("bm"),NE=li("m"),LE=li("bu"),BE=li("u"),$E=li("bum"),ay=li("um"),jE=li("sp"),FE=li("rtg"),HE=li("rtc");function zE(e,t=zt){Tc("ec",e,t)}const VE=Symbol.for("v-ndc"),Eu=e=>e?Ty(e)?Nf(e):Eu(e.parent):null,qo=Nt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Eu(e.parent),$root:e=>Eu(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>kf(e),$forceUpdate:e=>e.f||(e.f=()=>{Mf(e.update)}),$nextTick:e=>e.n||(e.n=CE.bind(e.proxy)),$watch:e=>fw.bind(e)}),Fl=(e,t)=>e!==Ue&&!e.__isScriptSetup&&Be(e,t),WE={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:o,accessCache:a,type:s,appContext:c}=e;let l;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return o[t]}else{if(Fl(i,t))return a[t]=1,i[t];if(r!==Ue&&Be(r,t))return a[t]=2,r[t];if((l=e.propsOptions[0])&&Be(l,t))return a[t]=3,o[t];if(n!==Ue&&Be(n,t))return a[t]=4,n[t];wu&&(a[t]=0)}}const u=qo[t];let f,p;if(u)return t==="$attrs"&&Lt(e.attrs,"get",""),u(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(n!==Ue&&Be(n,t))return a[t]=4,n[t];if(p=c.config.globalProperties,Be(p,t))return p[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:o}=e;return Fl(r,t)?(r[t]=n,!0):i!==Ue&&Be(i,t)?(i[t]=n,!0):Be(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:o}},a){let s;return!!n[a]||e!==Ue&&Be(e,a)||Fl(t,a)||(s=o[0])&&Be(s,a)||Be(i,a)||Be(qo,a)||Be(r.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Be(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Vd(e){return Ce(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let wu=!0;function UE(e){const t=kf(e),n=e.proxy,i=e.ctx;wu=!1,t.beforeCreate&&Wd(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:a,watch:s,provide:c,inject:l,created:u,beforeMount:f,mounted:p,beforeUpdate:d,updated:h,activated:m,deactivated:v,beforeDestroy:E,beforeUnmount:C,destroyed:x,unmounted:y,render:S,renderTracked:T,renderTriggered:I,errorCaptured:D,serverPrefetch:B,expose:N,inheritAttrs:j,components:Y,directives:Z,filters:ue}=t;if(l&&GE(l,i,null),a)for(const oe in a){const Se=a[oe];Pe(Se)&&(i[oe]=Se.bind(n))}if(r){const oe=r.call(n,n);ht(oe)&&(e.data=_a(oe))}if(wu=!0,o)for(const oe in o){const Se=o[oe],Qe=Pe(Se)?Se.bind(n,n):Pe(Se.get)?Se.get.bind(n,n):zn,Le=!Pe(Se)&&Pe(Se.set)?Se.set.bind(n):zn,ze=Iw({get:Qe,set:Le});Object.defineProperty(i,oe,{enumerable:!0,configurable:!0,get:()=>ze.value,set:H=>ze.value=H})}if(s)for(const oe in s)sy(s[oe],i,n,oe);if(c){const oe=Pe(c)?c.call(n):c;Reflect.ownKeys(oe).forEach(Se=>{JE(Se,oe[Se])})}u&&Wd(u,e,"c");function ve(oe,Se){Ce(Se)?Se.forEach(Qe=>oe(Qe.bind(n))):Se&&oe(Se.bind(n))}if(ve(IE,f),ve(NE,p),ve(LE,d),ve(BE,h),ve(DE,m),ve(kE,v),ve(zE,D),ve(HE,T),ve(FE,I),ve($E,C),ve(ay,y),ve(jE,B),Ce(N))if(N.length){const oe=e.exposed||(e.exposed={});N.forEach(Se=>{Object.defineProperty(oe,Se,{get:()=>n[Se],set:Qe=>n[Se]=Qe})})}else e.exposed||(e.exposed={});S&&e.render===zn&&(e.render=S),j!=null&&(e.inheritAttrs=j),Y&&(e.components=Y),Z&&(e.directives=Z),B&&iy(e)}function GE(e,t,n=zn){Ce(e)&&(e=Su(e));for(const i in e){const r=e[i];let o;ht(r)?"default"in r?o=Os(r.from||i,r.default,!0):o=Os(r.from||i):o=Os(r),It(o)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[i]=o}}function Wd(e,t,n){Un(Ce(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function sy(e,t,n,i){let r=i.includes(".")?xy(n,i):()=>n[i];if(_t(e)){const o=t[e];Pe(o)&&zl(r,o)}else if(Pe(e))zl(r,e.bind(n));else if(ht(e))if(Ce(e))e.forEach(o=>sy(o,t,n,i));else{const o=Pe(e.handler)?e.handler.bind(n):t[e.handler];Pe(o)&&zl(r,o,e)}}function kf(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let c;return s?c=s:!r.length&&!n&&!i?c=t:(c={},r.length&&r.forEach(l=>ec(c,l,a,!0)),ec(c,t,a)),ht(t)&&o.set(t,c),c}function ec(e,t,n,i=!1){const{mixins:r,extends:o}=t;o&&ec(e,o,n,!0),r&&r.forEach(a=>ec(e,a,n,!0));for(const a in t)if(!(i&&a==="expose")){const s=KE[a]||n&&n[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const KE={data:Ud,props:Gd,emits:Gd,methods:Ho,computed:Ho,beforeCreate:$t,created:$t,beforeMount:$t,mounted:$t,beforeUpdate:$t,updated:$t,beforeDestroy:$t,beforeUnmount:$t,destroyed:$t,unmounted:$t,activated:$t,deactivated:$t,errorCaptured:$t,serverPrefetch:$t,components:Ho,directives:Ho,watch:qE,provide:Ud,inject:YE};function Ud(e,t){return t?e?function(){return Nt(Pe(e)?e.call(this,this):e,Pe(t)?t.call(this,this):t)}:t:e}function YE(e,t){return Ho(Su(e),Su(t))}function Su(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function $t(e,t){return e?[...new Set([].concat(e,t))]:t}function Ho(e,t){return e?Nt(Object.create(null),e,t):t}function Gd(e,t){return e?Ce(e)&&Ce(t)?[...new Set([...e,...t])]:Nt(Object.create(null),Vd(e),Vd(t??{})):t}function qE(e,t){if(!e)return t;if(!t)return e;const n=Nt(Object.create(null),e);for(const i in t)n[i]=$t(e[i],t[i]);return n}function cy(){return{app:null,config:{isNativeTag:D0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let XE=0;function ZE(e,t){return function(i,r=null){Pe(i)||(i=Nt({},i)),r!=null&&!ht(r)&&(r=null);const o=cy(),a=new WeakSet,s=[];let c=!1;const l=o.app={_uid:XE++,_component:i,_props:r,_container:null,_context:o,_instance:null,version:Nw,get config(){return o.config},set config(u){},use(u,...f){return a.has(u)||(u&&Pe(u.install)?(a.add(u),u.install(l,...f)):Pe(u)&&(a.add(u),u(l,...f))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,f){return f?(o.components[u]=f,l):o.components[u]},directive(u,f){return f?(o.directives[u]=f,l):o.directives[u]},mount(u,f,p){if(!c){const d=l._ceVNode||Oi(i,r);return d.appContext=o,p===!0?p="svg":p===!1&&(p=void 0),f&&t?t(d,u):e(d,u,p),c=!0,l._container=u,u.__vue_app__=l,Nf(d.component)}},onUnmount(u){s.push(u)},unmount(){c&&(Un(s,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(u,f){return o.provides[u]=f,l},runWithContext(u){const f=Xr;Xr=l;try{return u()}finally{Xr=f}}};return l}}let Xr=null;function JE(e,t){if(zt){let n=zt.provides;const i=zt.parent&&zt.parent.provides;i===n&&(n=zt.provides=Object.create(i)),n[e]=t}}function Os(e,t,n=!1){const i=zt||Fn;if(i||Xr){const r=Xr?Xr._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Pe(t)?t.call(i&&i.proxy):t}}const ly={},uy=()=>Object.create(ly),fy=e=>Object.getPrototypeOf(e)===ly;function QE(e,t,n,i=!1){const r={},o=uy();e.propsDefaults=Object.create(null),py(e,t,r,o);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);n?e.props=i?r:mE(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function ew(e,t,n,i){const{props:r,attrs:o,vnode:{patchFlag:a}}=e,s=je(r),[c]=e.propsOptions;let l=!1;if((i||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(Ac(e.emitsOptions,p))continue;const d=t[p];if(c)if(Be(o,p))d!==o[p]&&(o[p]=d,l=!0);else{const h=Ni(p);r[h]=Cu(c,s,h,d,e,!1)}else d!==o[p]&&(o[p]=d,l=!0)}}}else{py(e,t,r,o)&&(l=!0);let u;for(const f in s)(!t||!Be(t,f)&&((u=Rr(f))===f||!Be(t,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=Cu(c,s,f,void 0,e,!0)):delete r[f]);if(o!==s)for(const f in o)(!t||!Be(t,f))&&(delete o[f],l=!0)}l&&oi(e.attrs,"set","")}function py(e,t,n,i){const[r,o]=e.propsOptions;let a=!1,s;if(t)for(let c in t){if(Wo(c))continue;const l=t[c];let u;r&&Be(r,u=Ni(c))?!o||!o.includes(u)?n[u]=l:(s||(s={}))[u]=l:Ac(e.emitsOptions,c)||(!(c in i)||l!==i[c])&&(i[c]=l,a=!0)}if(o){const c=je(n),l=s||Ue;for(let u=0;u<o.length;u++){const f=o[u];n[f]=Cu(r,c,f,l[f],e,!Be(l,f))}}return a}function Cu(e,t,n,i,r,o){const a=e[n];if(a!=null){const s=Be(a,"default");if(s&&i===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&Pe(c)){const{propsDefaults:l}=r;if(n in l)i=l[n];else{const u=xa(r);i=l[n]=c.call(null,t),u()}}else i=c;r.ce&&r.ce._setProp(n,i)}a[0]&&(o&&!s?i=!1:a[1]&&(i===""||i===Rr(n))&&(i=!0))}return i}const tw=new WeakMap;function dy(e,t,n=!1){const i=n?tw:t.propsCache,r=i.get(e);if(r)return r;const o=e.props,a={},s=[];let c=!1;if(!Pe(e)){const u=f=>{c=!0;const[p,d]=dy(f,t,!0);Nt(a,p),d&&s.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!c)return ht(e)&&i.set(e,Yr),Yr;if(Ce(o))for(let u=0;u<o.length;u++){const f=Ni(o[u]);Kd(f)&&(a[f]=Ue)}else if(o)for(const u in o){const f=Ni(u);if(Kd(f)){const p=o[u],d=a[f]=Ce(p)||Pe(p)?{type:p}:Nt({},p),h=d.type;let m=!1,v=!0;if(Ce(h))for(let E=0;E<h.length;++E){const C=h[E],x=Pe(C)&&C.name;if(x==="Boolean"){m=!0;break}else x==="String"&&(v=!1)}else m=Pe(h)&&h.name==="Boolean";d[0]=m,d[1]=v,(m||Be(d,"default"))&&s.push(f)}}const l=[a,s];return ht(e)&&i.set(e,l),l}function Kd(e){return e[0]!=="$"&&!Wo(e)}const hy=e=>e[0]==="_"||e==="$stable",Of=e=>Ce(e)?e.map($n):[$n(e)],nw=(e,t,n)=>{if(t._n)return t;const i=TE((...r)=>Of(t(...r)),n);return i._c=!1,i},my=(e,t,n)=>{const i=e._ctx;for(const r in e){if(hy(r))continue;const o=e[r];if(Pe(o))t[r]=nw(r,o,i);else if(o!=null){const a=Of(o);t[r]=()=>a}}},gy=(e,t)=>{const n=Of(t);e.slots.default=()=>n},vy=(e,t,n)=>{for(const i in t)(n||i!=="_")&&(e[i]=t[i])},iw=(e,t,n)=>{const i=e.slots=uy();if(e.vnode.shapeFlag&32){const r=t._;r?(vy(i,t,n),n&&Mv(i,"_",r,!0)):my(t,i)}else t&&gy(e,t)},rw=(e,t,n)=>{const{vnode:i,slots:r}=e;let o=!0,a=Ue;if(i.shapeFlag&32){const s=t._;s?n&&s===1?o=!1:vy(r,t,n):(o=!t.$stable,my(t,r)),a=t}else t&&(gy(e,t),a={default:1});if(o)for(const s in r)!hy(s)&&a[s]==null&&delete r[s]},nn=yw;function ow(e){return aw(e)}function aw(e,t){const n=Dv();n.__VUE__=!0;const{insert:i,remove:r,patchProp:o,createElement:a,createText:s,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:p,setScopeId:d=zn,insertStaticContent:h}=e,m=(w,P,L,U=null,z=null,F=null,ee=void 0,V=null,J=!!P.dynamicChildren)=>{if(w===P)return;w&&!To(w,P)&&(U=g(w),H(w,z,F,!0),w=null),P.patchFlag===-2&&(J=!1,P.dynamicChildren=null);const{type:q,ref:se,shapeFlag:$}=P;switch(q){case Mc:v(w,P,L,U);break;case aa:E(w,P,L,U);break;case Wl:w==null&&C(P,L,U,ee);break;case ni:Y(w,P,L,U,z,F,ee,V,J);break;default:$&1?S(w,P,L,U,z,F,ee,V,J):$&6?Z(w,P,L,U,z,F,ee,V,J):($&64||$&128)&&q.process(w,P,L,U,z,F,ee,V,J,k)}se!=null&&z&&xu(se,w&&w.ref,F,P||w,!P)},v=(w,P,L,U)=>{if(w==null)i(P.el=s(P.children),L,U);else{const z=P.el=w.el;P.children!==w.children&&l(z,P.children)}},E=(w,P,L,U)=>{w==null?i(P.el=c(P.children||""),L,U):P.el=w.el},C=(w,P,L,U)=>{[w.el,w.anchor]=h(w.children,P,L,U,w.el,w.anchor)},x=({el:w,anchor:P},L,U)=>{let z;for(;w&&w!==P;)z=p(w),i(w,L,U),w=z;i(P,L,U)},y=({el:w,anchor:P})=>{let L;for(;w&&w!==P;)L=p(w),r(w),w=L;r(P)},S=(w,P,L,U,z,F,ee,V,J)=>{P.type==="svg"?ee="svg":P.type==="math"&&(ee="mathml"),w==null?T(P,L,U,z,F,ee,V,J):B(w,P,z,F,ee,V,J)},T=(w,P,L,U,z,F,ee,V)=>{let J,q;const{props:se,shapeFlag:$,transition:Q,dirs:_e}=w;if(J=w.el=a(w.type,F,se&&se.is,se),$&8?u(J,w.children):$&16&&D(w.children,J,null,U,z,Hl(w,F),ee,V),_e&&sr(w,null,U,"created"),I(J,w,w.scopeId,ee,U),se){for(const Ve in se)Ve!=="value"&&!Wo(Ve)&&o(J,Ve,null,se[Ve],F,U);"value"in se&&o(J,"value",null,se.value,F),(q=se.onVnodeBeforeMount)&&On(q,U,w)}_e&&sr(w,null,U,"beforeMount");const Oe=sw(z,Q);Oe&&Q.beforeEnter(J),i(J,P,L),((q=se&&se.onVnodeMounted)||Oe||_e)&&nn(()=>{q&&On(q,U,w),Oe&&Q.enter(J),_e&&sr(w,null,U,"mounted")},z)},I=(w,P,L,U,z)=>{if(L&&d(w,L),U)for(let F=0;F<U.length;F++)d(w,U[F]);if(z){let F=z.subTree;if(P===F||wy(F.type)&&(F.ssContent===P||F.ssFallback===P)){const ee=z.vnode;I(w,ee,ee.scopeId,ee.slotScopeIds,z.parent)}}},D=(w,P,L,U,z,F,ee,V,J=0)=>{for(let q=J;q<w.length;q++){const se=w[q]=V?Pi(w[q]):$n(w[q]);m(null,se,P,L,U,z,F,ee,V)}},B=(w,P,L,U,z,F,ee)=>{const V=P.el=w.el;let{patchFlag:J,dynamicChildren:q,dirs:se}=P;J|=w.patchFlag&16;const $=w.props||Ue,Q=P.props||Ue;let _e;if(L&&cr(L,!1),(_e=Q.onVnodeBeforeUpdate)&&On(_e,L,P,w),se&&sr(P,w,L,"beforeUpdate"),L&&cr(L,!0),($.innerHTML&&Q.innerHTML==null||$.textContent&&Q.textContent==null)&&u(V,""),q?N(w.dynamicChildren,q,V,L,U,Hl(P,z),F):ee||Se(w,P,V,null,L,U,Hl(P,z),F,!1),J>0){if(J&16)j(V,$,Q,L,z);else if(J&2&&$.class!==Q.class&&o(V,"class",null,Q.class,z),J&4&&o(V,"style",$.style,Q.style,z),J&8){const Oe=P.dynamicProps;for(let Ve=0;Ve<Oe.length;Ve++){const Fe=Oe[Ve],Qt=$[Fe],Mt=Q[Fe];(Mt!==Qt||Fe==="value")&&o(V,Fe,Qt,Mt,z,L)}}J&1&&w.children!==P.children&&u(V,P.children)}else!ee&&q==null&&j(V,$,Q,L,z);((_e=Q.onVnodeUpdated)||se)&&nn(()=>{_e&&On(_e,L,P,w),se&&sr(P,w,L,"updated")},U)},N=(w,P,L,U,z,F,ee)=>{for(let V=0;V<P.length;V++){const J=w[V],q=P[V],se=J.el&&(J.type===ni||!To(J,q)||J.shapeFlag&70)?f(J.el):L;m(J,q,se,null,U,z,F,ee,!0)}},j=(w,P,L,U,z)=>{if(P!==L){if(P!==Ue)for(const F in P)!Wo(F)&&!(F in L)&&o(w,F,P[F],null,z,U);for(const F in L){if(Wo(F))continue;const ee=L[F],V=P[F];ee!==V&&F!=="value"&&o(w,F,V,ee,z,U)}"value"in L&&o(w,"value",P.value,L.value,z)}},Y=(w,P,L,U,z,F,ee,V,J)=>{const q=P.el=w?w.el:s(""),se=P.anchor=w?w.anchor:s("");let{patchFlag:$,dynamicChildren:Q,slotScopeIds:_e}=P;_e&&(V=V?V.concat(_e):_e),w==null?(i(q,L,U),i(se,L,U),D(P.children||[],L,se,z,F,ee,V,J)):$>0&&$&64&&Q&&w.dynamicChildren?(N(w.dynamicChildren,Q,L,z,F,ee,V),(P.key!=null||z&&P===z.subTree)&&yy(w,P,!0)):Se(w,P,L,se,z,F,ee,V,J)},Z=(w,P,L,U,z,F,ee,V,J)=>{P.slotScopeIds=V,w==null?P.shapeFlag&512?z.ctx.activate(P,L,U,ee,J):ue(P,L,U,z,F,ee,J):Et(w,P,J)},ue=(w,P,L,U,z,F,ee)=>{const V=w.component=Tw(w,U,z);if(ry(w)&&(V.ctx.renderer=k),Aw(V,!1,ee),V.asyncDep){if(z&&z.registerDep(V,ve,ee),!w.el){const J=V.subTree=Oi(aa);E(null,J,P,L)}}else ve(V,w,P,L,z,F,ee)},Et=(w,P,L)=>{const U=P.component=w.component;if(gw(w,P,L))if(U.asyncDep&&!U.asyncResolved){oe(U,P,L);return}else U.next=P,U.update();else P.el=w.el,U.vnode=P},ve=(w,P,L,U,z,F,ee)=>{const V=()=>{if(w.isMounted){let{next:$,bu:Q,u:_e,parent:Oe,vnode:Ve}=w;{const en=_y(w);if(en){$&&($.el=Ve.el,oe(w,$,ee)),en.asyncDep.then(()=>{w.isUnmounted||V()});return}}let Fe=$,Qt;cr(w,!1),$?($.el=Ve.el,oe(w,$,ee)):$=Ve,Q&&Ll(Q),(Qt=$.props&&$.props.onVnodeBeforeUpdate)&&On(Qt,Oe,$,Ve),cr(w,!0);const Mt=Vl(w),Sn=w.subTree;w.subTree=Mt,m(Sn,Mt,f(Sn.el),g(Sn),w,z,F),$.el=Mt.el,Fe===null&&vw(w,Mt.el),_e&&nn(_e,z),(Qt=$.props&&$.props.onVnodeUpdated)&&nn(()=>On(Qt,Oe,$,Ve),z)}else{let $;const{el:Q,props:_e}=P,{bm:Oe,m:Ve,parent:Fe,root:Qt,type:Mt}=w,Sn=Yo(P);if(cr(w,!1),Oe&&Ll(Oe),!Sn&&($=_e&&_e.onVnodeBeforeMount)&&On($,Fe,P),cr(w,!0),Q&&ce){const en=()=>{w.subTree=Vl(w),ce(Q,w.subTree,w,z,null)};Sn&&Mt.__asyncHydrate?Mt.__asyncHydrate(Q,w,en):en()}else{Qt.ce&&Qt.ce._injectChildStyle(Mt);const en=w.subTree=Vl(w);m(null,en,L,U,w,z,F),P.el=en.el}if(Ve&&nn(Ve,z),!Sn&&($=_e&&_e.onVnodeMounted)){const en=P;nn(()=>On($,Fe,en),z)}(P.shapeFlag&256||Fe&&Yo(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&w.a&&nn(w.a,z),w.isMounted=!0,P=L=U=null}};w.scope.on();const J=w.effect=new Iv(V);w.scope.off();const q=w.update=J.run.bind(J),se=w.job=J.runIfDirty.bind(J);se.i=w,se.id=w.uid,J.scheduler=()=>Mf(se),cr(w,!0),q()},oe=(w,P,L)=>{P.component=w;const U=w.vnode.props;w.vnode=P,w.next=null,ew(w,P.props,U,L),rw(w,P.children,L),Fi(),zd(w),Hi()},Se=(w,P,L,U,z,F,ee,V,J=!1)=>{const q=w&&w.children,se=w?w.shapeFlag:0,$=P.children,{patchFlag:Q,shapeFlag:_e}=P;if(Q>0){if(Q&128){Le(q,$,L,U,z,F,ee,V,J);return}else if(Q&256){Qe(q,$,L,U,z,F,ee,V,J);return}}_e&8?(se&16&&R(q,z,F),$!==q&&u(L,$)):se&16?_e&16?Le(q,$,L,U,z,F,ee,V,J):R(q,z,F,!0):(se&8&&u(L,""),_e&16&&D($,L,U,z,F,ee,V,J))},Qe=(w,P,L,U,z,F,ee,V,J)=>{w=w||Yr,P=P||Yr;const q=w.length,se=P.length,$=Math.min(q,se);let Q;for(Q=0;Q<$;Q++){const _e=P[Q]=J?Pi(P[Q]):$n(P[Q]);m(w[Q],_e,L,null,z,F,ee,V,J)}q>se?R(w,z,F,!0,!1,$):D(P,L,U,z,F,ee,V,J,$)},Le=(w,P,L,U,z,F,ee,V,J)=>{let q=0;const se=P.length;let $=w.length-1,Q=se-1;for(;q<=$&&q<=Q;){const _e=w[q],Oe=P[q]=J?Pi(P[q]):$n(P[q]);if(To(_e,Oe))m(_e,Oe,L,null,z,F,ee,V,J);else break;q++}for(;q<=$&&q<=Q;){const _e=w[$],Oe=P[Q]=J?Pi(P[Q]):$n(P[Q]);if(To(_e,Oe))m(_e,Oe,L,null,z,F,ee,V,J);else break;$--,Q--}if(q>$){if(q<=Q){const _e=Q+1,Oe=_e<se?P[_e].el:U;for(;q<=Q;)m(null,P[q]=J?Pi(P[q]):$n(P[q]),L,Oe,z,F,ee,V,J),q++}}else if(q>Q)for(;q<=$;)H(w[q],z,F,!0),q++;else{const _e=q,Oe=q,Ve=new Map;for(q=Oe;q<=Q;q++){const tn=P[q]=J?Pi(P[q]):$n(P[q]);tn.key!=null&&Ve.set(tn.key,q)}let Fe,Qt=0;const Mt=Q-Oe+1;let Sn=!1,en=0;const Ro=new Array(Mt);for(q=0;q<Mt;q++)Ro[q]=0;for(q=_e;q<=$;q++){const tn=w[q];if(Qt>=Mt){H(tn,z,F,!0);continue}let kn;if(tn.key!=null)kn=Ve.get(tn.key);else for(Fe=Oe;Fe<=Q;Fe++)if(Ro[Fe-Oe]===0&&To(tn,P[Fe])){kn=Fe;break}kn===void 0?H(tn,z,F,!0):(Ro[kn-Oe]=q+1,kn>=en?en=kn:Sn=!0,m(tn,P[kn],L,null,z,F,ee,V,J),Qt++)}const Od=Sn?cw(Ro):Yr;for(Fe=Od.length-1,q=Mt-1;q>=0;q--){const tn=Oe+q,kn=P[tn],Id=tn+1<se?P[tn+1].el:U;Ro[q]===0?m(null,kn,L,Id,z,F,ee,V,J):Sn&&(Fe<0||q!==Od[Fe]?ze(kn,L,Id,2):Fe--)}}},ze=(w,P,L,U,z=null)=>{const{el:F,type:ee,transition:V,children:J,shapeFlag:q}=w;if(q&6){ze(w.component.subTree,P,L,U);return}if(q&128){w.suspense.move(P,L,U);return}if(q&64){ee.move(w,P,L,k);return}if(ee===ni){i(F,P,L);for(let $=0;$<J.length;$++)ze(J[$],P,L,U);i(w.anchor,P,L);return}if(ee===Wl){x(w,P,L);return}if(U!==2&&q&1&&V)if(U===0)V.beforeEnter(F),i(F,P,L),nn(()=>V.enter(F),z);else{const{leave:$,delayLeave:Q,afterLeave:_e}=V,Oe=()=>i(F,P,L),Ve=()=>{$(F,()=>{Oe(),_e&&_e()})};Q?Q(F,Oe,Ve):Ve()}else i(F,P,L)},H=(w,P,L,U=!1,z=!1)=>{const{type:F,props:ee,ref:V,children:J,dynamicChildren:q,shapeFlag:se,patchFlag:$,dirs:Q,cacheIndex:_e}=w;if($===-2&&(z=!1),V!=null&&xu(V,null,L,w,!0),_e!=null&&(P.renderCache[_e]=void 0),se&256){P.ctx.deactivate(w);return}const Oe=se&1&&Q,Ve=!Yo(w);let Fe;if(Ve&&(Fe=ee&&ee.onVnodeBeforeUnmount)&&On(Fe,P,w),se&6)ke(w.component,L,U);else{if(se&128){w.suspense.unmount(L,U);return}Oe&&sr(w,null,P,"beforeUnmount"),se&64?w.type.remove(w,P,L,k,U):q&&!q.hasOnce&&(F!==ni||$>0&&$&64)?R(q,P,L,!1,!0):(F===ni&&$&384||!z&&se&16)&&R(J,P,L),U&&K(w)}(Ve&&(Fe=ee&&ee.onVnodeUnmounted)||Oe)&&nn(()=>{Fe&&On(Fe,P,w),Oe&&sr(w,null,P,"unmounted")},L)},K=w=>{const{type:P,el:L,anchor:U,transition:z}=w;if(P===ni){re(L,U);return}if(P===Wl){y(w);return}const F=()=>{r(L),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(w.shapeFlag&1&&z&&!z.persisted){const{leave:ee,delayLeave:V}=z,J=()=>ee(L,F);V?V(w.el,F,J):J()}else F()},re=(w,P)=>{let L;for(;w!==P;)L=p(w),r(w),w=L;r(P)},ke=(w,P,L)=>{const{bum:U,scope:z,job:F,subTree:ee,um:V,m:J,a:q}=w;Yd(J),Yd(q),U&&Ll(U),z.stop(),F&&(F.flags|=8,H(ee,w,P,L)),V&&nn(V,P),nn(()=>{w.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},R=(w,P,L,U=!1,z=!1,F=0)=>{for(let ee=F;ee<w.length;ee++)H(w[ee],P,L,U,z)},g=w=>{if(w.shapeFlag&6)return g(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const P=p(w.anchor||w.el),L=P&&P[AE];return L?p(L):P};let _=!1;const M=(w,P,L)=>{w==null?P._vnode&&H(P._vnode,null,null,!0):m(P._vnode||null,w,P,null,null,null,L),P._vnode=w,_||(_=!0,zd(),ey(),_=!1)},k={p:m,um:H,m:ze,r:K,mt:ue,mc:D,pc:Se,pbc:N,n:g,o:e};let W,ce;return{render:M,hydrate:W,createApp:ZE(M,W)}}function Hl({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function cr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function sw(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function yy(e,t,n=!1){const i=e.children,r=t.children;if(Ce(i)&&Ce(r))for(let o=0;o<i.length;o++){const a=i[o];let s=r[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=r[o]=Pi(r[o]),s.el=a.el),!n&&s.patchFlag!==-2&&yy(a,s)),s.type===Mc&&(s.el=a.el)}}function cw(e){const t=e.slice(),n=[0];let i,r,o,a,s;const c=e.length;for(i=0;i<c;i++){const l=e[i];if(l!==0){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,e[n[s]]<l?o=s+1:a=s;l<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=t[a];return n}function _y(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_y(t)}function Yd(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const lw=Symbol.for("v-scx"),uw=()=>Os(lw);function zl(e,t,n){return by(e,t,n)}function by(e,t,n=Ue){const{immediate:i,deep:r,flush:o,once:a}=n,s=Nt({},n);let c;if(Dc)if(o==="sync"){const p=uw();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!t||i)s.once=!0;else{const p=()=>{};return p.stop=zn,p.resume=zn,p.pause=zn,p}const l=zt;s.call=(p,d,h)=>Un(p,l,d,h);let u=!1;o==="post"?s.scheduler=p=>{nn(p,l&&l.suspense)}:o!=="sync"&&(u=!0,s.scheduler=(p,d)=>{d?p():Mf(p)}),s.augmentJob=p=>{t&&(p.flags|=4),u&&(p.flags|=2,l&&(p.id=l.uid,p.i=l))};const f=wE(e,t,s);return c&&c.push(f),f}function fw(e,t,n){const i=this.proxy,r=_t(e)?e.includes(".")?xy(i,e):()=>i[e]:e.bind(i,i);let o;Pe(t)?o=t:(o=t.handler,n=t);const a=xa(this),s=by(r,o.bind(i),n);return a(),s}function xy(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const pw=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ni(t)}Modifiers`]||e[`${Rr(t)}Modifiers`];function dw(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Ue;let r=n;const o=t.startsWith("update:"),a=o&&pw(i,t.slice(7));a&&(a.trim&&(r=n.map(u=>_t(u)?u.trim():u)),a.number&&(r=n.map(j0)));let s,c=i[s=Nl(t)]||i[s=Nl(Ni(t))];!c&&o&&(c=i[s=Nl(Rr(t))]),c&&Un(c,e,6,r);const l=i[s+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Un(l,e,6,r)}}function Ey(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const o=e.emits;let a={},s=!1;if(!Pe(e)){const c=l=>{const u=Ey(l,t,!0);u&&(s=!0,Nt(a,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!o&&!s?(ht(e)&&i.set(e,null),null):(Ce(o)?o.forEach(c=>a[c]=null):Nt(a,o),ht(e)&&i.set(e,a),a)}function Ac(e,t){return!e||!wc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Be(e,t[0].toLowerCase()+t.slice(1))||Be(e,Rr(t))||Be(e,t))}function Vl(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[o],slots:a,attrs:s,emit:c,render:l,renderCache:u,props:f,data:p,setupState:d,ctx:h,inheritAttrs:m}=e,v=Qs(e);let E,C;try{if(n.shapeFlag&4){const y=r||i,S=y;E=$n(l.call(S,y,u,f,d,p,h)),C=s}else{const y=t;E=$n(y.length>1?y(f,{attrs:s,slots:a,emit:c}):y(f,null)),C=t.props?s:hw(s)}}catch(y){Xo.length=0,Pc(y,e,1),E=Oi(aa)}let x=E;if(C&&m!==!1){const y=Object.keys(C),{shapeFlag:S}=x;y.length&&S&7&&(o&&y.some(mf)&&(C=mw(C,o)),x=Zr(x,C,!1,!0))}return n.dirs&&(x=Zr(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&Df(x,n.transition),E=x,Qs(v),E}const hw=e=>{let t;for(const n in e)(n==="class"||n==="style"||wc(n))&&((t||(t={}))[n]=e[n]);return t},mw=(e,t)=>{const n={};for(const i in e)(!mf(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function gw(e,t,n){const{props:i,children:r,component:o}=e,{props:a,children:s,patchFlag:c}=t,l=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return i?qd(i,a,l):!!a;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(a[p]!==i[p]&&!Ac(l,p))return!0}}}else return(r||s)&&(!s||!s.$stable)?!0:i===a?!1:i?a?qd(i,a,l):!0:!!a;return!1}function qd(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(t[o]!==e[o]&&!Ac(n,o))return!0}return!1}function vw({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const wy=e=>e.__isSuspense;function yw(e,t){t&&t.pendingBranch?Ce(e)?t.effects.push(...e):t.effects.push(e):PE(e)}const ni=Symbol.for("v-fgt"),Mc=Symbol.for("v-txt"),aa=Symbol.for("v-cmt"),Wl=Symbol.for("v-stc"),Xo=[];let on=null;function Sy(e=!1){Xo.push(on=e?null:[])}function _w(){Xo.pop(),on=Xo[Xo.length-1]||null}let sa=1;function Xd(e){sa+=e,e<0&&on&&(on.hasOnce=!0)}function Cy(e){return e.dynamicChildren=sa>0?on||Yr:null,_w(),sa>0&&on&&on.push(e),e}function bw(e,t,n,i,r,o){return Cy(tc(e,t,n,i,r,o,!0))}function xw(e,t,n,i,r){return Cy(Oi(e,t,n,i,r,!0))}function Ry(e){return e?e.__v_isVNode===!0:!1}function To(e,t){return e.type===t.type&&e.key===t.key}const Py=({key:e})=>e??null,Is=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?_t(e)||It(e)||Pe(e)?{i:Fn,r:e,k:t,f:!!n}:e:null);function tc(e,t=null,n=null,i=0,r=null,o=e===ni?0:1,a=!1,s=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Py(t),ref:t&&Is(t),scopeId:ny,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Fn};return s?(If(c,n),o&128&&e.normalize(c)):n&&(c.shapeFlag|=_t(n)?8:16),sa>0&&!a&&on&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&on.push(c),c}const Oi=Ew;function Ew(e,t=null,n=null,i=0,r=null,o=!1){if((!e||e===VE)&&(e=aa),Ry(e)){const s=Zr(e,t,!0);return n&&If(s,n),sa>0&&!o&&on&&(s.shapeFlag&6?on[on.indexOf(e)]=s:on.push(s)),s.patchFlag=-2,s}if(Ow(e)&&(e=e.__vccOpts),t){t=ww(t);let{class:s,style:c}=t;s&&!_t(s)&&(t.class=_f(s)),ht(c)&&(Tf(c)&&!Ce(c)&&(c=Nt({},c)),t.style=yf(c))}const a=_t(e)?1:wy(e)?128:ME(e)?64:ht(e)?4:Pe(e)?2:0;return tc(e,t,n,i,r,a,o,!0)}function ww(e){return e?Tf(e)||fy(e)?Nt({},e):e:null}function Zr(e,t,n=!1,i=!1){const{props:r,ref:o,patchFlag:a,children:s,transition:c}=e,l=t?Cw(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Py(l),ref:t&&t.ref?n&&o?Ce(o)?o.concat(Is(t)):[o,Is(t)]:Is(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ni?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zr(e.ssContent),ssFallback:e.ssFallback&&Zr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&i&&Df(u,c.clone(u)),u}function Sw(e=" ",t=0){return Oi(Mc,null,e,t)}function $n(e){return e==null||typeof e=="boolean"?Oi(aa):Ce(e)?Oi(ni,null,e.slice()):Ry(e)?Pi(e):Oi(Mc,null,String(e))}function Pi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Zr(e)}function If(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Ce(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),If(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!fy(t)?t._ctx=Fn:r===3&&Fn&&(Fn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Pe(t)?(t={default:t,_ctx:Fn},n=32):(t=String(t),i&64?(n=16,t=[Sw(t)]):n=8);e.children=t,e.shapeFlag|=n}function Cw(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=_f([t.class,i.class]));else if(r==="style")t.style=yf([t.style,i.style]);else if(wc(r)){const o=t[r],a=i[r];a&&o!==a&&!(Ce(o)&&o.includes(a))&&(t[r]=o?[].concat(o,a):a)}else r!==""&&(t[r]=i[r])}return t}function On(e,t,n,i=null){Un(e,t,7,[n,i])}const Rw=cy();let Pw=0;function Tw(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Rw,o={uid:Pw++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ov(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dy(i,r),emitsOptions:Ey(i,r),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:i.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=dw.bind(null,o),e.ce&&e.ce(o),o}let zt=null,nc,Ru;{const e=Dv(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),o=>{r.length>1?r.forEach(a=>a(o)):r[0](o)}};nc=t("__VUE_INSTANCE_SETTERS__",n=>zt=n),Ru=t("__VUE_SSR_SETTERS__",n=>Dc=n)}const xa=e=>{const t=zt;return nc(e),e.scope.on(),()=>{e.scope.off(),nc(t)}},Zd=()=>{zt&&zt.scope.off(),nc(null)};function Ty(e){return e.vnode.shapeFlag&4}let Dc=!1;function Aw(e,t=!1,n=!1){t&&Ru(t);const{props:i,children:r}=e.vnode,o=Ty(e);QE(e,i,o,t),iw(e,r,n);const a=o?Mw(e,t):void 0;return t&&Ru(!1),a}function Mw(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,WE);const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?kw(e):null,o=xa(e);Fi();const a=ba(i,e,0,[e.props,r]);if(Hi(),o(),Tv(a)){if(Yo(e)||iy(e),a.then(Zd,Zd),t)return a.then(s=>{Jd(e,s,t)}).catch(s=>{Pc(s,e,0)});e.asyncDep=a}else Jd(e,a,t)}else Ay(e,t)}function Jd(e,t,n){Pe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ht(t)&&(e.setupState=Zv(t)),Ay(e,n)}let Qd;function Ay(e,t,n){const i=e.type;if(!e.render){if(!t&&Qd&&!i.render){const r=i.template||kf(e).template;if(r){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:c}=i,l=Nt(Nt({isCustomElement:o,delimiters:s},a),c);i.render=Qd(r,l)}}e.render=i.render||zn}{const r=xa(e);Fi();try{UE(e)}finally{Hi(),r()}}}const Dw={get(e,t){return Lt(e,"get",""),e[t]}};function kw(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Dw),slots:e.slots,emit:e.emit,expose:t}}function Nf(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Zv(qv(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qo)return qo[n](e)},has(t,n){return n in t||n in qo}})):e.proxy}function Ow(e){return Pe(e)&&"__vccOpts"in e}const Iw=(e,t)=>xE(e,t,Dc),Nw="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pu;const eh=typeof window<"u"&&window.trustedTypes;if(eh)try{Pu=eh.createPolicy("vue",{createHTML:e=>e})}catch{}const My=Pu?e=>Pu.createHTML(e):e=>e,Lw="http://www.w3.org/2000/svg",Bw="http://www.w3.org/1998/Math/MathML",ti=typeof document<"u"?document:null,th=ti&&ti.createElement("template"),$w={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?ti.createElementNS(Lw,e):t==="mathml"?ti.createElementNS(Bw,e):n?ti.createElement(e,{is:n}):ti.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>ti.createTextNode(e),createComment:e=>ti.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ti.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,o){const a=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{th.innerHTML=My(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const s=th.content;if(i==="svg"||i==="mathml"){const c=s.firstChild;for(;c.firstChild;)s.appendChild(c.firstChild);s.removeChild(c)}t.insertBefore(s,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},jw=Symbol("_vtc");function Fw(e,t,n){const i=e[jw];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const nh=Symbol("_vod"),Hw=Symbol("_vsh"),zw=Symbol(""),Vw=/(^|;)\s*display\s*:/;function Ww(e,t,n){const i=e.style,r=_t(n);let o=!1;if(n&&!r){if(t)if(_t(t))for(const a of t.split(";")){const s=a.slice(0,a.indexOf(":")).trim();n[s]==null&&Ns(i,s,"")}else for(const a in t)n[a]==null&&Ns(i,a,"");for(const a in n)a==="display"&&(o=!0),Ns(i,a,n[a])}else if(r){if(t!==n){const a=i[zw];a&&(n+=";"+a),i.cssText=n,o=Vw.test(n)}}else t&&e.removeAttribute("style");nh in e&&(e[nh]=o?i.display:"",e[Hw]&&(i.display="none"))}const ih=/\s*!important$/;function Ns(e,t,n){if(Ce(n))n.forEach(i=>Ns(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Uw(e,t);ih.test(n)?e.setProperty(Rr(i),n.replace(ih,""),"important"):e[i]=n}}const rh=["Webkit","Moz","ms"],Ul={};function Uw(e,t){const n=Ul[t];if(n)return n;let i=Ni(t);if(i!=="filter"&&i in e)return Ul[t]=i;i=Av(i);for(let r=0;r<rh.length;r++){const o=rh[r]+i;if(o in e)return Ul[t]=o}return t}const oh="http://www.w3.org/1999/xlink";function ah(e,t,n,i,r,o=U0(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(oh,t.slice(6,t.length)):e.setAttributeNS(oh,t,n):n==null||o&&!kv(n)?e.removeAttribute(t):e.setAttribute(t,o?"":lo(n)?String(n):n)}function sh(e,t,n,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?My(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,s=n==null?e.type==="checkbox"?"on":"":String(n);(a!==s||!("_value"in e))&&(e.value=s),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=kv(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(t)}function Gw(e,t,n,i){e.addEventListener(t,n,i)}function Kw(e,t,n,i){e.removeEventListener(t,n,i)}const ch=Symbol("_vei");function Yw(e,t,n,i,r=null){const o=e[ch]||(e[ch]={}),a=o[t];if(i&&a)a.value=i;else{const[s,c]=qw(t);if(i){const l=o[t]=Jw(i,r);Gw(e,s,l,c)}else a&&(Kw(e,s,a,c),o[t]=void 0)}}const lh=/(?:Once|Passive|Capture)$/;function qw(e){let t;if(lh.test(e)){t={};let i;for(;i=e.match(lh);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Rr(e.slice(2)),t]}let Gl=0;const Xw=Promise.resolve(),Zw=()=>Gl||(Xw.then(()=>Gl=0),Gl=Date.now());function Jw(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Un(Qw(i,n.value),t,5,[i])};return n.value=e,n.attached=Zw(),n}function Qw(e,t){if(Ce(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const uh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,e1=(e,t,n,i,r,o)=>{const a=r==="svg";t==="class"?Fw(e,i,a):t==="style"?Ww(e,n,i):wc(t)?mf(t)||Yw(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):t1(e,t,i,a))?(sh(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ah(e,t,i,a,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!_t(i))?sh(e,Ni(t),i):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),ah(e,t,i,a))};function t1(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&uh(t)&&Pe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return uh(t)&&_t(n)?!1:t in e}const n1=Nt({patchProp:e1},$w);let fh;function i1(){return fh||(fh=ow(n1))}const r1=(...e)=>{const t=i1().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=a1(i);if(!r)return;const o=t._component;!Pe(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=n(r,!1,o1(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t};function o1(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function a1(e){return _t(e)?document.querySelector(e):e}var s1=!1;/*!
 * pinia v2.2.4
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */const c1=Symbol();var ph;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ph||(ph={}));function l1(){const e=G0(!0),t=e.run(()=>Xv({}));let n=[],i=[];const r=qv({install(o){r._a=o,o.provide(c1,r),o.config.globalProperties.$pinia=r,i.forEach(a=>n.push(a)),i=[]},use(o){return!this._a&&!s1?i.push(o):n.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}function Lf(e,t,n,i){return Object.defineProperty(e,t,{get:n,set:i,enumerable:!0}),e}const xr=Xv(!1);let Tu;function u1(e,t){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(vivaldi)[\/]([\w.]+)/.exec(e)||/(chrome|crios)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(firefox|fxios)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(e)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:t[0]||""}}function f1(e){return/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[]}const Dy="ontouchstart"in window||window.navigator.maxTouchPoints>0;function p1(e){const t=e.toLowerCase(),n=f1(t),i=u1(t,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};i.browser&&(r[i.browser]=!0,r.version=i.version,r.versionNumber=parseInt(i.version,10)),i.platform&&(r[i.platform]=!0);const o=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(o===!0||t.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,i.browser="edge"):r.crios?(r.chrome=!0,i.browser="chrome"):r.fxios&&(r.firefox=!0,i.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(i.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&o!==!0)&&(r.webkit=!0),r.opr&&(i.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(i.browser="blackberry",r.blackberry=!0):r.playbook?(i.browser="playbook",r.playbook=!0):r.android?(i.browser="android",r.android=!0):r.kindle?(i.browser="kindle",r.kindle=!0):r.silk&&(i.browser="silk",r.silk=!0)),r.name=i.browser,r.platform=i.platform,t.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),xr.value===!0&&(Tu={is:{...r}}),Dy===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const a=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:a,[a]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const dh=navigator.userAgent||navigator.vendor||window.opera,d1={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Vn={userAgent:dh,is:p1(dh),has:{touch:Dy},within:{iframe:window.self!==window.top}},Au={install(e){const{$q:t}=e;xr.value===!0?(e.onSSRHydrated.push(()=>{Object.assign(t.platform,Vn),xr.value=!1}),t.platform=_a(this)):t.platform=this}};{let e;Lf(Vn.has,"webStorage",()=>{if(e!==void 0)return e;try{if(window.localStorage)return e=!0,!0}catch{}return e=!1,!1}),Object.assign(Au,Vn),xr.value===!0&&(Object.assign(Au,Tu,d1),Tu=null)}const kc=(e,t)=>{const n=_a(e);for(const i in e)Lf(t,i,()=>n[i],r=>{n[i]=r});return t},ky={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(ky,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch{}function ca(){}function h1(e,t=250,n){let i=null;function r(){const o=arguments,a=()=>{i=null,e.apply(this,o)};i!==null&&clearTimeout(i),i=setTimeout(a,t)}return r.cancel=()=>{i!==null&&clearTimeout(i)},r}const Kl=["sm","md","lg","xl"],{passive:hh}=ky,m1=kc({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:ca,setDebounce:ca,install({$q:e,onSSRHydrated:t}){if(e.screen=this,this.__installed===!0){e.config.screen!==void 0&&(e.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,i=n||window,r=document.scrollingElement||document.documentElement,o=n===void 0||Vn.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],a=e.config.screen!==void 0&&e.config.screen.bodyClasses===!0;this.__update=f=>{const[p,d]=o();if(d!==this.height&&(this.height=d),p!==this.width)this.width=p;else if(f!==!0)return;let h=this.sizes;this.gt.xs=p>=h.sm,this.gt.sm=p>=h.md,this.gt.md=p>=h.lg,this.gt.lg=p>=h.xl,this.lt.sm=p<h.sm,this.lt.md=p<h.md,this.lt.lg=p<h.lg,this.lt.xl=p<h.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,h=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",h!==this.name&&(a===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${h}`)),this.name=h)};let s,c={},l=16;this.setSizes=f=>{Kl.forEach(p=>{f[p]!==void 0&&(c[p]=f[p])})},this.setDebounce=f=>{l=f};const u=()=>{const f=getComputedStyle(document.body);f.getPropertyValue("--q-size-sm")&&Kl.forEach(p=>{this.sizes[p]=parseInt(f.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{Kl.forEach(d=>{p[d]&&(this.sizes[d]=p[d])}),this.__update(!0)},this.setDebounce=p=>{s!==void 0&&i.removeEventListener("resize",s,hh),s=p>0?h1(this.__update,p):this.__update,i.addEventListener("resize",s,hh)},this.setDebounce(l),Object.keys(c).length!==0?(this.setSizes(c),c=void 0):this.__update(),a===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};xr.value===!0?t.push(u):u()}}),Dt=kc({isActive:!1,mode:!1},{__media:void 0,set(e){Dt.mode=e,e==="auto"?(Dt.__media===void 0&&(Dt.__media=window.matchMedia("(prefers-color-scheme: dark)"),Dt.__updateMedia=()=>{Dt.set("auto")},Dt.__media.addListener(Dt.__updateMedia)),e=Dt.__media.matches):Dt.__media!==void 0&&(Dt.__media.removeListener(Dt.__updateMedia),Dt.__media=void 0),Dt.isActive=e===!0,document.body.classList.remove(`body--${e===!0?"light":"dark"}`),document.body.classList.add(`body--${e===!0?"dark":"light"}`)},toggle(){Dt.set(Dt.isActive===!1)},install({$q:e,ssrContext:t}){const{dark:n}=e.config;e.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function g1(e,t,n=document.body){if(typeof e!="string")throw new TypeError("Expected a string as propName");if(typeof t!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${e}`,t)}function v1(e){e.isComposing}function Oy(e){if(e.ios===!0)return"ios";if(e.android===!0)return"android"}function y1({is:e,has:t,within:n},i){const r=[e.desktop===!0?"desktop":"mobile",`${t.touch===!1?"no-":""}touch`];if(e.mobile===!0){const o=Oy(e);o!==void 0&&r.push("platform-"+o)}if(e.nativeMobile===!0){const o=e.nativeMobileWrapper;r.push(o),r.push("native-mobile"),e.ios===!0&&(i[o]===void 0||i[o].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else e.electron===!0?r.push("electron"):e.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function _1(){const{is:e}=Vn,t=document.body.className,n=new Set(t.replace(/ {2}/g," ").split(" "));if(e.nativeMobile!==!0&&e.electron!==!0&&e.bex!==!0){if(e.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(e.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=Oy(e);r!==void 0&&n.add(`platform-${r}`)}}Vn.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Vn.within.iframe===!0&&n.add("within-iframe");const i=Array.from(n).join(" ");t!==i&&(document.body.className=i)}function b1(e){for(const t in e)g1(t,e[t])}const x1={install(e){if(this.__installed!==!0){if(xr.value===!0)_1();else{const{$q:t}=e;t.config.brand!==void 0&&b1(t.config.brand);const n=y1(Vn,t.config);document.body.classList.add.apply(document.body.classList,n)}Vn.is.ios===!0&&document.body.addEventListener("touchstart",ca),window.addEventListener("keydown",v1,!0)}}},Iy=()=>!0;function E1(e){return typeof e=="string"&&e!==""&&e!=="/"&&e!=="#/"}function w1(e){return e.startsWith("#")===!0&&(e=e.substring(1)),e.startsWith("/")===!1&&(e="/"+e),e.endsWith("/")===!0&&(e=e.substring(0,e.length-1)),"#"+e}function S1(e){if(e.backButtonExit===!1)return()=>!1;if(e.backButtonExit==="*")return Iy;const t=["#/"];return Array.isArray(e.backButtonExit)===!0&&t.push(...e.backButtonExit.filter(E1).map(w1)),()=>t.includes(window.location.hash)}const C1={__history:[],add:ca,remove:ca,install({$q:e}){if(this.__installed===!0)return;const{cordova:t,capacitor:n}=Vn.is;if(t!==!0&&n!==!0)return;const i=e.config[t===!0?"cordova":"capacitor"];if(i!==void 0&&i.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=a=>{a.condition===void 0&&(a.condition=Iy),this.__history.push(a)},this.remove=a=>{const s=this.__history.indexOf(a);s>=0&&this.__history.splice(s,1)};const r=S1(Object.assign({backButtonExit:!0},i)),o=()=>{if(this.__history.length){const a=this.__history[this.__history.length-1];a.condition()===!0&&(this.__history.pop(),a.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};t===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",o,!1)}):window.Capacitor.Plugins.App.addListener("backButton",o)}},mh={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:e=>e?`Expand "${e}"`:"Expand",collapse:e=>e?`Collapse "${e}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:e=>e===1?"1 record selected.":(e===0?"No":e)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(e,t,n)=>e+"-"+t+" of "+n,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function gh(){const e=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof e=="string")return e.split(/[-_]/).map((t,n)=>n===0?t.toLowerCase():n>1||t.length<4?t.toUpperCase():t[0].toUpperCase()+t.slice(1).toLowerCase()).join("-")}const Ti=kc({__qLang:{}},{getLocale:gh,set(e=mh,t){const n={...e,rtl:e.rtl===!0,getLocale:gh};{if(n.set=Ti.set,Ti.__langConfig===void 0||Ti.__langConfig.noHtmlAttrs!==!0){const i=document.documentElement;i.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),i.setAttribute("lang",n.isoName)}Object.assign(Ti.__qLang,n)}},install({$q:e,lang:t,ssrContext:n}){e.lang=Ti.__qLang,Ti.__langConfig=e.config.lang,this.__installed===!0?t!==void 0&&this.set(t):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(i){return Reflect.ownKeys(i).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(t||mh))}}),R1={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},ic=kc({iconMapFn:null,__qIconSet:{}},{set(e,t){const n={...e};n.set=ic.set,Object.assign(ic.__qIconSet,n)},install({$q:e,iconSet:t,ssrContext:n}){e.config.iconMapFn!==void 0&&(this.iconMapFn=e.config.iconMapFn),e.iconSet=this.__qIconSet,Lf(e,"iconMapFn",()=>this.iconMapFn,i=>{this.iconMapFn=i}),this.__installed===!0?t!==void 0&&this.set(t):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(i){return Reflect.ownKeys(i).filter(r=>r!=="set")}}),this.set(t||R1))}}),P1="_q_",vh={};let Ny=!1;function T1(){Ny=!0}function yh(e){return e!==null&&typeof e=="object"&&Array.isArray(e)!==!0}const _h=[Au,x1,Dt,m1,C1,Ti,ic];function bh(e,t){t.forEach(n=>{n.install(e),n.__installed=!0})}function A1(e,t,n){e.config.globalProperties.$q=n.$q,e.provide(P1,n.$q),bh(n,_h),t.components!==void 0&&Object.values(t.components).forEach(i=>{yh(i)===!0&&i.name!==void 0&&e.component(i.name,i)}),t.directives!==void 0&&Object.values(t.directives).forEach(i=>{yh(i)===!0&&i.name!==void 0&&e.directive(i.name,i)}),t.plugins!==void 0&&bh(n,Object.values(t.plugins).filter(i=>typeof i.install=="function"&&_h.includes(i)===!1)),xr.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(i=>{i()}),n.$q.onSSRHydrated=()=>{}})}const M1=function(e,t={}){const n={version:"2.17.0"};Ny===!1?(t.config!==void 0&&Object.assign(vh,t.config),n.config={...vh},T1()):n.config=t.config||{},A1(e,t,{parentApp:e,$q:n,lang:t.lang,iconSet:t.iconSet,onSSRHydrated:[]})},D1={name:"Quasar",version:"2.17.0",install:M1,lang:Ti,iconSet:ic};function ie(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function Bf(e){return Array.prototype.concat.apply([],e)}const Ea=Object.prototype.toString,k1=Object.prototype.hasOwnProperty;function Er(e){return e===void 0}function mt(e){return e!==void 0}function la(e){return e==null}function ge(e){return Ea.call(e)==="[object Array]"}function gt(e){return Ea.call(e)==="[object Object]"}function fe(e){return Ea.call(e)==="[object Number]"}function lt(e){const t=Ea.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function qt(e){return Ea.call(e)==="[object String]"}function O1(e){if(!ge(e))throw new Error("must supply array")}function Vt(e,t){return!la(e)&&k1.call(e,t)}function De(e,t){const n=Oc(t);let i;return A(e,function(r,o){if(n(r,o))return i=r,!1}),i}function Ly(e,t){const n=Oc(t);let i=ge(e)?-1:void 0;return A(e,function(r,o){if(n(r,o))return i=o,!1}),i}function Ee(e,t){const n=Oc(t);let i=[];return A(e,function(r,o){n(r,o)&&i.push(r)}),i}function A(e,t){let n,i;if(Er(e))return;const r=ge(e)?$1:B1;for(let o in e)if(Vt(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function I1(e,t){if(Er(e))return[];O1(e);const n=Oc(t);return e.filter(function(i,r){return!n(i,r)})}function Xt(e,t,n){return A(e,function(i,r){n=t(n,i,r)}),n}function Pr(e,t){return!!Xt(e,function(n,i,r){return n&&t(i,r)},!0)}function zi(e,t){return!!De(e,t)}function Rt(e,t){let n=[];return A(e,function(i,r){n.push(t(i,r))}),n}function rc(e){return e&&Object.keys(e)||[]}function N1(e){return rc(e).length}function $f(e){return Rt(e,t=>t)}function uo(e,t,n={}){return t=jf(t),A(e,function(i){let r=t(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function By(e,...t){e=jf(e);let n={};return A(t,r=>uo(r,e,n)),Rt(n,function(r,o){return r[0]})}const L1=By;function Gn(e,t){t=jf(t);let n=[];return A(e,function(i,r){let o=t(i,r),a={d:o,v:i};for(var s=0;s<n.length;s++){let{d:c}=n[s];if(o<c){n.splice(s,0,a);return}}n.push(a)}),Rt(n,i=>i.v)}function Pn(e){return function(t){return Pr(e,function(n,i){return t[i]===n})}}function jf(e){return lt(e)?e:t=>t[e]}function Oc(e){return lt(e)?e:t=>t===e}function B1(e){return e}function $1(e){return Number(e)}function $y(e,t){let n,i,r,o;function a(f){let p=Date.now(),d=f?0:o+t-p;if(d>0)return s(d);e.apply(r,i),c()}function s(f){n=setTimeout(a,f)}function c(){n&&clearTimeout(n),n=o=i=r=void 0}function l(){n&&a(!0),c()}function u(...f){o=Date.now(),i=f,r=this,n||s(t)}return u.flush=l,u.cancel=c,u}function Wt(e,t){return e.bind(t)}function O(e,...t){return Object.assign(e,...t)}function j1(e,t,n){let i=e;return A(t,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let a=t[o+1],s=i[r];mt(a)&&la(s)&&(s=i[r]=isNaN(+a)?{}:[]),Er(a)?Er(n)?delete i[r]:i[r]=n:i=s}),e}function An(e,t){let n={},i=Object(e);return A(t,function(r){r in i&&(n[r]=e[r])}),n}function gn(e,t){let n={},i=Object(e);return A(i,function(r,o){t.indexOf(o)===-1&&(n[o]=r)}),n}var F1=1e3;function ui(e,t){var n=this;t=t||F1,e.on(["render.shape","render.connection"],t,function(i,r){var o=i.type,a=r.element,s=r.gfx,c=r.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(s,a,c):n.drawConnection(s,a,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}ui.prototype.canRender=function(e){};ui.prototype.drawShape=function(e,t){};ui.prototype.drawConnection=function(e,t){};ui.prototype.getShapePath=function(e){};ui.prototype.getConnectionPath=function(e){};function b(e,t){var n=X(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function be(e,t){return zi(t,function(n){return b(e,n)})}function X(e){return e&&e.businessObject||e}function Ae(e){return e&&e.di}function we(e,t){return b(e,"bpmn:CallActivity")?!1:b(e,"bpmn:SubProcess")?(t=t||Ae(e),t&&b(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):b(e,"bpmn:Participant")?!!X(e).processRef:!0}function dt(e){if(!(!b(e,"bpmn:Participant")&&!b(e,"bpmn:Lane"))){var t=Ae(e).isHorizontal;return t===void 0?!0:t}}function H1(e){return e&&X(e).isInterrupting!==!1}function Pt(e){return e&&!!X(e).triggeredByEvent}function fo(e,t){var n=X(e).eventDefinitions;return zi(n,function(i){return b(i,t)})}function z1(e){return fo(e,"bpmn:ErrorEventDefinition")}function V1(e){return fo(e,"bpmn:EscalationEventDefinition")}function W1(e){return fo(e,"bpmn:CompensateEventDefinition")}function $e(e){return gt(e)&&Vt(e,"waypoints")}function Me(e){return gt(e)&&Vt(e,"labelTarget")}var ua={width:90,height:20},xh=15;function wr(e){return b(e,"bpmn:Event")||b(e,"bpmn:Gateway")||b(e,"bpmn:DataStoreReference")||b(e,"bpmn:DataObjectReference")||b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput")||b(e,"bpmn:SequenceFlow")||b(e,"bpmn:MessageFlow")||b(e,"bpmn:Group")}function Ic(e){return Me(e.label)}function U1(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=G1(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=xh:a+=xh,{x:a,y:s}}function G1(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Ff(e){return e.waypoints?U1(e.waypoints):b(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+ua.height/2}:{x:e.x+e.width/2,y:e.y+e.height+ua.height/2}}function K1(e,t){var n,i,r,o=e.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(ua.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=Ff(t),i=ua),O({x:n.x-i.width/2,y:n.y-i.height/2},i)}function jy(e){if(b(e,"bpmn:FlowElement")||b(e,"bpmn:Participant")||b(e,"bpmn:Lane")||b(e,"bpmn:SequenceFlow")||b(e,"bpmn:MessageFlow")||b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput"))return"name";if(b(e,"bpmn:TextAnnotation"))return"text";if(b(e,"bpmn:Group"))return"categoryValueRef"}function Y1(e){var t=e.categoryValueRef;return t&&t.value||""}function an(e){var t=e.businessObject,n=jy(t);if(n)return n==="categoryValueRef"?Y1(t):t[n]||""}function q1(e,t){var n=e.businessObject,i=jy(n);return i&&(i==="categoryValueRef"?n.categoryValueRef.value=t:n[i]=t),e}function X1(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function Z1(e,t){return t.appendChild(X1(e,t))}function de(e,t){return Z1(t,e),e}var Mu=2,Fy={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Mu,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Mu,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function J1(e,t){return Fy[t]?e.style[t]:e.getAttributeNS(null,t)}function Hy(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Fy[i];r?(r===Mu&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function Q1(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)Hy(e,r,t[r])}function te(e,t,n){if(typeof t=="string")if(n!==void 0)Hy(e,t,n);else return J1(e,t);else Q1(e,t);return e}const eS=Object.prototype.toString;function Te(e){return new Bi(e)}function Bi(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Bi.prototype.add=function(e){return this.list.add(e),this};Bi.prototype.remove=function(e){return eS.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Bi.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Bi.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Bi.prototype.array=function(){return Array.from(this.list)};Bi.prototype.has=Bi.prototype.contains=function(e){return this.list.contains(e)};function Nc(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function zy(e){return e.cloneNode(!0)}var Hf={svg:"http://www.w3.org/2000/svg"},Eh='<svg xmlns="'+Hf.svg+'"';function tS(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Hf.svg)===-1&&(e=Eh+e.substring(4)):(e=Eh+">"+e+"</svg>",t=!0);var n=nS(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function nS(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function ae(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=tS(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Hf.svg,e),t&&te(n,t),n}var Yl=null;function Vy(){return Yl===null&&(Yl=ae("svg")),Yl}function wh(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function iS(e,t,n,i,r,o){var a=Vy().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return wh(a,e);case 6:return wh(a,{a:e,b:t,c:n,d:i,e:r,f:o})}}function Zo(e){return Vy().createSVGTransform()}var Sh=/([&<>]{1})/g,rS=/([&<>\n\r"]{1})/g,oS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function ql(e,t){function n(i,r){return oS[r]||r}return e.replace(t,n)}function Wy(e,t){var n,i,r,o,a;switch(e.nodeType){case 3:t.push(ql(e.textContent,Sh));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',ql(o.value,rS),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,n=0,i=a.length;n<i;++n)Wy(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",ql(e.nodeValue,Sh),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function aS(e){for(var t=e.firstChild,n=[];t;)Wy(t,n),t=t.nextSibling;return n.join("")}function Ch(e,t){return aS(e)}function ct(e){var t=e.parentNode;return t&&t.removeChild(e),e}function sS(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function cS(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(sS(e,i))}function fa(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),cS(n,t)),n.consolidate()}function Tr(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function lS(e){return["M",e.x,e.y]}function Xl(e){return["L",e.x,e.y]}function uS(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function fS(e,t){const n=e.length,i=[lS(e[0])];for(let r=1;r<n;r++){const o=e[r-1],a=e[r],s=e[r+1];if(!s||!t){i.push(Xl(a));continue}const c=Math.min(t,Du(a.x-o.x,a.y-o.y),Du(s.x-a.x,s.y-a.y));if(!c){i.push(Xl(a));continue}const l=os(a,o,c),u=os(a,o,c*.5),f=os(a,s,c),p=os(a,s,c*.5);i.push(Xl(l)),i.push(uS(u,p,f))}return i}function os(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=Du(i,r),a=n/o;return{x:e.x+i*a,y:e.y+r*a}}function Du(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Lc(e,t,n){fe(t)&&(n=t,t=null),t||(t={});const i=ae("path",t);return fe(n)&&(i.dataset.cornerRadius=String(n)),Uy(i,e)}function Uy(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return te(e,{d:Tr(fS(t,n))}),e}var ku="hsl(225, 10%, 15%)",pS="white";function In(e,t){return zi(e.eventDefinitions,function(n){return n.$type===t})}function dS(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function hS(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function xe(e,t,n){var i=Ae(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||pS}function ne(e,t,n){var i=Ae(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||ku}function Ao(e,t,n,i){var r=Ae(e),o=r.get("label");return i||o&&o.get("color:color")||t||ne(e,n)}function mS(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Tr(r)}function gS(e,t){var n=e.x,i=e.y,r=e.width,o=e.height,a=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return Tr(a)}function vS(e){var t=e.width,n=e.height,i=e.x,r=e.y,o=t/2,a=n/2,s=[["M",i+o,r],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return Tr(s)}function yS(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return Tr(o)}function Mo(e,t={}){return{width:pn(e,t),height:Kt(e,t)}}function pn(e,t={}){return Vt(t,"width")?t.width:e.width}function Kt(e,t={}){return Vt(t,"height")?t.height:e.height}function _S(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const bS=Object.prototype.toString,xS=Object.prototype.hasOwnProperty;function ES(e){return e===void 0}function wS(e){return bS.call(e)==="[object Array]"}function SS(e,t){return xS.call(e,t)}function Rh(e,t){let n,i;if(ES(e))return;const r=wS(e)?RS:CS;for(let o in e)if(SS(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function CS(e){return e}function RS(e){return Number(e)}function Ct(e,...t){const n=e.style;return Rh(t,function(i){i&&Rh(i,function(r,o){n[o]=r})}),e}function kt(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const PS=Object.prototype.toString;function Ze(e){return new $i(e)}function $i(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}$i.prototype.add=function(e){return this.list.add(e),this};$i.prototype.remove=function(e){return PS.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};$i.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};$i.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};$i.prototype.array=function(){return Array.from(this.list)};$i.prototype.has=$i.prototype.contains=function(e){return this.list.contains(e)};function Bc(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Vi(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var oc={},ac,Ou,zf;function Gy(){ac=window.addEventListener?"addEventListener":"attachEvent",Ou=window.removeEventListener?"removeEventListener":"detachEvent",zf=ac!=="addEventListener"?"on":""}var TS=oc.bind=function(e,t,n,i){return ac||Gy(),e[ac](zf+t,n,i||!1),n},AS=oc.unbind=function(e,t,n,i){return Ou||Gy(),e[Ou](zf+t,n,i||!1),n},me=_S({__proto__:null,bind:TS,unbind:AS,default:oc},[oc]),Ky=["focus","blur"];function MS(e,t,n,i,r){return Ky.indexOf(n)!==-1&&(r=!0),me.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Vi(a,t,!0),o.delegateTarget&&i.call(e,o)},r)}function DS(e,t,n,i){return Ky.indexOf(t)!==-1&&(i=!0),me.unbind(e,t,n,i)}var Yt={bind:MS,unbind:DS},kS=OS,Yy=!1,as;typeof document<"u"&&(as=document.createElement("div"),as.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Yy=!as.getElementsByTagName("link").length,as=void 0);var st={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Yy?[1,"X<div>","</div>"]:[0,"",""]};st.td=st.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];st.option=st.optgroup=[1,'<select multiple="multiple">',"</select>"];st.thead=st.tbody=st.colgroup=st.caption=st.tfoot=[1,"<table>","</table>"];st.polyline=st.ellipse=st.polygon=st.circle=st.text=st.line=st.path=st.rect=st.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function OS(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Object.prototype.hasOwnProperty.call(st,i)?st[i]:st._default,o=r[0],a=r[1],s=r[2],c=t.createElement("div");for(c.innerHTML=a+e+s;o--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var l=t.createDocumentFragment();c.firstChild;)l.appendChild(c.removeChild(c.firstChild));return l}var He=kS;function $c(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function Ie(e,t){return t=t||document,t.querySelector(e)}function Iu(e,t){return t=t||document,t.querySelectorAll(e)}function Kn(e){e.parentNode&&e.parentNode.removeChild(e)}function Ls(e,t,n,i,r){var o=Zo();o.setTranslate(t,n);var a=Zo();a.setRotate(i||0,0,0);var s=Zo();s.setScale(1,1),fa(e,[o,a,s])}function yt(e,t,n){var i=Zo();i.setTranslate(t,n),fa(e,i)}function qy(e,t){var n=Zo();n.setRotate(t,0,0),fa(e,n)}function IS(e,t){return t={exports:{}},e(t,t.exports),t.exports}var NS=IS(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;for(var a=r-Math.floor(r),s="",o=0;o<Math.floor(r);o++){var c=Math.floor(Math.random()*i).toString(i);s=c+s}if(a){var l=Math.pow(i,a),c=Math.floor(Math.random()*l).toString(i);s=c+s}var u=parseInt(s,i);return u!==1/0&&u>=Math.pow(2,n)?t(n,i):s};t.rack=function(n,i,r){var o=function(s){var c=0;do{if(c++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var l=t(n,i)}while(Object.hasOwnProperty.call(a,l));return a[l]=s,l},a=o.hats={};return o.get=function(s){return o.hats[s]},o.set=function(s,c){return o.hats[s]=c,o},o.bits=n||128,o.base=i||16,o}});function Yn(e){if(!(this instanceof Yn))return new Yn(e);e=e||[128,36,1],this._seed=e.length?NS.rack(e[0],e[1],e[2]):e}Yn.prototype.next=function(e){return this._seed(e||!0)};Yn.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};Yn.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Yn.prototype.assigned=function(e){return this._seed.get(e)||!1};Yn.prototype.unclaim=function(e){delete this._seed.hats[e]};Yn.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var LS=new Yn,BS=10,ss=3,$S=1.5,Bs=10,jr=.95,jS=1,FS=.25;function Ar(e,t,n,i,r,o,a){ui.call(this,t,a);var s=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,l=e&&e.defaultLabelColor;function u(R){return n.computeStyle(R,{strokeLinecap:"round",strokeLinejoin:"round",stroke:ku,strokeWidth:2,fill:"white"})}function f(R){return n.computeStyle(R,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:ku,strokeWidth:2})}function p(R,g){var{ref:_={x:0,y:0},scale:M=1,element:k,parentGfx:W=r._svg}=g,ce=ae("marker",{id:R,viewBox:"0 0 20 20",refX:_.x,refY:_.y,markerWidth:20*M,markerHeight:20*M,orient:"auto"});de(ce,k);var w=Ie(":scope > defs",W);w||(w=ae("defs"),de(W,w)),de(w,ce)}function d(R,g,_,M){var k=LS.nextPrefixed("marker-");return h(R,k,g,_,M),"url(#"+k+")"}function h(R,g,_,M,k){if(_==="sequenceflow-end"){var W=ae("path",{d:"M 1 5 L 11 10 L 1 15 Z",...u({fill:k,stroke:k,strokeWidth:1})});p(g,{element:W,ref:{x:11,y:10},scale:.5,parentGfx:R})}if(_==="messageflow-start"){var ce=ae("circle",{cx:6,cy:6,r:3.5,...u({fill:M,stroke:k,strokeWidth:1,strokeDasharray:[1e4,1]})});p(g,{element:ce,ref:{x:6,y:6},parentGfx:R})}if(_==="messageflow-end"){var w=ae("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...u({fill:M,stroke:k,strokeWidth:1,strokeDasharray:[1e4,1]})});p(g,{element:w,ref:{x:8.5,y:5},parentGfx:R})}if(_==="association-start"){var P=ae("path",{d:"M 11 5 L 1 10 L 11 15",...f({fill:"none",stroke:k,strokeWidth:1.5,strokeDasharray:[1e4,1]})});p(g,{element:P,ref:{x:1,y:10},scale:.5,parentGfx:R})}if(_==="association-end"){var L=ae("path",{d:"M 1 5 L 11 10 L 1 15",...f({fill:"none",stroke:k,strokeWidth:1.5,strokeDasharray:[1e4,1]})});p(g,{element:L,ref:{x:11,y:10},scale:.5,parentGfx:R})}if(_==="conditional-flow-marker"){var U=ae("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...u({fill:M,stroke:k})});p(g,{element:U,ref:{x:-1,y:10},scale:.5,parentGfx:R})}if(_==="conditional-default-flow-marker"){var z=ae("path",{d:"M 6 4 L 10 16",...u({stroke:k,fill:"none"})});p(g,{element:z,ref:{x:0,y:10},scale:.5,parentGfx:R})}}function m(R,g,_,M,k={}){gt(M)&&(k=M,M=0),M=M||0,k=u(k);var W=g/2,ce=_/2,w=ae("circle",{cx:W,cy:ce,r:Math.round((g+_)/4-M),...k});return de(R,w),w}function v(R,g,_,M,k,W){gt(k)&&(W=k,k=0),k=k||0,W=u(W);var ce=ae("rect",{x:k,y:k,width:g-k*2,height:_-k*2,rx:M,ry:M,...W});return de(R,ce),ce}function E(R,g,_,M){var k=g/2,W=_/2,ce=[{x:k,y:0},{x:g,y:W},{x:k,y:_},{x:0,y:W}],w=ce.map(function(L){return L.x+","+L.y}).join(" ");M=u(M);var P=ae("polygon",{...M,points:w});return de(R,P),P}function C(R,g,_,M){_=f(_);var k=Lc(g,_,M);return de(R,k),k}function x(R,g,_){return C(R,g,_,5)}function y(R,g,_){_=f(_);var M=ae("path",{..._,d:g});return de(R,M),M}function S(R,g,_,M){return y(g,_,O({"data-marker":R},M))}function T(R){return ke[R]}function I(R){return function(g,_,M){return T(R)(g,_,M)}}var D={"bpmn:MessageEventDefinition":function(R,g,_={},M){var k=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:g.width,containerHeight:g.height,position:{mx:.235,my:.315}}),W=M?ne(g,c,_.stroke):xe(g,s,_.fill),ce=M?xe(g,s,_.fill):ne(g,c,_.stroke),w=y(R,k,{fill:W,stroke:ce,strokeWidth:1});return w},"bpmn:TimerEventDefinition":function(R,g,_={}){var M=m(R,g.width,g.height,.2*g.height,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:2}),k=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.5}});y(R,k,{stroke:ne(g,c,_.stroke),strokeWidth:2});for(var W=0;W<12;W++){var ce=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.5}}),w=g.width/2,P=g.height/2;y(R,ce,{strokeWidth:1,stroke:ne(g,c,_.stroke),transform:"rotate("+W*30+","+P+","+w+")"})}return M},"bpmn:EscalationEventDefinition":function(R,g,_={},M){var k=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.2}}),W=M?ne(g,c,_.stroke):xe(g,s,_.fill);return y(R,k,{fill:W,stroke:ne(g,c,_.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(R,g,_={}){var M=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.222}});return y(R,M,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(R,g,_={},M){var k=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.57,my:.263}}),W=M?ne(g,c,_.stroke):xe(g,s,_.fill);return y(R,k,{fill:W,stroke:ne(g,c,_.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(R,g,_={},M){var k=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:g.width,containerHeight:g.height,position:{mx:.2,my:.722}}),W=M?ne(g,c,_.stroke):xe(g,s,_.fill);return y(R,k,{fill:W,stroke:ne(g,c,_.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(R,g,_={},M){var k=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.638,my:-.055}}),W=M?ne(g,c,_.stroke):"none",ce=y(R,k,{fill:W,stroke:ne(g,c,_.stroke),strokeWidth:1});return qy(ce,45),ce},"bpmn:CompensateEventDefinition":function(R,g,_={},M){var k=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.22,my:.5}}),W=M?ne(g,c,_.stroke):xe(g,s,_.fill);return y(R,k,{fill:W,stroke:ne(g,c,_.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(R,g,_={},M){var k=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.2}}),W=M?ne(g,c,_.stroke):xe(g,s,_.fill);return y(R,k,{strokeWidth:1,fill:W,stroke:ne(g,c,_.stroke)})},"bpmn:MultipleEventDefinition":function(R,g,_={},M){var k=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:g.width,containerHeight:g.height,position:{mx:.222,my:.36}}),W=M?ne(g,c,_.stroke):xe(g,s,_.fill);return y(R,k,{fill:W,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(R,g,_={}){var M=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:g.width,containerHeight:g.height,position:{mx:.458,my:.194}});return y(R,M,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(R,g,_={}){var M=m(R,g.width,g.height,8,{fill:ne(g,c,_.stroke),stroke:ne(g,c,_.stroke),strokeWidth:4});return M}};function B(R,g,_={}){var M=X(R),k=dS(M);return M.get("eventDefinitions")&&M.get("eventDefinitions").length>1?M.get("parallelMultiple")?D["bpmn:ParallelMultipleEventDefinition"](g,R,_,k):D["bpmn:MultipleEventDefinition"](g,R,_,k):In(M,"bpmn:MessageEventDefinition")?D["bpmn:MessageEventDefinition"](g,R,_,k):In(M,"bpmn:TimerEventDefinition")?D["bpmn:TimerEventDefinition"](g,R,_,k):In(M,"bpmn:ConditionalEventDefinition")?D["bpmn:ConditionalEventDefinition"](g,R,_,k):In(M,"bpmn:SignalEventDefinition")?D["bpmn:SignalEventDefinition"](g,R,_,k):In(M,"bpmn:EscalationEventDefinition")?D["bpmn:EscalationEventDefinition"](g,R,_,k):In(M,"bpmn:LinkEventDefinition")?D["bpmn:LinkEventDefinition"](g,R,_,k):In(M,"bpmn:ErrorEventDefinition")?D["bpmn:ErrorEventDefinition"](g,R,_,k):In(M,"bpmn:CancelEventDefinition")?D["bpmn:CancelEventDefinition"](g,R,_,k):In(M,"bpmn:CompensateEventDefinition")?D["bpmn:CompensateEventDefinition"](g,R,_,k):In(M,"bpmn:TerminateEventDefinition")?D["bpmn:TerminateEventDefinition"](g,R,_,k):null}var N={ParticipantMultiplicityMarker:function(R,g,_={}){var M=pn(g,_),k=Kt(g,_),W=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:M,containerHeight:k,position:{mx:(M/2-6)/M,my:(k-15)/k}});S("participant-multiplicity",R,W,{strokeWidth:2,fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke)})},SubProcessMarker:function(R,g,_={}){var M=v(R,14,14,0,{strokeWidth:1,fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke)});yt(M,g.width/2-7.5,g.height-20);var k=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2-7.5)/g.width,my:(g.height-20)/g.height}});S("sub-process",R,k,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke)})},ParallelMarker:function(R,g,_){var M=pn(g,_),k=Kt(g,_),W=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:M,containerHeight:k,position:{mx:(M/2+_.parallel)/M,my:(k-20)/k}});S("parallel",R,W,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke)})},SequentialMarker:function(R,g,_){var M=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+_.seq)/g.width,my:(g.height-19)/g.height}});S("sequential",R,M,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke)})},CompensationMarker:function(R,g,_){var M=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+_.compensation)/g.width,my:(g.height-13)/g.height}});S("compensation",R,M,{strokeWidth:1,fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke)})},LoopMarker:function(R,g,_){var M=pn(g,_),k=Kt(g,_),W=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:M,containerHeight:k,position:{mx:(M/2+_.loop)/M,my:(k-7)/k}});S("loop",R,W,{strokeWidth:1.5,fill:"none",stroke:ne(g,c,_.stroke),strokeMiterlimit:.5})},AdhocMarker:function(R,g,_){var M=pn(g,_),k=Kt(g,_),W=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:M,containerHeight:k,position:{mx:(M/2+_.adhoc)/M,my:(k-15)/k}});S("adhoc",R,W,{strokeWidth:1,fill:ne(g,c,_.stroke),stroke:ne(g,c,_.stroke)})}};function j(R,g,_,M){N[R](g,_,M)}function Y(R,g,_,M={}){M={fill:M.fill,stroke:M.stroke,width:pn(g,M),height:Kt(g,M)};var k=X(g),W=_&&_.includes("SubProcessMarker");W?M={...M,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:M={...M,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},A(_,function(P){j(P,R,g,M)}),k.get("isForCompensation")&&j("CompensationMarker",R,g,M),b(k,"bpmn:AdHocSubProcess")&&j("AdhocMarker",R,g,M);var ce=k.get("loopCharacteristics"),w=ce&&ce.get("isSequential");ce&&(w===void 0&&j("LoopMarker",R,g,M),w===!1&&j("ParallelMarker",R,g,M),w===!0&&j("SequentialMarker",R,g,M))}function Z(R,g,_={}){_=O({size:{width:100}},_);var M=o.createText(g||"",_);return Te(M).add("djs-label"),de(R,M),M}function ue(R,g,_,M={}){var k=X(g),W=Mo({x:g.x,y:g.y,width:g.width,height:g.height},M);return Z(R,k.name,{align:_,box:W,padding:7,style:{fill:Ao(g,l,c,M.stroke)}})}function Et(R,g,_={}){var M={width:90,height:30,x:g.width/2+g.x,y:g.height/2+g.y};return Z(R,an(g),{box:M,fitBox:!0,style:O({},o.getExternalStyle(),{fill:Ao(g,l,c,_.stroke)})})}function ve(R,g,_,M={}){var k=dt(_),W=Z(R,g,{box:{height:30,width:k?Kt(_,M):pn(_,M)},align:"center-middle",style:{fill:Ao(_,l,c,M.stroke)}});if(k){var ce=-1*Kt(_,M);Ls(W,0,-ce,270)}}function oe(R,g,_={}){var{width:M,height:k}=Mo(g,_);return v(R,M,k,Bs,{..._,fill:xe(g,s,_.fill),fillOpacity:jr,stroke:ne(g,c,_.stroke)})}function Se(R,g,_={}){var M=X(g),k=xe(g,s,_.fill),W=ne(g,c,_.stroke);return(M.get("associationDirection")==="One"||M.get("associationDirection")==="Both")&&(_.markerEnd=d(R,"association-end",k,W)),M.get("associationDirection")==="Both"&&(_.markerStart=d(R,"association-start",k,W)),_=Re(_,["markerStart","markerEnd"]),x(R,g.waypoints,{..._,stroke:W,strokeDasharray:"0, 5"})}function Qe(R,g,_={}){var M=xe(g,s,_.fill),k=ne(g,c,_.stroke),W=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.474,my:.296}}),ce=y(R,W,{fill:M,fillOpacity:jr,stroke:k}),w=X(g);if(hS(w)){var P=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.33,my:(g.height-18)/g.height}});y(R,P,{strokeWidth:2,fill:M,stroke:k})}return ce}function Le(R,g,_={}){return m(R,g.width,g.height,{fillOpacity:jr,..._,fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke)})}function ze(R,g,_={}){return E(R,g.width,g.height,{fill:xe(g,s,_.fill),fillOpacity:jr,stroke:ne(g,c,_.stroke)})}function H(R,g,_={}){var M=v(R,pn(g,_),Kt(g,_),0,{fill:xe(g,s,_.fill),fillOpacity:_.fillOpacity||jr,stroke:ne(g,c,_.stroke),strokeWidth:1.5}),k=X(g);if(b(k,"bpmn:Lane")){var W=k.get("name");ve(R,W,g,_)}return M}function K(R,g,_={}){var M=oe(R,g,_);Pt(g)&&te(M,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var k=we(g);return ue(R,g,k?"center-top":"center-middle",_),k?Y(R,g,void 0,_):Y(R,g,["SubProcessMarker"],_),M}function re(R,g,_={}){var M=oe(R,g,_);return ue(R,g,"center-middle",_),Y(R,g,void 0,_),M}var ke=this.handlers={"bpmn:AdHocSubProcess":function(R,g,_={}){return we(g)?_=Re(_,["fill","stroke","width","height"]):_=Re(_,["fill","stroke"]),K(R,g,_)},"bpmn:Association":function(R,g,_={}){return _=Re(_,["fill","stroke"]),Se(R,g,_)},"bpmn:BoundaryEvent":function(R,g,_={}){var{renderIcon:M=!0}=_;_=Re(_,["fill","stroke"]);var k=X(g),W=k.get("cancelActivity");_={strokeWidth:1.5,fill:xe(g,s,_.fill),fillOpacity:jS,stroke:ne(g,c,_.stroke)},W||(_.strokeDasharray="6");var ce=Le(R,g,_);return m(R,g.width,g.height,ss,{..._,fill:"none"}),M&&B(g,R,_),ce},"bpmn:BusinessRuleTask":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=re(R,g,_),k=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),W=y(R,k);te(W,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1});var ce=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),w=y(R,ce);return te(w,{fill:ne(g,c,_.stroke),stroke:ne(g,c,_.stroke),strokeWidth:1}),M},"bpmn:CallActivity":function(R,g,_={}){return _=Re(_,["fill","stroke"]),K(R,g,{strokeWidth:5,..._})},"bpmn:ComplexGateway":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=ze(R,g,_),k=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:g.width,containerHeight:g.height,position:{mx:.46,my:.26}});return y(R,k,{fill:ne(g,c,_.stroke),stroke:ne(g,c,_.stroke),strokeWidth:1}),M},"bpmn:DataInput":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=i.getRawPath("DATA_ARROW"),k=Qe(R,g,_);return y(R,M,{fill:"none",stroke:ne(g,c,_.stroke),strokeWidth:1}),k},"bpmn:DataInputAssociation":function(R,g,_={}){return _=Re(_,["fill","stroke"]),Se(R,g,{..._,markerEnd:d(R,"association-end",xe(g,s,_.fill),ne(g,c,_.stroke))})},"bpmn:DataObject":function(R,g,_={}){return _=Re(_,["fill","stroke"]),Qe(R,g,_)},"bpmn:DataObjectReference":I("bpmn:DataObject"),"bpmn:DataOutput":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=i.getRawPath("DATA_ARROW"),k=Qe(R,g,_);return y(R,M,{strokeWidth:1,fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke)}),k},"bpmn:DataOutputAssociation":function(R,g,_={}){return _=Re(_,["fill","stroke"]),Se(R,g,{..._,markerEnd:d(R,"association-end",xe(g,s,_.fill),ne(g,c,_.stroke))})},"bpmn:DataStoreReference":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:0,my:.133}});return y(R,M,{fill:xe(g,s,_.fill),fillOpacity:jr,stroke:ne(g,c,_.stroke),strokeWidth:2})},"bpmn:EndEvent":function(R,g,_={}){var{renderIcon:M=!0}=_;_=Re(_,["fill","stroke"]);var k=Le(R,g,{..._,strokeWidth:4});return M&&B(g,R,_),k},"bpmn:EventBasedGateway":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=X(g),k=ze(R,g,_);m(R,g.width,g.height,g.height*.2,{fill:xe(g,"none",_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1});var W=M.get("eventGatewayType"),ce=!!M.get("instantiate");function w(){var L=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:g.width,containerHeight:g.height,position:{mx:.36,my:.44}});y(R,L,{fill:"none",stroke:ne(g,c,_.stroke),strokeWidth:2})}if(W==="Parallel"){var P=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:g.width,containerHeight:g.height,position:{mx:.474,my:.296}});y(R,P,{fill:"none",stroke:ne(g,c,_.stroke),strokeWidth:1})}else W==="Exclusive"&&(ce||m(R,g.width,g.height,g.height*.26,{fill:"none",stroke:ne(g,c,_.stroke),strokeWidth:1}),w());return k},"bpmn:ExclusiveGateway":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=ze(R,g,_),k=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:g.width,containerHeight:g.height,position:{mx:.32,my:.3}}),W=Ae(g);return W.get("isMarkerVisible")&&y(R,k,{fill:ne(g,c,_.stroke),stroke:ne(g,c,_.stroke),strokeWidth:1}),M},"bpmn:Gateway":function(R,g,_={}){return _=Re(_,["fill","stroke"]),ze(R,g,_)},"bpmn:Group":function(R,g,_={}){return _=Re(_,["fill","stroke","width","height"]),v(R,g.width,g.height,Bs,{stroke:ne(g,c,_.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:pn(g,_),height:Kt(g,_)})},"bpmn:InclusiveGateway":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=ze(R,g,_);return m(R,g.width,g.height,g.height*.24,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:2.5}),M},"bpmn:IntermediateEvent":function(R,g,_={}){var{renderIcon:M=!0}=_;_=Re(_,["fill","stroke"]);var k=Le(R,g,{..._,strokeWidth:1.5});return m(R,g.width,g.height,ss,{fill:"none",stroke:ne(g,c,_.stroke),strokeWidth:1.5}),M&&B(g,R,_),k},"bpmn:IntermediateCatchEvent":I("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":I("bpmn:IntermediateEvent"),"bpmn:Lane":function(R,g,_={}){return _=Re(_,["fill","stroke","width","height"]),H(R,g,{..._,fillOpacity:FS})},"bpmn:ManualTask":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=re(R,g,_),k=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return y(R,k,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:.5}),M},"bpmn:MessageFlow":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=X(g),k=Ae(g),W=xe(g,s,_.fill),ce=ne(g,c,_.stroke),w=x(R,g.waypoints,{markerEnd:d(R,"messageflow-end",W,ce),markerStart:d(R,"messageflow-start",W,ce),stroke:ce,strokeDasharray:"10, 11",strokeWidth:1.5});if(M.get("messageRef")){var P=w.getPointAtLength(w.getTotalLength()/2),L=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:P.x,y:P.y}}),U={strokeWidth:1};k.get("messageVisibleKind")==="initiating"?(U.fill=W,U.stroke=ce):(U.fill=ce,U.stroke=W);var z=y(R,L,U),F=M.get("messageRef"),ee=F.get("name"),V=Z(R,ee,{align:"center-top",fitBox:!0,style:{fill:ce}}),J=z.getBBox(),q=V.getBBox(),se=P.x-q.width/2,$=P.y+J.height/2+BS;Ls(V,se,$,0)}return w},"bpmn:ParallelGateway":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=ze(R,g,_),k=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:g.width,containerHeight:g.height,position:{mx:.46,my:.2}});return y(R,k,{fill:ne(g,c,_.stroke),stroke:ne(g,c,_.stroke),strokeWidth:1}),M},"bpmn:Participant":function(R,g,_={}){_=Re(_,["fill","stroke","width","height"]);var M=H(R,g,_),k=we(g),W=dt(g),ce=X(g),w=ce.get("name");if(k){var P=W?[{x:30,y:0},{x:30,y:Kt(g,_)}]:[{x:0,y:30},{x:pn(g,_),y:30}];C(R,P,{stroke:ne(g,c,_.stroke),strokeWidth:$S}),ve(R,w,g,_)}else{var L=Mo(g,_);W||(L.height=pn(g,_),L.width=Kt(g,_));var U=Z(R,w,{box:L,align:"center-middle",style:{fill:Ao(g,l,c,_.stroke)}});if(!W){var z=-1*Kt(g,_);Ls(U,0,-z,270)}}return ce.get("participantMultiplicity")&&j("ParticipantMultiplicityMarker",R,g,_),M},"bpmn:ReceiveTask":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=X(g),k=re(R,g,_),W;return M.get("instantiate")?(m(R,28,28,20*.22,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1}),W=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):W=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),y(R,W,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1}),k},"bpmn:ScriptTask":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=re(R,g,_),k=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return y(R,k,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1}),M},"bpmn:SendTask":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=re(R,g,_),k=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return y(R,k,{fill:ne(g,c,_.stroke),stroke:xe(g,s,_.fill),strokeWidth:1}),M},"bpmn:SequenceFlow":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=xe(g,s,_.fill),k=ne(g,c,_.stroke),W=x(R,g.waypoints,{markerEnd:d(R,"sequenceflow-end",M,k),stroke:k}),ce=X(g),{source:w}=g;if(w){var P=X(w);ce.get("conditionExpression")&&b(P,"bpmn:Activity")&&te(W,{markerStart:d(R,"conditional-flow-marker",M,k)}),P.get("default")&&(b(P,"bpmn:Gateway")||b(P,"bpmn:Activity"))&&P.get("default")===ce&&te(W,{markerStart:d(R,"conditional-default-flow-marker",M,k)})}return W},"bpmn:ServiceTask":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=re(R,g,_);m(R,10,10,{fill:xe(g,s,_.fill),stroke:"none",transform:"translate(6, 6)"});var k=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});y(R,k,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1}),m(R,10,10,{fill:xe(g,s,_.fill),stroke:"none",transform:"translate(11, 10)"});var W=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return y(R,W,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:1}),M},"bpmn:StartEvent":function(R,g,_={}){var{renderIcon:M=!0}=_;_=Re(_,["fill","stroke"]);var k=X(g);k.get("isInterrupting")||(_={..._,strokeDasharray:"6"});var W=Le(R,g,_);return M&&B(g,R,_),W},"bpmn:SubProcess":function(R,g,_={}){return we(g)?_=Re(_,["fill","stroke","width","height"]):_=Re(_,["fill","stroke"]),K(R,g,_)},"bpmn:Task":function(R,g,_={}){return _=Re(_,["fill","stroke"]),re(R,g,_)},"bpmn:TextAnnotation":function(R,g,_={}){_=Re(_,["fill","stroke","width","height"]);var{width:M,height:k}=Mo(g,_),W=v(R,M,k,0,0,{fill:"none",stroke:"none"}),ce=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:M,containerHeight:k,position:{mx:0,my:0}});y(R,ce,{stroke:ne(g,c,_.stroke)});var w=X(g),P=w.get("text")||"";return Z(R,P,{align:"left-top",box:Mo(g,_),padding:7,style:{fill:Ao(g,l,c,_.stroke)}}),W},"bpmn:Transaction":function(R,g,_={}){we(g)?_=Re(_,["fill","stroke","width","height"]):_=Re(_,["fill","stroke"]);var M=K(R,g,{strokeWidth:1.5,..._}),k=n.style(["no-fill","no-events"],{stroke:ne(g,c,_.stroke),strokeWidth:1.5}),W=we(g);return W||(_={}),v(R,pn(g,_),Kt(g,_),Bs-ss,ss,k),M},"bpmn:UserTask":function(R,g,_={}){_=Re(_,["fill","stroke"]);var M=re(R,g,_),k=15,W=12,ce=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:k,y:W}});y(R,ce,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:.5});var w=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:k,y:W}});y(R,w,{fill:xe(g,s,_.fill),stroke:ne(g,c,_.stroke),strokeWidth:.5});var P=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:k,y:W}});return y(R,P,{fill:ne(g,c,_.stroke),stroke:ne(g,c,_.stroke),strokeWidth:.5}),M},label:function(R,g,_={}){return Et(R,g,_)}};this._drawPath=y,this._renderer=T}ie(Ar,ui);Ar.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Ar.prototype.canRender=function(e){return b(e,"bpmn:BaseElement")};Ar.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Ar.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Ar.prototype.getShapePath=function(e){return b(e,"bpmn:Event")?mS(e):b(e,"bpmn:Activity")?gS(e,Bs):b(e,"bpmn:Gateway")?vS(e):yS(e)};function Re(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var HS=0,zS={width:150,height:50};function VS(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function WS(e){return gt(e)?O({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function US(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch{return{width:0,height:0}}}function GS(e,t,n){for(var i=e.shift(),r=i,o;;){if(o=US(r,n),o.width=r?o.width:0,r===" "||r===""||o.width<Math.round(t)||r.length<2)return KS(e,r,i,o);r=qS(r,o.width,t)}}function KS(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var Ph="­";function YS(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],o=0;if(n.length>1)for(;i=n.shift();)if(i.length+o<t)r.push(i),o+=i.length;else{(i==="-"||i===Ph)&&r.pop();break}var a=r[r.length-1];return a&&a===Ph&&(r[r.length-1]="-"),r.join("")}function qS(e,t,n){var i=Math.max(e.length*(n/t),1),r=YS(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function XS(){var e=document.getElementById("helper-svg");return e||(e=ae("svg"),te(e,{id:"helper-svg"}),Ct(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function jc(e){this._config=O({},{size:zS,padding:HS,style:{},align:"center-top"},e||{})}jc.prototype.createText=function(e,t){return this.layoutText(e,t).element};jc.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};jc.prototype.layoutText=function(e,t){var n=O({},this._config.size,t.box),i=O({},this._config.style,t.style),r=VS(t.align||this._config.align),o=WS(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=ZS(i),c=e.split(/\u00AD?\r?\n/),l=[],u=n.width-o.left-o.right,f=ae("text");te(f,{x:0,y:0}),te(f,i);var p=XS();for(de(p,f);c.length;)l.push(GS(c,u,f));r.vertical==="middle"&&(o.top=o.bottom=0);var d=Xt(l,function(C,x,y){return C+(s||x.height)},0)+o.top+o.bottom,h=Xt(l,function(C,x,y){return x.width>C?x.width:C},0),m=o.top;r.vertical==="middle"&&(m+=(n.height-d)/2),m-=(s||l[0].height)/4;var v=ae("text");te(v,i),A(l,function(C){var x;switch(m+=s||C.height,r.horizontal){case"left":x=o.left;break;case"right":x=(a?h:u)-o.right-C.width;break;default:x=Math.max(((a?h:u)-C.width)/2+o.left,0)}var y=ae("tspan");te(y,{x,y:m}),y.textContent=C.text,de(v,y)}),ct(f);var E={width:h,height:d};return{dimensions:E,element:v}};function ZS(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var JS=12,QS=1.2,eC=30;function Xy(e){var t=O({fontFamily:"Arial, sans-serif",fontSize:JS,fontWeight:"normal",lineHeight:QS},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=O({},t,{fontSize:n},e&&e.externalStyle||{}),r=new jc({style:t});this.getExternalLabelBounds=function(o,a){var s=r.getDimensions(a,{box:{width:90,height:30},style:i});return{x:Math.round(o.x+o.width/2-s.width/2),y:Math.round(o.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(o,a){var s=r.getDimensions(a,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(eC,Math.round(s.height))}},this.createText=function(o,a){return r.createText(o,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Xy.$inject=["config.textRenderer"];function tC(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,o;n.abspos?(r=n.abspos.x,o=n.abspos.y):(r=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var a={};if(n.position){for(var s=n.containerHeight/i.height*n.yScaleFactor,c=n.containerWidth/i.width*n.xScaleFactor,l=0;l<i.heightElements.length;l++)a["y"+l]=i.heightElements[l]*s;for(var u=0;u<i.widthElements.length;u++)a["x"+u]=i.widthElements[u]*c}var f=oC(i.d,{mx:r,my:o,e:a});return f}}var nC=/\{([^{}]+)\}/g,iC=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function rC(e,t,n){var i=n;return t.replace(iC,function(r,o,a,s,c){o=o||s,i&&(o in i&&(i=i[o]),typeof i=="function"&&c&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function oC(e,t){return String(e).replace(nC,function(n,i){return rC(n,i,t)})}const aC={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ar],textRenderer:["type",Xy],pathMap:["type",tC]};function sC(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Fc={translate:["value",sC]};function wa(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Vf(e,t,n,i){if(typeof i>"u"&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=wa(e,t);return Math.abs(r/o)<=i}var cC=2;function ri(e,t){var n=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[r,o]of Object.entries(i))if(lC(r,n))return o;return!1}function lC(e,t){const n=t[0];return Pr(t,function(i){return Math.abs(n[e]-i[e])<=cC})}function Th(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function Nu(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var uC=/,?([a-z]),?/gi,Ah=parseFloat,et=Math,bi=et.PI,Ln=et.min,Bn=et.max,Mh=et.pow,Di=et.abs,fC=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,pC=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,sc=Array.isArray||function(e){return e instanceof Array};function Wf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Jo(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)Wf(e,n)&&(t[n]=Jo(e[n]));return t}function dC(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function hC(e){function t(){var n=Array.prototype.slice.call(arguments,0),i=n.join("␀"),r=t.cache=t.cache||{},o=t.count=t.count||[];return Wf(r,i)?(dC(o,i),r[i]):(o.length>=1e3&&delete r[o.shift()],o.push(i),r[i]=e(...arguments),r[i])}return t}function mC(e){if(!e)return null;var t=Jr(e);if(t.arr)return Jo(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return sc(e)&&sc(e[0])&&(i=Jo(e)),i.length||String(e).replace(fC,function(r,o,a){var s=[],c=o.toLowerCase();for(a.replace(pC,function(l,u){u&&s.push(+u)}),c=="m"&&s.length>2&&(i.push([o,...s.splice(0,2)]),c="l",o=o=="m"?"l":"L");s.length>=n[c]&&(i.push([o,...s.splice(0,n[c])]),!!n[c]););}),i.toString=Jr.toString,t.arr=Jo(i),i}function Jr(e){var t=Jr.ps=Jr.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)Wf(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function Lu(e,t,n,i){return arguments.length===1&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function Zy(){return this.join(",").replace(uC,"$1")}function cc(e){var t=Jo(e);return t.toString=Zy,t}function Dh(e,t,n,i,r,o,a,s,c){var l=1-c,u=Mh(l,3),f=Mh(l,2),p=c*c,d=p*c,h=u*e+f*3*c*n+l*3*c*c*r+d*a,m=u*t+f*3*c*i+l*3*c*c*o+d*s;return{x:lc(h),y:lc(m)}}function kh(e){var t=bC(...e);return Lu(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function xi(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function gC(e,t){return e=Lu(e),t=Lu(t),xi(t,e.x,e.y)||xi(t,e.x2,e.y)||xi(t,e.x,e.y2)||xi(t,e.x2,e.y2)||xi(e,t.x,t.y)||xi(e,t.x2,t.y)||xi(e,t.x,t.y2)||xi(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function Oh(e,t,n,i,r){var o=-3*t+9*n-9*i+3*r,a=e*o+6*t-12*n+6*i;return e*a-3*t+3*n}function Ih(e,t,n,i,r,o,a,s,c){c==null&&(c=1),c=c>1?1:c<0?0:c;for(var l=c/2,u=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,h=0;h<u;h++){var m=l*f[h]+l,v=Oh(m,e,n,r,a),E=Oh(m,t,i,o,s),C=v*v+E*E;d+=p[h]*et.sqrt(C)}return l*d}function vC(e,t,n,i,r,o,a,s){if(!(Bn(e,n)<Ln(r,a)||Ln(e,n)>Bn(r,a)||Bn(t,i)<Ln(o,s)||Ln(t,i)>Bn(o,s))){var c=(e*i-t*n)*(r-a)-(e-n)*(r*s-o*a),l=(e*i-t*n)*(o-s)-(t-i)*(r*s-o*a),u=(e-n)*(o-s)-(t-i)*(r-a);if(u){var f=lc(c/u),p=lc(l/u),d=+f.toFixed(2),h=+p.toFixed(2);if(!(d<+Ln(e,n).toFixed(2)||d>+Bn(e,n).toFixed(2)||d<+Ln(r,a).toFixed(2)||d>+Bn(r,a).toFixed(2)||h<+Ln(t,i).toFixed(2)||h>+Bn(t,i).toFixed(2)||h<+Ln(o,s).toFixed(2)||h>+Bn(o,s).toFixed(2)))return{x:f,y:p}}}}function lc(e){return Math.round(e*1e11)/1e11}function yC(e,t,n){var i=kh(e),r=kh(t);if(!gC(i,r))return n?0:[];for(var o=Ih(...e),a=Ih(...t),s=Nh(e)?1:~~(o/5)||1,c=Nh(t)?1:~~(a/5)||1,l=[],u=[],f={},p=n?0:[],d=0;d<s+1;d++){var h=Dh(...e,d/s);l.push({x:h.x,y:h.y,t:d/s})}for(d=0;d<c+1;d++)h=Dh(...t,d/c),u.push({x:h.x,y:h.y,t:d/c});for(d=0;d<s;d++)for(var m=0;m<c;m++){var v=l[d],E=l[d+1],C=u[m],x=u[m+1],y=Di(E.x-v.x)<.01?"y":"x",S=Di(x.x-C.x)<.01?"y":"x",T=vC(v.x,v.y,E.x,E.y,C.x,C.y,x.x,x.y),I;if(T){if(I=T.x.toFixed(9)+"#"+T.y.toFixed(9),f[I])continue;f[I]=!0;var D=v.t+Di((T[y]-v[y])/(E[y]-v[y]))*(E.t-v.t),B=C.t+Di((T[S]-C[S])/(x[S]-C[S]))*(x.t-C.t);D>=0&&D<=1&&B>=0&&B<=1&&(n?p++:p.push({x:T.x,y:T.y,t1:D,t2:B}))}}return p}function Jy(e,t,n){e=Bh(e),t=Bh(t);for(var i,r,o,a,s,c,l,u,f,p,d=n?0:[],h=0,m=e.length;h<m;h++){var v=e[h];if(v[0]=="M")i=s=v[1],r=c=v[2];else{v[0]=="C"?(f=[i,r,...v.slice(1)],i=f[6],r=f[7]):(f=[i,r,i,r,s,c,s,c],i=s,r=c);for(var E=0,C=t.length;E<C;E++){var x=t[E];if(x[0]=="M")o=l=x[1],a=u=x[2];else{x[0]=="C"?(p=[o,a,...x.slice(1)],o=p[6],a=p[7]):(p=[o,a,o,a,l,u,l,u],o=l,a=u);var y=yC(f,p,n);if(n)d+=y;else{for(var S=0,T=y.length;S<T;S++)y[S].segment1=h,y[S].segment2=E,y[S].bez1=f,y[S].bez2=p;d=d.concat(y)}}}}}return d}function _C(e){var t=Jr(e);if(t.abs)return cc(t.abs);if((!sc(e)||!sc(e&&e[0]))&&(e=mC(e)),!e||!e.length)return[["M",0,0]];var n=[],i=0,r=0,o=0,a=0,s=0,c;e[0][0]=="M"&&(i=+e[0][1],r=+e[0][2],o=i,a=r,s++,n[0]=["M",i,r]);for(var l,u,f=s,p=e.length;f<p;f++){if(n.push(l=[]),u=e[f],c=u[0],c!=c.toUpperCase())switch(l[0]=c.toUpperCase(),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+u[6]+i,l[7]=+u[7]+r;break;case"V":l[1]=+u[1]+r;break;case"H":l[1]=+u[1]+i;break;case"M":o=+u[1]+i,a=+u[2]+r;default:for(var d=1,h=u.length;d<h;d++)l[d]=+u[d]+(d%2?i:r)}else for(var m=0,v=u.length;m<v;m++)l[m]=u[m];switch(c=c.toUpperCase(),l[0]){case"Z":i=+o,r=+a;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":o=l[l.length-2],a=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n.toString=Zy,t.abs=cc(n),n}function Nh(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function cs(e,t,n,i){return[e,t,n,i,n,i]}function Lh(e,t,n,i,r,o){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*i,a*r+s*n,a*o+s*i,r,o]}function Qy(e,t,n,i,r,o,a,s,c,l){var u=bi*120/180,f=bi/180*(+r||0),p=[],d,h=hC(function(g,_,M){var k=g*et.cos(M)-_*et.sin(M),W=g*et.sin(M)+_*et.cos(M);return{x:k,y:W}});if(l)I=l[0],D=l[1],S=l[2],T=l[3];else{d=h(e,t,-f),e=d.x,t=d.y,d=h(s,c,-f),s=d.x,c=d.y;var m=(e-s)/2,v=(t-c)/2,E=m*m/(n*n)+v*v/(i*i);E>1&&(E=et.sqrt(E),n=E*n,i=E*i);var C=n*n,x=i*i,y=(o==a?-1:1)*et.sqrt(Di((C*x-C*v*v-x*m*m)/(C*v*v+x*m*m))),S=y*n*v/i+(e+s)/2,T=y*-i*m/n+(t+c)/2,I=et.asin(((t-T)/i).toFixed(9)),D=et.asin(((c-T)/i).toFixed(9));I=e<S?bi-I:I,D=s<S?bi-D:D,I<0&&(I=bi*2+I),D<0&&(D=bi*2+D),a&&I>D&&(I=I-bi*2),!a&&D>I&&(D=D-bi*2)}var B=D-I;if(Di(B)>u){var N=D,j=s,Y=c;D=I+u*(a&&D>I?1:-1),s=S+n*et.cos(D),c=T+i*et.sin(D),p=Qy(s,c,n,i,r,0,a,j,Y,[D,N,S,T])}B=D-I;var Z=et.cos(I),ue=et.sin(I),Et=et.cos(D),ve=et.sin(D),oe=et.tan(B/4),Se=4/3*n*oe,Qe=4/3*i*oe,Le=[e,t],ze=[e+Se*ue,t-Qe*Z],H=[s+Se*ve,c-Qe*Et],K=[s,c];if(ze[0]=2*Le[0]-ze[0],ze[1]=2*Le[1]-ze[1],l)return[ze,H,K].concat(p);p=[ze,H,K].concat(p).join().split(",");for(var re=[],ke=0,R=p.length;ke<R;ke++)re[ke]=ke%2?h(p[ke-1],p[ke],f).y:h(p[ke],p[ke+1],f).x;return re}function bC(e,t,n,i,r,o,a,s){for(var c=[],l=[[],[]],u,f,p,d,h,m,v,E,C=0;C<2;++C){if(C==0?(f=6*e-12*n+6*r,u=-3*e+9*n-9*r+3*a,p=3*n-3*e):(f=6*t-12*i+6*o,u=-3*t+9*i-9*o+3*s,p=3*i-3*t),Di(u)<1e-12){if(Di(f)<1e-12)continue;d=-p/f,0<d&&d<1&&c.push(d);continue}v=f*f-4*p*u,E=et.sqrt(v),!(v<0)&&(h=(-f+E)/(2*u),0<h&&h<1&&c.push(h),m=(-f-E)/(2*u),0<m&&m<1&&c.push(m))}for(var x=c.length,y=x,S;x--;)d=c[x],S=1-d,l[0][x]=S*S*S*e+3*S*S*d*n+3*S*d*d*r+d*d*d*a,l[1][x]=S*S*S*t+3*S*S*d*i+3*S*d*d*o+d*d*d*s;return l[0][y]=e,l[1][y]=t,l[0][y+1]=a,l[1][y+1]=s,l[0].length=l[1].length=y+2,{x0:Ln(...l[0]),y0:Ln(...l[1]),x1:Bn(...l[0]),y1:Bn(...l[1])}}function Bh(e){var t=Jr(e);if(t.curve)return cc(t.curve);for(var n=_C(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(d,h,m){var v,E;if(!d)return["C",h.x,h.y,h.x,h.y,h.x,h.y];switch(!(d[0]in{T:1,Q:1})&&(h.qx=h.qy=null),d[0]){case"M":h.X=d[1],h.Y=d[2];break;case"A":d=["C",...Qy(h.x,h.y,...d.slice(1))];break;case"S":m=="C"||m=="S"?(v=h.x*2-h.bx,E=h.y*2-h.by):(v=h.x,E=h.y),d=["C",v,E,...d.slice(1)];break;case"T":m=="Q"||m=="T"?(h.qx=h.x*2-h.qx,h.qy=h.y*2-h.qy):(h.qx=h.x,h.qy=h.y),d=["C",...Lh(h.x,h.y,h.qx,h.qy,d[1],d[2])];break;case"Q":h.qx=d[1],h.qy=d[2],d=["C",...Lh(h.x,h.y,d[1],d[2],d[3],d[4])];break;case"L":d=["C",...cs(h.x,h.y,d[1],d[2])];break;case"H":d=["C",...cs(h.x,h.y,d[1],h.y)];break;case"V":d=["C",...cs(h.x,h.y,h.x,d[1])];break;case"Z":d=["C",...cs(h.x,h.y,h.X,h.Y)];break}return d},o=function(d,h){if(d[h].length>7){d[h].shift();for(var m=d[h];m.length;)a[h]="A",d.splice(h++,0,["C",...m.splice(0,6)]);d.splice(h,1),u=n.length}},a=[],s="",c="",l=0,u=n.length;l<u;l++){n[l]&&(s=n[l][0]),s!="C"&&(a[l]=s,l&&(c=a[l-1])),n[l]=r(n[l],i,c),a[l]!="A"&&s=="C"&&(a[l]="C"),o(n,l);var f=n[l],p=f.length;i.x=f[p-2],i.y=f[p-1],i.bx=Ah(f[p-4])||i.x,i.by=Ah(f[p-3])||i.y}return t.curve=cc(n),n}function e_(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function ai(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function le(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Hc(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function xC(e){return ai({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function EC(e){for(var t=e.waypoints,n=t.reduce(function(l,u,f){var p=t[f-1];if(p){var d=l[l.length-1],h=d&&d.endLength||0,m=CC(p,u);l.push({start:p,end:u,startLength:h,endLength:h+m,length:m})}return l},[]),i=n.reduce(function(l,u){return l+u.length},0),r=i/2,o=0,a=n[o];a.endLength<r;)a=n[++o];var s=(r-a.startLength)/a.length,c={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return c}function pe(e){return $e(e)?EC(e):xC(e)}function Tt(e,t,n){n=n||0,gt(n)||(n={x:n,y:n});var i=le(e),r=le(t),o=i.bottom+n.y<=r.top,a=i.left-n.x>=r.right,s=i.top-n.y>=r.bottom,c=i.right+n.x<=r.left,l=o?"top":s?"bottom":null,u=c?"left":a?"right":null;return u&&l?l+"-"+u:u||l||"intersect"}function Bu(e,t,n){var i=wC(e,t);return i.length===1||i.length===2&&wa(i[0],i[1])<1?ai(i[0]):i.length>1?(i=Gn(i,function(r){var o=Math.floor(r.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,r.segment2+"#"+o}),ai(i[n?0:i.length-1])):null}function wC(e,t){return Jy(e,t)}function SC(e){e=e.slice();for(var t=0,n,i,r;e[t];)n=e[t],i=e[t-1],r=e[t+1],wa(n,r)===0||Vf(i,r,n)?e.splice(t,1):t++;return e}function CC(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function St(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function $s(e,t,n){return O({id:e.id,type:e.$type,businessObject:e,di:t},n)}function RC(e,t,n){var i=e.waypoint;return!i||i.length<2?[pe(t),pe(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function t_(e,t,n){return new Error(`element ${St(t)} referenced by ${St(e)}#${n} not yet drawn`)}function fi(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}fi.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];fi.prototype.add=function(e,t,n){var i,r,o;if(b(t,"bpmndi:BPMNPlane")){var a=b(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot($s(e,t,a)),this._canvas.addRootElement(i)}else if(b(t,"bpmndi:BPMNShape")){var s=!we(e,t),c=TC(e);r=n&&(n.hidden||n.collapsed);var l=t.bounds;i=this._elementFactory.createShape($s(e,t,{collapsed:s,hidden:r,x:Math.round(l.x),y:Math.round(l.y),width:Math.round(l.width),height:Math.round(l.height),isFrame:c})),b(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),b(e,"bpmn:Lane")&&(o=0),b(e,"bpmn:DataStoreReference")&&(PC(n,pe(l))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else if(b(t,"bpmndi:BPMNEdge")){var u=this._getSource(e),f=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection($s(e,t,{hidden:r,source:u,target:f,waypoints:RC(t,u,f)})),b(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}else throw new Error(`unknown di ${St(t)} for element ${St(e)}`);return wr(e)&&an(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};fi.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${St(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw t_(e,n,"attachedToRef");t.host=i,r||(i.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)};fi.prototype.addLabel=function(e,t,n){var i,r,o;return i=K1(t,n),r=an(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),o=this._elementFactory.createLabel($s(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!an(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(o,n.parent)};fi.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?t_(e,i,t+"Ref"):new Error(`${St(e)}#${t} Ref not specified`)};fi.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};fi.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};fi.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function PC(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function TC(e){return b(e,"bpmn:Group")}const AC={__depends__:[Fc],bpmnImporter:["type",fi]},MC={__depends__:[aC,AC]};function zc(e){return Ee(e,function(t){return!De(e,function(n){return n!==t&&n_(t,n)})})}function n_(e,t){if(t){if(e===t)return t;if(e.parent)return n_(e.parent,t)}}function $h(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function Mr(e,t,n){n=n||0,ge(e)||(e=[e]),A(e,function(i,r){var o=t(i,r,n);ge(o)&&o.length&&Mr(o,t,n+1)})}function DC(e,t,n){var i=[],r=[];return Mr(e,function(o,a,s){$h(i,o,t);var c=o.children;if(c&&$h(r,c,t))return c}),i}function Sa(e,t){return DC(e,!t)}function kC(e,t,n){Er(t)&&(t=!0),gt(t)&&(n=t,t=!0),n=n||{};var i=Do(n.allShapes),r=Do(n.allConnections),o=Do(n.enclosedElements),a=Do(n.enclosedConnections),s=Do(n.topLevel,t&&uo(e,function(u){return u.id}));function c(u){s[u.source.id]&&s[u.target.id]&&(s[u.id]=[u]),i[u.source.id]&&i[u.target.id]&&(a[u.id]=o[u.id]=u),r[u.id]=u}function l(u){if(o[u.id]=u,u.waypoints)a[u.id]=r[u.id]=u;else return i[u.id]=u,A(u.incoming,c),A(u.outgoing,c),u.children}return Mr(e,l),{allShapes:i,allConnections:r,topLevel:s,enclosedConnections:a,enclosedElements:o}}function pt(e,t){t=!!t,ge(e)||(e=[e]);var n,i,r,o;return A(e,function(a){var s=a;a.waypoints&&!t&&(s=pt(a.waypoints,!0));var c=s.x,l=s.y,u=s.height||0,f=s.width||0;(c<n||n===void 0)&&(n=c),(l<i||i===void 0)&&(i=l),(c+f>r||r===void 0)&&(r=c+f),(l+u>o||o===void 0)&&(o=l+u)}),{x:n,y:i,height:o-i,width:r-n}}function OC(e,t){var n={};return A(e,function(i){var r=i;r.waypoints&&(r=pt(r)),!fe(t.y)&&r.x>t.x&&(n[i.id]=i),!fe(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(fe(t.width)&&fe(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!fe(t.width)||!fe(t.height))&&(n[i.id]=i)}),n}function i_(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function r_(e){return!!(e&&e.isFrame)}function Do(e,t){return O({},e||{},t||{})}function Ca(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Ca.prototype.next=function(){return this._prefix+ ++this._counter};var IC=new Ca("ov"),NC=500;function vt(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=IC,this._overlayDefaults=O({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=LC(n.getContainer()),this._init()}vt.$inject=["config.overlays","eventBus","canvas","elementRegistry"];vt.prototype.get=function(e){if(qt(e)&&(e={id:e}),qt(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Ee(t.overlays,Pn({type:e.type})):t.overlays.slice():[]}else return e.type?Ee(this._overlays,Pn({type:e.type})):e.id?this._overlays[e.id]:null};vt.prototype.add=function(e,t,n){if(gt(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=O({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};vt.prototype.remove=function(e){var t=this.get(e)||[];ge(t)||(t=[t]);var n=this;A(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(Kn(i.html),Kn(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})};vt.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};vt.prototype.show=function(){Vc(this._overlayRoot)};vt.prototype.hide=function(){Vc(this._overlayRoot,!1)};vt.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Bc(this._overlayRoot)};vt.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=pt(t);i=o.x,r=o.y}o_(n,i,r),kt(e.html,"data-container-id",t.id)};vt.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,o=t.top;if(t.right!==void 0){var a;i.waypoints?a=pt(i).width:a=i.width,r=t.right*-1+a}if(t.bottom!==void 0){var s;i.waypoints?s=pt(i).height:s=i.height,o=t.bottom*-1+s}o_(n,r||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};vt.prototype._createOverlayContainer=function(e){var t=He('<div class="djs-overlays" />');Ct(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};vt.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";a_(this._overlayRoot,n)};vt.prototype._getOverlayContainer=function(e,t){var n=De(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};vt.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,o;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),qt(i)&&(i=He(i)),o=this._getOverlayContainer(n),r=He('<div class="djs-overlay" data-overlay-id="'+t+'">'),Ct(r,{position:"absolute"}),r.appendChild(i),e.type&&Ze(r).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(n),s=this._canvas.getRootElement();Vc(r,a===s),e.htmlContainer=r,o.overlays.push(e),o.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};vt.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,o=n&&n.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),c=!0;(i!==s||n&&(mt(r)&&r>t.scale||mt(o)&&o<t.scale))&&(c=!1),Vc(a,c),this._updateOverlayScale(e,t)};vt.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,o=e.htmlContainer,a,s="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),mt(i)&&t.scale<i&&(a=(1/t.scale||1)*i),mt(r)&&t.scale>r&&(a=(1/t.scale||1)*r)),mt(a)&&(s="scale("+a+","+a+")"),a_(o,s)};vt.prototype._updateOverlaysVisibilty=function(e){var t=this;A(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};vt.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,o=t.get({element:r});A(o,function(c){t.remove(c.id)});var a=t._getOverlayContainer(r);if(a){Kn(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",NC,function(i){var r=i.element,o=t._getOverlayContainer(r,!0);o&&(A(o.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&Ze(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function LC(e){var t=He('<div class="djs-overlay-container" />');return Ct(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function o_(e,t,n){Ct(e,{left:t+"px",top:n+"px"})}function Vc(e,t){e.style.display=t===!1?"none":""}function a_(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const Wc={__init__:["overlays"],overlays:["type",vt]};function s_(e,t,n,i){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&e.fire(i_(o)+".changed",r)}),e.on("elements.changed",function(r){var o=r.elements;o.forEach(function(a){e.fire("element.changed",{element:a})}),i.updateContainments(o)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}s_.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Uf={__init__:["changeSupport"],changeSupport:["type",s_]};var BC=1e3;function G(e){this._eventBus=e}G.$inject=["eventBus"];function $C(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}G.prototype.on=function(e,t,n,i,r,o){if((lt(t)||fe(t))&&(o=r,r=i,i=n,n=t,t=null),lt(n)&&(o=r,r=i,i=n,n=BC),gt(r)&&(o=r,r=!1),!lt(i))throw new Error("handlerFn must be a function");ge(e)||(e=[e]);var a=this._eventBus;A(e,function(s){var c=["commandStack",s,t].filter(function(l){return l}).join(".");a.on(c,n,r?$C(i,o):i,o)})};G.prototype.canExecute=pi("canExecute");G.prototype.preExecute=pi("preExecute");G.prototype.preExecuted=pi("preExecuted");G.prototype.execute=pi("execute");G.prototype.executed=pi("executed");G.prototype.postExecute=pi("postExecute");G.prototype.postExecuted=pi("postExecuted");G.prototype.revert=pi("revert");G.prototype.reverted=pi("reverted");function pi(e){return function(n,i,r,o,a){(lt(n)||fe(n))&&(a=o,o=r,r=i,i=n,n=null),this.on(n,e,i,r,o,a)}}function Gf(e,t){t.invoke(G,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}ie(Gf,G);Gf.$inject=["canvas","injector"];const jC={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Gf]};function pa(e){return CSS.escape(e)}var FC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function $u(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return FC[t]})}var c_="_plane";function jh(e){var t=e.id;return HC(t)}function ii(e){var t=e.id;return b(e,"bpmn:SubProcess")?l_(t):t}function lr(e){return l_(e)}function js(e){var t=Ae(e);return b(t,"bpmndi:BPMNPlane")}function l_(e){return e+c_}function HC(e){return e.replace(new RegExp(c_+"$"),"")}var zC="bjs-breadcrumbs-shown";function u_(e,t,n){var i=He('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),o=Ze(r);r.appendChild(i);var a=[];e.on("element.changed",function(c){var l=c.element,u=X(l),f=De(a,function(p){return p===u});f&&s()});function s(c){c&&(a=VC(c));var l=a.flatMap(function(f){var p=n.findRoot(ii(f))||n.findRoot(f.id);if(!p&&b(f,"bpmn:Process")){var d=t.find(function(v){var E=X(v);return E&&E.get("processRef")===f});p=d&&n.findRoot(d.id)}if(!p)return[];var h=$u(f.name||f.id),m=He('<li><span class="bjs-crumb"><a title="'+h+'">'+h+"</a></span></li>");return m.addEventListener("click",function(){n.setRootElement(p)}),m});i.innerHTML="";var u=l.length>1;o.toggle(zC,u),l.forEach(function(f){i.appendChild(f)})}e.on("root.set",function(c){s(c.element)})}u_.$inject=["eventBus","elementRegistry","canvas"];function VC(e){for(var t=X(e),n=[],i=t;i;i=i.$parent)(b(i,"bpmn:SubProcess")||b(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function f_(e,t){var n=null,i=new WC;e.on("root.set",function(r){var o=r.element,a=t.viewbox(),s=i.get(o);if(i.set(n,{x:a.x,y:a.y,zoom:a.scale}),n=o,!(!b(o,"bpmn:SubProcess")&&!s)){s=s||{x:0,y:0,zoom:1};var c=(a.x-s.x)*a.scale,l=(a.y-s.y)*a.scale;(c!==0||l!==0)&&t.scroll({dx:c,dy:l}),s.zoom!==a.scale&&t.zoom(s.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}f_.$inject=["eventBus","canvas"];function WC(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Fh={x:180,y:160};function Dr(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}Dr.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};Dr.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(o){var a=o.bpmnElement;if(a){var s=a.$parent;b(a,"bpmn:SubProcess")&&!o.isExpanded&&n.push(a),GC(a,e)&&i.push({diElement:o,parent:s})}});var r=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var a=t._createDiagram(o);t._processToDiagramMap[o.id]=a,r.push(a)}}),i.forEach(function(o){for(var a=o.diElement,s=o.parent;s&&n.indexOf(s)===-1;)s=s.$parent;if(s){var c=t._processToDiagramMap[s.id];t._moveToDiPlane(a,c.plane)}}),r};Dr.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=UC(e),i={x:n.x-Fh.x,y:n.y-Fh.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(o){o.x=o.x-i.x,o.y=o.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};Dr.prototype._moveToDiPlane=function(e,t){var n=p_(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Dr.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Dr.$inject=["eventBus","moddle"];function p_(e){return b(e,"bpmndi:BPMNDiagram")?e:p_(e.$parent)}function UC(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=le(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),Hc(t)}function GC(e,t){var n=e.$parent;return!(!b(n,"bpmn:SubProcess")||n===t.bpmnElement||be(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var ls=250,KC='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',YC="bjs-drilldown-empty";function Wi(e,t,n,i,r){G.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var o=this;this.executed("shape.toggleCollapse",ls,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",ls,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],ls,function(a){var s=a.oldParent,c=a.newParent||a.parent,l=a.shape;o._canDrillDown(l)&&o._addOverlay(l),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(l)},!0),this.reverted(["shape.create","shape.move","shape.delete"],ls,function(a){var s=a.oldParent,c=a.newParent||a.parent,l=a.shape;o._canDrillDown(l)&&o._addOverlay(l),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(l)},!0),t.on("import.render.complete",function(){n.filter(function(a){return o._canDrillDown(a)}).map(function(a){o._addOverlay(a)})})}ie(Wi,G);Wi.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};Wi.prototype._canDrillDown=function(e){var t=this._canvas;return b(e,"bpmn:SubProcess")&&t.findRoot(ii(e))};Wi.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=X(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;Ze(i.html).toggle(YC,!r)}};Wi.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=X(e),r=n.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var o=He('<button type="button" class="bjs-drilldown">'+KC+"</button>"),a=i.get("name")||i.get("id"),s=this._translate("Open {element}",{element:a});o.setAttribute("title",s),o.addEventListener("click",function(){t.setRootElement(t.findRoot(ii(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};Wi.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};Wi.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const qC={__depends__:[Wc,Uf,jC],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",u_],drilldownCentering:["type",f_],drilldownOverlayBehavior:["type",Wi],subprocessCompatibility:["type",Dr]};var XC=500,ZC=1e3;function kr(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(o){var a=ae("rect");return te(a,O({x:0,y:0,rx:4,width:100,height:100},n)),a}e.on(["shape.added","shape.changed"],XC,function(o){var a=o.element,s=o.gfx,c=Ie(".djs-outline",s);c||(c=i.getOutline(a)||r(),de(s,c)),i.updateShapeOutline(c,a)}),e.on(["connection.added","connection.changed"],function(o){var a=o.element,s=o.gfx,c=Ie(".djs-outline",s);c||(c=r(),de(s,c)),i.updateConnectionOutline(c,a)})}kr.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&A(i,function(r){n=n||r.updateOutline(t,e)}),n||te(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};kr.prototype.updateConnectionOutline=function(e,t){var n=pt(t);te(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};kr.prototype.registerProvider=function(e,t){t||(t=e,e=ZC),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};kr.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};kr.prototype.getOutline=function(e){var t,n=this._getProviders();return A(n,function(i){lt(i.getOutline)&&(t=t||i.getOutline(e))}),t};kr.$inject=["eventBus","styles","elementRegistry"];const Kf={__init__:["outline"],outline:["type",kr]},JC="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",QC="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",eR={width:36,height:50},tR={width:50,height:50};function Hh(e,t,n){return ae("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const Ai=5;function Uc(e,t){this._styles=t,e.registerProvider(this)}Uc.$inject=["outline","styles"];Uc.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Me(e))return b(e,"bpmn:Gateway")?(n=ae("rect"),O(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),te(n,O({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):be(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=ae("rect"),te(n,O({x:-Ai,y:-Ai,rx:14,width:e.width+Ai*2,height:e.height+Ai*2},t))):b(e,"bpmn:EndEvent")?(n=ae("circle"),te(n,O({cx:e.width/2,cy:e.height/2,r:e.width/2+Ai+1},t))):b(e,"bpmn:Event")?(n=ae("circle"),te(n,O({cx:e.width/2,cy:e.height/2,r:e.width/2+Ai},t))):b(e,"bpmn:DataObjectReference")&&zh(e,"bpmn:DataObjectReference")?n=Hh(JC,{x:-6,y:-6},t):b(e,"bpmn:DataStoreReference")&&zh(e,"bpmn:DataStoreReference")&&(n=Hh(QC,{x:-6,y:-6},t)),n};Uc.prototype.updateOutline=function(e,t){if(!Me(e))return be(e,["bpmn:SubProcess","bpmn:Group"])?(te(t,{width:e.width+Ai*2,height:e.height+Ai*2}),!0):!!be(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function zh(e,t){var n;return t==="bpmn:DataObjectReference"?n=eR:t==="bpmn:DataStoreReference"&&(n=tR),e.width===n.width&&e.height===n.height}const nR={__depends__:[Kf],__init__:["outlineProvider"],outlineProvider:["type",Uc]};function Vh(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function po(e){return e.originalEvent||e.srcEvent}function Zl(e){Vh(e),Vh(po(e))}function Sr(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function d_(){return/mac/i.test(navigator.platform)}function h_(e,t){return(po(e)||e).button===t}function Ui(e){return h_(e,0)}function iR(e){return h_(e,1)}function da(e){var t=po(e)||e;return Ui(e)?d_()?t.metaKey:t.ctrlKey:!1}function uc(e){var t=po(e)||e;return Ui(e)&&t.shiftKey}function rR(e){return!0}function us(e){return Ui(e)||iR(e)}var Wh=500;function m_(e,t,n){var i=this;function r(D,B,N){if(!s(D,B)){var j,Y,Z;N?Y=t.getGraphics(N):(j=B.delegateTarget||B.target,j&&(Y=j,N=t.get(Y))),!(!Y||!N)&&(Z=e.fire(D,{element:N,gfx:Y,originalEvent:B}),Z===!1&&(B.stopPropagation(),B.preventDefault()))}}var o={};function a(D){return o[D]}function s(D,B){var N=l[D]||Ui;return!N(B)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":rR,"element.mousedown":us,"element.mouseup":us,"element.click":us,"element.dblclick":us};function u(D,B,N){var j=c[D];if(!j)throw new Error("unmapped DOM event name <"+D+">");return r(j,B,N)}var f="svg, .djs-element";function p(D,B,N,j){var Y=o[N]=function(Z){r(N,Z)};j&&(l[N]=j),Y.$delegate=Yt.bind(D,f,B,Y)}function d(D,B,N){var j=a(N);j&&Yt.unbind(D,B,j.$delegate)}function h(D){A(c,function(B,N){p(D,N,B)})}function m(D){A(c,function(B,N){d(D,N,B)})}e.on("canvas.destroy",function(D){m(D.svg)}),e.on("canvas.init",function(D){h(D.svg)}),e.on(["shape.added","connection.added"],function(D){var B=D.element,N=D.gfx;e.fire("interactionEvents.createHit",{element:B,gfx:N})}),e.on(["shape.changed","connection.changed"],Wh,function(D){var B=D.element,N=D.gfx;e.fire("interactionEvents.updateHit",{element:B,gfx:N})}),e.on("interactionEvents.createHit",Wh,function(D){var B=D.element,N=D.gfx;i.createDefaultHit(B,N)}),e.on("interactionEvents.updateHit",function(D){var B=D.element,N=D.gfx;i.updateDefaultHit(B,N)});var v=S("djs-hit djs-hit-stroke"),E=S("djs-hit djs-hit-click-stroke"),C=S("djs-hit djs-hit-all"),x=S("djs-hit djs-hit-no-move"),y={all:C,"click-stroke":E,stroke:v,"no-move":x};function S(D,B){return B=O({stroke:"white",strokeWidth:15},B||{}),n.cls(D,["no-fill","no-border"],B)}function T(D,B){var N=y[B];if(!N)throw new Error("invalid hit type <"+B+">");return te(D,N),D}function I(D,B){de(D,B)}this.removeHits=function(D){var B=Iu(".djs-hit",D);A(B,ct)},this.createDefaultHit=function(D,B){var N=D.waypoints,j=D.isFrame,Y;return N?this.createWaypointsHit(B,N):(Y=j?"stroke":"all",this.createBoxHit(B,Y,{width:D.width,height:D.height}))},this.createWaypointsHit=function(D,B){var N=Lc(B);return T(N,"stroke"),I(D,N),N},this.createBoxHit=function(D,B,N){N=O({x:0,y:0},N);var j=ae("rect");return T(j,B),te(j,N),I(D,j),j},this.updateDefaultHit=function(D,B){var N=Ie(".djs-hit",B);if(N)return D.waypoints?Uy(N,D.waypoints):te(N,{width:D.width,height:D.height}),N},this.fire=r,this.triggerMouseEvent=u,this.mouseHandler=a,this.registerEvent=p,this.unregisterEvent=d}m_.$inject=["eventBus","elementRegistry","styles"];const Gc={__init__:["interactionEvents"],interactionEvents:["type",m_]};function ho(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}ho.$inject=["eventBus","canvas"];ho.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};ho.prototype.get=function(){return this._selectedElements};ho.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};ho.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();ge(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(a){var s=r.findRoot(a);return o===s}),t?A(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Uh="hover",Gh="selected",fs=6;function Yf(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(a,s){e.addMarker(a,s)}function o(a,s){e.removeMarker(a,s)}t.on("element.hover",function(a){r(a.element,Uh)}),t.on("element.out",function(a){o(a.element,Uh)}),t.on("selection.changed",function(a){function s(f){o(f,Gh)}function c(f){r(f,Gh)}var l=a.oldSelection,u=a.newSelection;A(l,function(f){u.indexOf(f)===-1&&s(f)}),A(u,function(f){l.indexOf(f)===-1&&c(f)}),i._updateSelectionOutline(u)}),t.on("element.changed",function(a){n.isSelected(a.element)&&i._updateSelectionOutline(n.get())})}Yf.$inject=["canvas","eventBus","selection"];Yf.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Nc(t);var n=e.length>1,i=this._canvas.getContainer();if(Te(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=oR(pt(e)),o=ae("rect");te(o,O({rx:3},r)),Te(o).add("djs-selection-outline"),de(t,o)}};function oR(e){return{x:e.x-fs,y:e.y-fs,width:e.width+fs*2,height:e.height+fs*2}}function g_(e,t,n,i){e.on("create.end",500,function(r){var o=r.context,a=o.canExecute,s=o.elements,c=o.hints||{},l=c.autoSelect;if(a){if(l===!1)return;ge(l)?t.select(l):t.select(s.filter(aR))}}),e.on("connect.end",500,function(r){var o=r.context,a=o.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],a=i.get(r.context.shape.id),s=De(o,function(c){return a.id===c.id});s||t.select(a)}),e.on("element.click",function(r){if(Ui(r)){var o=r.element;o===n.getRootElement()&&(o=null);var a=t.isSelected(o),s=t.get().length>1,c=uc(r);if(a&&s)return c?t.deselect(o):t.select(o);a?t.deselect(o):t.select(o,c)}})}g_.$inject=["eventBus","selection","canvas","elementRegistry"];function aR(e){return!e.hidden}const qn={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Gc,Kf],selection:["type",ho],selectionVisuals:["type",Yf],selectionBehavior:["type",g_]},sR=/^class[ {]/;function cR(e){return sR.test(e.toString())}function qf(e){return Array.isArray(e)}function Jl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fs(...e){e.length===1&&qf(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const lR=/constructor\s*[^(]*\(\s*([^)]*)\)/m,uR=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,fR=/\/\*([^*]*)\*\//m;function pR(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(cR(e)?lR:uR);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(fR);return(r&&r[1]||i).trim()})||[]}function v_(e,t){const n=t||{get:function(x,y){if(i.push(x),y===!1)return null;throw s(`No provider for "${x}"!`)}},i=[],r=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(x){const y=i.join(" -> ");return i.length=0,new Error(y?`${x} (Resolving: ${y})`:x)};function c(x,y){if(!r[x]&&x.includes(".")){const S=x.split(".");let T=c(S.shift());for(;S.length;)T=T[S.shift()];return T}if(Jl(o,x))return o[x];if(Jl(r,x)){if(i.indexOf(x)!==-1)throw i.push(x),s("Cannot resolve circular dependency!");return i.push(x),o[x]=r[x][0](r[x][1]),i.pop(),o[x]}return n.get(x,y)}function l(x,y){if(typeof y>"u"&&(y={}),typeof x!="function")if(qf(x))x=Fs(x.slice());else throw s(`Cannot invoke "${x}". Expected a function!`);const T=(x.$inject||pR(x)).map(I=>Jl(y,I)?y[I]:c(I));return{fn:x,dependencies:T}}function u(x){const{fn:y,dependencies:S}=l(x),T=Function.prototype.bind.call(y,null,...S);return new T}function f(x,y,S){const{fn:T,dependencies:I}=l(x,S);return T.apply(y,I)}function p(x){return Fs(y=>x.get(y))}function d(x,y){if(y&&y.length){const S=Object.create(null),T=Object.create(null),I=[],D=[],B=[];let N,j,Y,Z;for(let ue in r)N=r[ue],y.indexOf(ue)!==-1&&(N[2]==="private"?(j=I.indexOf(N[3]),j===-1?(Y=N[3].createChild([],y),Z=p(Y),I.push(N[3]),D.push(Y),B.push(Z),S[ue]=[Z,ue,"private",Y]):S[ue]=[B[j],ue,"private",D[j]]):S[ue]=[N[2],N[1]],T[ue]=!0),(N[2]==="factory"||N[2]==="type")&&N[1].$scope&&y.forEach(Et=>{N[1].$scope.indexOf(Et)!==-1&&(S[ue]=[N[2],N[1]],T[Et]=!0)});y.forEach(ue=>{if(!T[ue])throw new Error('No provider for "'+ue+'". Cannot use provider from the parent!')}),x.unshift(S)}return new v_(x,a)}const h={factory:f,type:u,value:function(x){return x}};function m(x,y){const S=x.__init__||[];return function(){S.forEach(T=>{typeof T=="string"?y.get(T):y.invoke(T)})}}function v(x){const y=x.__exports__;if(y){const S=x.__modules__,T=Object.keys(x).reduce((j,Y)=>(Y!=="__exports__"&&Y!=="__modules__"&&Y!=="__init__"&&Y!=="__depends__"&&(j[Y]=x[Y]),j),Object.create(null)),I=(S||[]).concat(T),D=d(I),B=Fs(function(j){return D.get(j)});y.forEach(function(j){r[j]=[B,j,"private",D]});const N=(x.__init__||[]).slice();return N.unshift(function(){D.init()}),x=Object.assign({},x,{__init__:N}),m(x,D)}return Object.keys(x).forEach(function(S){if(S==="__init__"||S==="__depends__")return;const T=x[S];if(T[2]==="private"){r[S]=T;return}const I=T[0],D=T[1];r[S]=[h[I],dR(I,D),I]}),m(x,a)}function E(x,y){return x.indexOf(y)!==-1||(x=(y.__depends__||[]).reduce(E,x),x.indexOf(y)!==-1)?x:x.concat(y)}function C(x){const y=x.reduce(E,[]).map(v);let S=!1;return function(){S||(S=!0,y.forEach(T=>T()))}}this.get=c,this.invoke=f,this.instantiate=u,this.createChild=d,this.init=C(e)}function dR(e,t){return e!=="value"&&qf(t)&&(t=Fs(t.slice())),t}var hR=1;function Gi(e,t){ui.call(this,e,hR),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}ie(Gi,ui);Gi.prototype.canRender=function(){return!0};Gi.prototype.drawShape=function(t,n,i){var r=ae("rect");return te(r,{x:0,y:0,width:n.width||0,height:n.height||0}),r_(n)?te(r,O({},this.FRAME_STYLE,i||{})):te(r,O({},this.SHAPE_STYLE,i||{})),de(t,r),r};Gi.prototype.drawConnection=function(t,n,i){var r=Lc(n.waypoints,O({},this.CONNECTION_STYLE,i||{}));return de(t,r),r};Gi.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,o=t.height,a=[["M",n,i],["l",r,0],["l",0,o],["l",-r,0],["z"]];return Tr(a)};Gi.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,o=[];for(i=0;r=n[i];i++)r=r.original||r,o.push([i===0?"M":"L",r.x,r.y]);return Tr(o)};Gi.$inject=["eventBus","styles"];function mR(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var o=this.style(i,r);return O(o,{class:n})},this.style=function(n,i){!ge(n)&&!i&&(i=n,n=[]);var r=Xt(n,function(o,a){return O(o,e[a]||{})},{});return i?O(r,i):r},this.computeStyle=function(n,i,r){return ge(i)||(r=i,i=[]),t.style(i||[],O({},r,n||{}))}}const gR={__init__:["defaultRenderer"],defaultRenderer:["type",Gi],styles:["type",mR]};function it(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function ut(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Xf(e,t){return!e||!t?-1:e.indexOf(t)}function Hs(e,t){return Math.round(e*t)/t}function Kh(e){return fe(e)?e+"px":e}function vR(e){for(;e.parent;)e=e.parent;return e}function yR(e){e=O({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Ct(n,{position:"relative",overflow:"hidden",width:Kh(e.width),height:Kh(e.height)}),t.appendChild(n),n}function y_(e,t,n){const i=ae("g");Te(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const _R="base",__=0,bR=1,xR={shape:["x","y","width","height"],connection:["waypoints"]};function ye(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}ye.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];ye.prototype._init=function(e){const t=this._eventBus,n=this._container=yR(e),i=this._svg=ae("svg");te(i,{width:"100%",height:"100%"}),de(n,i);const r=this._viewport=y_(i,"viewport");e.deferUpdate&&(this._viewboxChanged=$y(Wt(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};ye.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};ye.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=i_(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};ye.prototype.getDefaultLayer=function(){return this.getLayer(_R,__)};ye.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};ye.prototype._getChildIndex=function(e){return Xt(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};ye.prototype._createLayer=function(e,t){typeof t>"u"&&(t=bR);const n=this._getChildIndex(t);return{group:y_(this._viewport,"layer-"+e,n),index:t,visible:!0}};ye.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const o=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[o]||null),t.visible=!0,i};ye.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(ct(n),t.visible=!1),n};ye.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],ct(t.group))};ye.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};ye.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(vR(e))||{}).rootElement:void 0};ye.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};ye.prototype._findPlaneForRoot=function(e){return De(this._planes,function(t){return t.rootElement===e})};ye.prototype.getContainer=function(){return this._container};ye.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(A([i.gfx,i.secondaryGfx],function(r){r&&(n?(e.markers.add(t),Te(r).add(t)):(e.markers.delete(t),Te(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};ye.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};ye.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};ye.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};ye.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};ye.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};ye.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,__);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};ye.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};ye.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};ye.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};ye.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};ye.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};ye.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=xR[e];if(!Pr(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};ye.prototype._setParent=function(e,t,n){ut(t.children,e,n),e.parent=t};ye.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t};ye.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};ye.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};ye.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),it(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};ye.prototype.removeShape=function(e){return this._removeElement(e,"shape")};ye.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};ye.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};ye.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};ye.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};ye.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let i,r,o,a,s,c,l;if(e)this._changeViewbox(function(){s=Math.min(n.width/e.width,n.height/e.height);const u=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);fa(t,u)});else return o=this._rootElement?this.getActiveLayer():null,i=o&&o.getBBox()||{},a=fa(t),r=a?a.matrix:iS(),s=Hs(r.a,1e3),c=Hs(-r.e||0,1e3),l=Hs(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/s:0,y:l?l/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};ye.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=O({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),b_(t,n)}),{x:n.e,y:n.f}};ye.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=pt(e),o=le(r),a=this.viewbox(),s=this.zoom();let c,l;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const u=le(a);if(!(r.width<a.width&&r.height<a.height))c=r.x-a.x,l=r.y-a.y;else{const p=Math.max(0,o.right-u.right),d=Math.min(0,o.left-u.left),h=Math.max(0,o.bottom-u.bottom),m=Math.min(0,o.top-u.top);c=p||d,l=h||m}this.scroll({dx:-c*s,dy:-l*s})};ye.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Hs(i.a,1e3)};function b_(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}ye.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,o;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?o={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),o={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(o),this.viewbox(!1).scale};ye.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),o=n.createSVGPoint();let a,s,c,l,u;c=i.getCTM();const f=c.a;return t?(a=O(o,t),s=a.matrixTransform(c.inverse()),l=r.translate(s.x,s.y).scale(1/f*e).translate(-s.x,-s.y),u=c.multiply(l)):u=r.scale(e),b_(this._viewport,u),u};ye.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};ye.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,a=n.height*t.scale;return{x:i,y:r,width:o,height:a}};ye.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Qr="data-element-id";function cn(e){this._elements={},this._eventBus=e}cn.$inject=["eventBus"];cn.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),te(t,Qr,i),n&&te(n,Qr,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};cn.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(te(i.gfx,Qr,""),i.secondaryGfx&&te(i.secondaryGfx,Qr,""),delete t[n])};cn.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};cn.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&te(t,Qr,i),t};cn.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&te(e,Qr);var n=this._elements[t];return n&&n.element};cn.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};cn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],o=t[r],a=o.element,s=o.gfx;if(e(a,s))return a}};cn.prototype.getAll=function(){return this.filter(function(e){return e})};cn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)})};cn.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};cn.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function ER(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),t.unset(o,r,i)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,a){var s=this.indexOf(o);if(typeof a>"u"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,o),s===-1&&t.set(o,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function wR(e){return e.__refs_collection===!0}function SR(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function x_(e,t,n){var i=ER(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function CR(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(o){if(o!==r){var a=r;r=null,a&&e.unset(a,i,n),r=o,e.set(r,i,n)}}})}function vn(e,t){if(!(this instanceof vn))return new vn(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}vn.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?x_(this,t,e):CR(this,t,e)};vn.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return wR(n)||x_(this,t,e),n};vn.prototype.ensureBound=function(e,t){SR(e,t)||this.bind(e,t)};vn.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};vn.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Zf=new vn({name:"children",enumerable:!0,collection:!0},{name:"parent"}),E_=new vn({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Yh=new vn({name:"attachers",collection:!0},{name:"host"}),w_=new vn({name:"outgoing",collection:!0},{name:"source"}),S_=new vn({name:"incoming",collection:!0},{name:"target"});function mo(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Zf.bind(this,"parent"),E_.bind(this,"labels"),w_.bind(this,"outgoing"),S_.bind(this,"incoming")}function Ra(){mo.call(this),Zf.bind(this,"children"),Yh.bind(this,"host"),Yh.bind(this,"attachers")}ie(Ra,mo);function C_(){mo.call(this),Zf.bind(this,"children")}ie(C_,Ra);function R_(){Ra.call(this),E_.bind(this,"labelTarget")}ie(R_,Ra);function P_(){mo.call(this),w_.bind(this,"source"),S_.bind(this,"target")}ie(P_,mo);var RR={connection:P_,shape:Ra,label:R_,root:C_};function PR(e,t){var n=RR[e];if(!n)throw new Error("unknown type: <"+e+">");return O(new n,t)}function TR(e){return e instanceof mo}function di(){this._uid=12}di.prototype.createRoot=function(e){return this.create("root",e)};di.prototype.createLabel=function(e){return this.create("label",e)};di.prototype.createShape=function(e){return this.create("shape",e)};di.prototype.createConnection=function(e){return this.create("connection",e)};di.prototype.create=function(e,t){return t=O({},t||{}),t.id||(t.id=e+"_"+this._uid++),PR(e,t)};var fc="__fn",T_=1e3,AR=Array.prototype.slice;function Zt(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Zt.prototype.on=function(e,t,n,i){if(e=ge(e)?e:[e],lt(t)&&(i=n,n=t,t=T_),!fe(t))throw new Error("priority must be a number");var r=n;i&&(r=Wt(n,i),r[fc]=n[fc]||n);var o=this;e.forEach(function(a){o._addListener(a,{priority:t,callback:r,next:null})})};Zt.prototype.once=function(e,t,n,i){var r=this;if(lt(t)&&(i=n,n=t,t=T_),!fe(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(i,arguments);return r.off(e,o),a}o[fc]=n,this.on(e,t,o)};Zt.prototype.off=function(e,t){e=ge(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};Zt.prototype.createEvent=function(e){var t=new Pa;return t.init(e),t};Zt.prototype.fire=function(e,t){var n,i,r,o;if(o=AR.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof Pa?n=t:n=this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};Zt.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};Zt.prototype._destroy=function(){this._listeners={}};Zt.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};Zt.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=MR(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};Zt.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};Zt.prototype._getListeners=function(e){return this._listeners[e]};Zt.prototype._setListeners=function(e,t){this._listeners[e]=t};Zt.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,o;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,o=n.callback,(o===t||o[fc]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function Pa(){}Pa.prototype.stopPropagation=function(){this.cancelBubble=!0};Pa.prototype.preventDefault=function(){this.defaultPrevented=!0};Pa.prototype.init=function(e){O(this,e||{})};function MR(e,t){return e.apply(null,t)}function _r(e){return e.childNodes[0]}function DR(e){return e.parentNode.childNodes[1]}function ln(e,t){this._eventBus=e,this._elementRegistry=t}ln.$inject=["eventBus","elementRegistry"];ln.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=DR(t),n||(n=ae("g"),Te(n).add("djs-children"),de(t.parentNode,n))):n=t,n};ln.prototype._clear=function(e){var t=_r(e);return Bc(t),t};ln.prototype._createContainer=function(e,t,n,i){var r=ae("g");Te(r).add("djs-group"),typeof n<"u"?A_(r,t,t.childNodes[n]):de(t,r);var o=ae("g");Te(o).add("djs-element"),Te(o).add("djs-"+e),i&&Te(o).add("djs-frame"),de(r,o);var a=ae("g");return Te(a).add("djs-visual"),de(o,a),o};ln.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,r_(t))};ln.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=Xt(e,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),A(i,function(r){var o=r.children;if(o){var a=t._getChildrenContainer(r);A(o.slice().reverse(),function(s){var c=n.getGraphics(s);A_(c.parentNode,a)})}})};ln.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};ln.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};ln.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};ln.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};ln.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),yt(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?te(n,"display","none"):te(n,"display","block")}};ln.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);ct(t.parentNode)};function A_(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const kR={__depends__:[gR],__init__:["canvas"],canvas:["type",ye],elementRegistry:["type",cn],elementFactory:["type",di],eventBus:["type",Zt],graphicsFactory:["type",ln]};function OR(e){var t=new v_(e);return t.init(),t}function IR(e){e=e||{};var t={config:["value",e]},n=[t,kR].concat(e.modules||[]);return OR(n)}function Ki(e,t){this._injector=t||IR(e),this.get("eventBus").fire("diagram.init")}Ki.prototype.get=function(e,t){return this._injector.get(e,t)};Ki.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Ki.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Ki.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Jf(){}Jf.prototype.get=function(e){return this.$model.properties.get(this,e)};Jf.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function M_(e,t){this.model=e,this.properties=t}M_.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Jf.prototype);A(e.properties,function(a){!a.isMany&&a.default!==void 0&&(i[a.name]=a.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(a){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),A(a,Wt(function(s,c){this.set(c,s)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var NR={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},D_={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Qf(e,t){var n=D_[e];return n?n(t):t}function ju(e){return!!NR[e]}function k_(e){return!!D_[e]}function Ot(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function un(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}un.prototype.build=function(){return An(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};un.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};un.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(s===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t};un.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=Ot(r[0],i),a=Ot(r[1],o.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+a+"> not found");delete e.redefines};un.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};un.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};un.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};un.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};un.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};un.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};un.prototype.hasProperty=function(e){return this.propertiesByName[e]};un.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(A(e.properties,Wt(function(o){o=O({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var a=o.replaces,s=o.redefines;a||s?this.redefineProperty(o,a||s,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(e),n[r]=e)};function Yi(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,A(e,Wt(this.registerPackage,this))}Yi.prototype.getPackage=function(e){return this.packageMap[e]};Yi.prototype.getPackages=function(){return this.packages};Yi.prototype.registerPackage=function(e){e=O({},e);var t=this.packageMap;qh(t,e,"prefix"),qh(t,e,"uri"),A(e.types,Wt(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Yi.prototype.registerType=function(e,t){e=O({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:O(e.meta||{})});var n=Ot(e.name,t.prefix),i=n.name,r={};A(e.properties,Wt(function(o){var a=Ot(o.name,n.prefix),s=a.name;ju(o.type)||(o.type=Ot(o.type,a.prefix).name),O(o,{ns:a,name:s}),r[s]=o},this)),O(e,{ns:n,name:i,propertiesByName:r}),A(e.extends,Wt(function(o){var a=Ot(o,n.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};Yi.prototype.mapTypes=function(e,t,n){var i=ju(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(c,l){var u=Ot(c,ju(c)?"":e.prefix);r.mapTypes(u,t,l)}function a(c){return o(c,!0)}function s(c){return o(c,!1)}if(!i)throw new Error("unknown type <"+e.name+">");A(i.superClass,n?a:s),t(i,!n),A(i.traits,a)};Yi.prototype.getEffectiveDescriptor=function(e){var t=Ot(e),n=new un(t);this.mapTypes(t,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};Yi.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function qh(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Or(e){this.model=e}Or.prototype.set=function(e,t,n){if(!qt(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;LR(n)?i?delete e[r]:delete e.$attrs[Fu(t)]:i?r in e?e[r]=n:O_(e,i,n):e.$attrs[Fu(t)]=n};Or.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[Fu(t)];var i=n.name;return!e[i]&&n.isMany&&O_(e,n,[]),e[i]};Or.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=O({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};Or.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Or.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Or.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw o;typeof console<"u"&&console.warn(o)}return null};function LR(e){return typeof e>"u"}function O_(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Fu(e){return e.replace(/^:/,"")}function yn(e,t={}){this.properties=new Or(this),this.factory=new M_(this,this.properties),this.registry=new Yi(e,this.properties),this.typeCache={},this.config=t}yn.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};yn.prototype.getType=function(e){var t=this.typeCache,n=qt(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};yn.prototype.createAny=function(e,t,n){var i=Ot(e),r={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){j1(this,[a],s)}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),A(n,function(a,s){gt(a)&&a.value!==void 0?r[a.name]=a.value:r[s]=a}),r};yn.prototype.getPackage=function(e){return this.registry.getPackage(e)};yn.prototype.getPackages=function(){return this.registry.getPackages()};yn.prototype.getElementDescriptor=function(e){return e.$descriptor};yn.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};yn.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};yn.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Xh=String.fromCharCode,BR=Object.prototype.hasOwnProperty,$R=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Qo={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Qo).forEach(function(e){Qo[e.toUpperCase()]=Qo[e]});function jR(e,t,n,i){return i?BR.call(Qo,i)?Qo[i]:"&"+i+";":Xh(t||parseInt(n,16))}function ur(e){return e.length>3&&e.indexOf("&")!==-1?e.replace($R,jR):e}var FR="http://www.w3.org/2001/XMLSchema-instance",HR="xsi",Zh="xsi:type",Jh="non-whitespace outside of root node";function Fr(e){return new Error(e)}function Qh(e){return"missing namespace for prefix <"+e+">"}function ps(e){return{get:e,enumerable:!0}}function zR(e){var t={},n;for(n in e)t[n]=e[n];return t}function Hu(e){return e+"$uri"}function VR(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Hu(i)]=n;return t}function em(){return{line:0,column:0}}function WR(e){throw e}function I_(e){if(!this)return new I_(e);var t=e&&e.proxy,n,i,r,o,a=WR,s,c,l,u,f=em,p=!1,d=!1,h=null,m=!1,v;function E(y){y instanceof Error||(y=Fr(y)),h=y,a(y,f)}function C(y){s&&(y instanceof Error||(y=Fr(y)),s(y,f))}this.on=function(y,S){if(typeof S!="function")throw Fr("required args <name, cb>");switch(y){case"openTag":i=S;break;case"text":n=S;break;case"closeTag":r=S;break;case"error":a=S;break;case"warn":s=S;break;case"cdata":o=S;break;case"attention":u=S;break;case"question":l=S;break;case"comment":c=S;break;default:throw Fr("unsupported event: "+y)}return this},this.ns=function(y){if(typeof y>"u"&&(y={}),typeof y!="object")throw Fr("required args <nsMap={}>");var S={},T;for(T in y)S[T]=y[T];return S[FR]=HR,d=!0,v=S,this},this.parse=function(y){if(typeof y!="string")throw Fr("required args <xml=string>");return h=null,x(y),f=em,m=!1,h},this.stop=function(){m=!0};function x(y){var S=d?[]:null,T=d?VR(v):null,I,D=[],B=0,N=!1,j=!1,Y=0,Z=0,ue,Et,ve,oe,Se,Qe,Le,ze,H,K="",re=0,ke;function R(){if(ke!==null)return ke;var _,M,k,W=d&&T.xmlns,ce=d&&p?[]:null,w=re,P=K,L=P.length,U,z,F,ee,V,J={},q={},se,$,Q;e:for(;w<L;w++)if(se=!1,$=P.charCodeAt(w),!($===32||$<14&&$>8)){for(($<65||$>122||$>90&&$<97)&&$!==95&&$!==58&&(C("illegal first char attribute name"),se=!0),Q=w+1;Q<L;Q++)if($=P.charCodeAt(Q),!($>96&&$<123||$>64&&$<91||$>47&&$<59||$===46||$===45||$===95)){if($===32||$<14&&$>8){C("missing attribute value"),w=Q;continue e}if($===61)break;C("illegal attribute name char"),se=!0}if(V=P.substring(w,Q),V==="xmlns:xmlns"&&(C("illegal declaration of xmlns"),se=!0),$=P.charCodeAt(Q+1),$===34)Q=P.indexOf('"',w=Q+2),Q===-1&&(Q=P.indexOf("'",w),Q!==-1&&(C("attribute value quote missmatch"),se=!0));else if($===39)Q=P.indexOf("'",w=Q+2),Q===-1&&(Q=P.indexOf('"',w),Q!==-1&&(C("attribute value quote missmatch"),se=!0));else for(C("missing attribute value quotes"),se=!0,Q=Q+1;Q<L&&($=P.charCodeAt(Q+1),!($===32||$<14&&$>8));Q++);for(Q===-1&&(C("missing closing quotes"),Q=L,se=!0),se||(F=P.substring(w,Q)),w=Q;Q+1<L&&($=P.charCodeAt(Q+1),!($===32||$<14&&$>8));Q++)w===Q&&(C("illegal character after attribute end"),se=!0);if(w=Q+1,se)continue e;if(V in q){C("attribute <"+V+"> already defined");continue}if(q[V]=!0,!d){J[V]=F;continue}if(p){if(z=V==="xmlns"?"xmlns":V.charCodeAt(0)===120&&V.substr(0,6)==="xmlns:"?V.substr(6):null,z!==null){if(_=ur(F),M=Hu(z),ee=v[_],!ee){if(z==="xmlns"||M in T&&T[M]!==_)do ee="ns"+B++;while(typeof T[ee]<"u");else ee=z;v[_]=ee}T[z]!==ee&&(U||(T=zR(T),U=!0),T[z]=ee,z==="xmlns"&&(T[Hu(ee)]=_,W=ee),T[M]=_),J[V]=F;continue}ce.push(V,F);continue}if($=V.indexOf(":"),$===-1){J[V]=F;continue}if(!(k=T[V.substring(0,$)])){C(Qh(V.substring(0,$)));continue}V=W===k?V.substr($+1):k+V.substr($),V===Zh&&($=F.indexOf(":"),$!==-1?(k=F.substring(0,$),k=T[k]||k,F=k+F.substring($)):F=W+":"+F),J[V]=F}if(p)for(w=0,L=ce.length;w<L;w++){if(V=ce[w++],F=ce[w],$=V.indexOf(":"),$!==-1){if(!(k=T[V.substring(0,$)])){C(Qh(V.substring(0,$)));continue}V=W===k?V.substr($+1):k+V.substr($),V===Zh&&($=F.indexOf(":"),$!==-1?(k=F.substring(0,$),k=T[k]||k,F=k+F.substring($)):F=W+":"+F)}J[V]=F}return ke=J}function g(){for(var _=/(\r\n|\r|\n)/g,M=0,k=0,W=0,ce=Z,w,P;Y>=W&&(w=_.exec(y),!(!w||(ce=w[0].length+w.index,ce>Y)));)M+=1,W=ce;return Y==-1?(k=ce,P=y.substring(Z)):Z===0?P=y.substring(Z,Y):(k=Y-W,P=Z==-1?y.substring(Y):y.substring(Y,Z+1)),{data:P,line:M,column:k}}for(f=g,t&&(H=Object.create({},{name:ps(function(){return Le}),originalName:ps(function(){return ze}),attrs:ps(R),ns:ps(function(){return T})}));Z!==-1;){if(y.charCodeAt(Z)===60?Y=Z:Y=y.indexOf("<",Z),Y===-1){if(D.length)return E("unexpected end of file");if(Z===0)return E("missing start tag");Z<y.length&&y.substring(Z).trim()&&C(Jh);return}if(Z!==Y){if(D.length){if(n&&(n(y.substring(Z,Y),ur,f),m))return}else if(y.substring(Z,Y).trim()&&(C(Jh),m))return}if(oe=y.charCodeAt(Y+1),oe===33){if(ve=y.charCodeAt(Y+2),ve===91&&y.substr(Y+3,6)==="CDATA["){if(Z=y.indexOf("]]>",Y),Z===-1)return E("unclosed cdata");if(o&&(o(y.substring(Y+9,Z),f),m))return;Z+=3;continue}if(ve===45&&y.charCodeAt(Y+3)===45){if(Z=y.indexOf("-->",Y),Z===-1)return E("unclosed comment");if(c&&(c(y.substring(Y+4,Z),ur,f),m))return;Z+=3;continue}}if(oe===63){if(Z=y.indexOf("?>",Y),Z===-1)return E("unclosed question");if(l&&(l(y.substring(Y,Z+2),f),m))return;Z+=2;continue}for(ue=Y+1;;ue++){if(Se=y.charCodeAt(ue),isNaN(Se))return Z=-1,E("unclosed tag");if(Se===34)ve=y.indexOf('"',ue+1),ue=ve!==-1?ve:ue;else if(Se===39)ve=y.indexOf("'",ue+1),ue=ve!==-1?ve:ue;else if(Se===62){Z=ue;break}}if(oe===33){if(u&&(u(y.substring(Y,Z+1),ur,f),m))return;Z+=1;continue}if(ke={},oe===47){if(N=!1,j=!0,!D.length)return E("missing open tag");if(ue=Le=D.pop(),ve=Y+2+ue.length,y.substring(Y+2,ve)!==ue)return E("closing tag mismatch");for(;ve<Z;ve++)if(oe=y.charCodeAt(ve),!(oe===32||oe>8&&oe<14))return E("close tag")}else{if(y.charCodeAt(Z-1)===47?(ue=Le=y.substring(Y+1,Z-1),N=!0,j=!0):(ue=Le=y.substring(Y+1,Z),N=!0,j=!1),!(oe>96&&oe<123||oe>64&&oe<91||oe===95||oe===58))return E("illegal first char nodeName");for(ve=1,Et=ue.length;ve<Et;ve++)if(oe=ue.charCodeAt(ve),!(oe>96&&oe<123||oe>64&&oe<91||oe>47&&oe<59||oe===45||oe===95||oe==46)){if(oe===32||oe<14&&oe>8){Le=ue.substring(0,ve),ke=null;break}return E("invalid nodeName")}j||D.push(Le)}if(d){if(I=T,N&&(j||S.push(I),ke===null&&(p=ue.indexOf("xmlns",ve)!==-1)&&(re=ve,K=ue,R(),p=!1)),ze=Le,oe=Le.indexOf(":"),oe!==-1){if(Qe=T[Le.substring(0,oe)],!Qe)return E("missing namespace on <"+ze+">");Le=Le.substr(oe+1)}else Qe=T.xmlns;Qe&&(Le=Qe+":"+Le)}if(N&&(re=ve,K=ue,i&&(t?i(H,ur,j,f):i(Le,R,ur,j,f),m)))return;if(j){if(r&&(r(t?H:Le,ur,N,f),m))return;d&&(N?T=I:T=S.pop())}Z+=1}}}function N_(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var UR={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Kc="xsi:type";function L_(e){return e.xml&&e.xml.serialize}function B_(e){return L_(e)===Kc}function GR(e){return L_(e)==="property"}function KR(e){return e.charAt(0).toUpperCase()+e.slice(1)}function $_(e,t){return N_(t)?e.prefix+":"+KR(e.localName):e.name}function YR(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function qR(e,t){var n=Ot(e),i=t.getPackage(n.prefix);return YR(n,i)}function ji(e){return new Error(e)}function si(e){return e.$descriptor}function XR(e){O(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw ji("expected element");var n=this.elementsById,i=si(t),r=i.idProperty,o;if(r&&(o=t.get(r.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw ji("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Ta(){}Ta.prototype.handleEnd=function(){};Ta.prototype.handleText=function(){};Ta.prototype.handleNode=function(){};function ep(){}ep.prototype=Object.create(Ta.prototype);ep.prototype.handleNode=function(){return this};function go(){}go.prototype=Object.create(Ta.prototype);go.prototype.handleText=function(e){this.body=(this.body||"")+e};function Aa(e,t){this.property=e,this.context=t}Aa.prototype=Object.create(go.prototype);Aa.prototype.handleNode=function(e){if(this.element)throw ji("expected no sub nodes");return this.element=this.createReference(e),this};Aa.prototype.handleEnd=function(){this.element.id=this.body};Aa.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function tp(e,t){this.element=t,this.propertyDesc=e}tp.prototype=Object.create(go.prototype);tp.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Qf(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Yc(){}Yc.prototype=Object.create(go.prototype);Yc.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function Bt(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}Bt.prototype=Object.create(Yc.prototype);Bt.prototype.addReference=function(e){this.context.addReference(e)};Bt.prototype.handleText=function(e){var t=this.element,n=si(t),i=n.bodyProperty;if(!i)throw ji("unexpected body text <"+e+">");go.prototype.handleText.call(this,e)};Bt.prototype.handleEnd=function(){var e=this.body,t=this.element,n=si(t),i=n.bodyProperty;i&&e!==void 0&&(e=Qf(i.type,e),t.set(i.name,e))};Bt.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=si(n),r=this.context,o=new n({}),a=this.model,s;return A(t,function(c,l){var u=i.propertiesByName[l],f;u&&u.isReference?u.isMany?(f=c.split(" "),A(f,function(p){r.addReference({element:o,property:u.ns.name,id:p})})):r.addReference({element:o,property:u.ns.name,id:c}):(u?c=Qf(u.type,c):l!=="xmlns"&&(s=Ot(l,i.ns.prefix),a.getPackage(s.prefix)&&r.addWarning({message:"unknown attribute <"+l+">",element:o,property:l,value:c})),o.set(l,c))}),o};Bt.prototype.getPropertyForNode=function(e){var t=e.name,n=Ot(t),i=this.type,r=this.model,o=si(i),a=n.name,s=o.propertiesByName[a],c,l;if(s&&!s.isAttr)return B_(s)&&(c=e.attributes[Kc],c)?(c=qR(c,r),l=r.getType(c),O({},s,{effectiveType:si(l).name})):s;var u=r.getPackage(n.prefix);if(u){if(c=$_(n,u),l=r.getType(c),s=De(o.properties,function(f){return!f.isVirtual&&!f.isReference&&!f.isAttribute&&l.hasType(f.type)}),s)return O({},s,{effectiveType:si(l).name})}else if(s=De(o.properties,function(f){return!f.isReference&&!f.isAttribute&&f.type==="Element"}),s)return s;throw ji("unrecognized element <"+n.name+">")};Bt.prototype.toString=function(){return"ElementDescriptor["+si(this.type).name+"]"};Bt.prototype.valueHandler=function(e,t){return new tp(e,t)};Bt.prototype.referenceHandler=function(e){return new Aa(e,this.context)};Bt.prototype.handler=function(e){return e==="Element"?new eo(this.model,e,this.context):new Bt(this.model,e,this.context)};Bt.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,k_(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var o=r.element;return o!==void 0&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(O(o,{element:i}),this.context.addReference(o)):o.$parent=i),r};function np(e,t,n){Bt.call(this,e,t,n)}np.prototype=Object.create(Bt.prototype);np.prototype.createElement=function(e){var t=e.name,n=Ot(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&$_(n,o)||t;if(!r.hasType(a))throw ji("unexpected element <"+e.originalName+">");return Bt.prototype.createElement.call(this,e)};function eo(e,t,n){this.model=e,this.context=n}eo.prototype=Object.create(Yc.prototype);eo.prototype.createElement=function(e){var t=e.name,n=Ot(t),i=n.prefix,r=e.ns[i+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)};eo.prototype.handleChild=function(e){var t=new eo(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};eo.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function ip(e){e instanceof yn&&(e={model:e}),O(this,{lax:!1},e)}ip.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof Bt?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,a=new XR(O({},t,{rootHandler:i})),s=new I_({proxy:!0}),c=ZR();i.context=a,c.push(i);function l(S,T,I){var D=T(),B=D.line,N=D.column,j=D.data;j.charAt(0)==="<"&&j.indexOf(" ")!==-1&&(j=j.slice(0,j.indexOf(" "))+">");var Y="unparsable content "+(j?j+" ":"")+`detected
	line: `+B+`
	column: `+N+`
	nested error: `+S.message;if(I)return a.addWarning({message:Y,error:S}),!0;throw ji(Y)}function u(S,T){return l(S,T,!0)}function f(){var S=a.elementsById,T=a.references,I,D;for(I=0;D=T[I];I++){var B=D.element,N=S[D.id],j=si(B).propertiesByName[D.property];if(N||a.addWarning({message:"unresolved reference <"+D.id+">",element:D.element,property:D.property,value:D.id}),j.isMany){var Y=B.get(j.name),Z=Y.indexOf(D);Z===-1&&(Z=Y.length),N?Y[Z]=N:Y.splice(Z,1)}else B.set(j.name,N)}}function p(){c.pop().handleEnd()}var d=/^<\?xml /i,h=/ encoding="([^"]+)"/i,m=/^utf-8$/i;function v(S){if(d.test(S)){var T=h.exec(S),I=T&&T[1];!I||m.test(I)||a.addWarning({message:"unsupported document encoding <"+I+">, falling back to UTF-8"})}}function E(S,T){var I=c.peek();try{c.push(I.handleNode(S))}catch(D){l(D,T,o)&&c.push(new ep)}}function C(S,T){try{c.peek().handleText(S)}catch(I){u(I,T)}}function x(S,T){S.trim()&&C(S,T)}var y=r.getPackages().reduce(function(S,T){return S[T.uri]=T.prefix,S},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(y).on("openTag",function(S,T,I,D){var B=S.attrs||{},N=Object.keys(B).reduce(function(Y,Z){var ue=T(B[Z]);return Y[Z]=ue,Y},{}),j={name:S.name,originalName:S.originalName,attributes:N,ns:S.ns};E(j,D)}).on("question",v).on("closeTag",p).on("cdata",C).on("text",function(S,T,I){x(T(S),I)}).on("error",l).on("warn",u),new Promise(function(S,T){var I;try{s.parse(e),f()}catch(Y){I=Y}var D=i.element;!I&&!D&&(I=ji("failed to parse document as <"+i.type.$descriptor.name+">"));var B=a.warnings,N=a.references,j=a.elementsById;return I?(I.warnings=B,T(I)):S({rootElement:D,elementsById:j,references:N,warnings:B})})};ip.prototype.handler=function(e){return new np(this.model,e)};function ZR(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var JR=`<?xml version="1.0" encoding="UTF-8"?>
`,QR=/<|>|'|"|&|\n\r|\n/g,j_=/<|>|&/g;function eP(e){var t={},n={},i={},r=[],o=[];this.byUri=function(a){return n[a]||e&&e.byUri(a)},this.add=function(a,s){n[a.uri]=a,s?r.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return t[a||"xmlns"]},this.mapPrefix=function(a,s){t[a||"xmlns"]=s},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var s=a.uri,c=this.getNSKey(a);i[c]=this.byUri(s),e&&e.logUsed(a)},this.getUsed=function(a){function s(u){var f=c.getNSKey(u);return i[f]}var c=this,l=[].concat(r,o);return l.filter(s)}}function tP(e){return e.charAt(0).toLowerCase()+e.slice(1)}function nP(e,t){return N_(t)?tP(e):e}function F_(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function H_(e){return qt(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function iP(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function rP(e,t){return t.isGeneric?O({localName:t.ns.localName},e):O({localName:nP(t.ns.localName,t.$pkg)},e)}function oP(e,t){return O({localName:t.ns.localName},e)}function aP(e){var t=e.$descriptor;return Ee(t.properties,function(n){var i=n.name;if(n.isVirtual||!Vt(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var sP={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},cP={"<":"lt",">":"gt","&":"amp"};function z_(e,t,n){return e=qt(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function lP(e){return z_(e,QR,sP)}function uP(e){return z_(e,j_,cP)}function fP(e){return Ee(e,function(t){return t.isAttr})}function pP(e){return Ee(e,function(t){return!t.isAttr})}function rp(e){this.tagName=e}rp.prototype.build=function(e){return this.element=e,this};rp.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Cr(){}Cr.prototype.serializeValue=Cr.prototype.serializeTo=function(e){e.append(this.escape?uP(this.value):this.value)};Cr.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(j_)!==-1&&(this.escape=!0),this};function op(e){this.tagName=e}F_(op,Cr);op.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Ke(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Ke.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,o=t.isGeneric;return o?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(r=aP(e),this.parseAttributes(fP(r)),this.parseContainments(pP(r))),this.parseGenericAttributes(e,i),this};Ke.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return rP(t,e)};Ke.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return oP(t,e)};Ke.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Ke.prototype.nsAttributeName=function(e){var t;if(qt(e)?t=Ot(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:O({localName:t.localName},n)};Ke.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return A(e,function(r,o){var a;o==="$body"?n.push(new Cr().build({type:"String"},r)):o==="$children"?A(r,function(s){n.push(new Ke(t).build(s))}):o.indexOf("$")!==0&&(a=t.parseNsAttribute(e,o,r),a&&i.push({name:o,value:r}))}),i};Ke.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=Ot(t),o;if(r.prefix==="xmlns"&&(o={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(o,!0,!0);else{var a=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(a)}};Ke.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return A(i,function(o,a){var s=n.parseNsAttribute(e,a,o);s&&r.push(s)}),r};Ke.prototype.parseGenericAttributes=function(e,t){var n=this;A(t,function(i){if(i.name!==Kc)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};Ke.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;A(e,function(r){var o=i.get(r.name),a=r.isReference,s=r.isMany;if(s||(o=[o]),r.isBody)n.push(new Cr().build(r,o[0]));else if(k_(r.type))A(o,function(u){n.push(new op(t.addTagName(t.nsPropertyTagName(r))).build(r,u))});else if(a)A(o,function(u){n.push(new rp(t.addTagName(t.nsPropertyTagName(r))).build(u))});else{var c=B_(r),l=GR(r);A(o,function(u){var f;c?f=new qc(t,r):l?f=new Ke(t,r):f=new Ke(t),n.push(f.build(u))})}})};Ke.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new eP(i):t=i),t};Ke.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix,a=i.byUri(r);return(!a||n)&&i.add(e,t),i.mapPrefix(o,r),e};Ke.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),o=e.prefix,a=e.uri,s,c,l;if(!o&&!a)return{localName:e.localName};if(l=UR[o]||i&&(i.getPackage(o)||{}).uri,a=a||l||r.uriByPrefix(o),!a)throw new Error("no namespace uri given for prefix <"+o+">");if(e=r.byUri(a),!e){for(s=o,c=1;r.uriByPrefix(s);)s=o+"_"+c++;e=this.logNamespace({prefix:s,uri:a},l===a)}return o&&r.mapPrefix(o,a),e};Ke.prototype.parseAttributes=function(e){var t=this,n=this.element;A(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var o=[];A(r,function(a){o.push(a.id)}),r=o.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};Ke.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),H_(e)};Ke.prototype.addAttribute=function(e,t){var n=this.attrs;qt(t)&&(t=lP(t));var i=Ly(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};Ke.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=iP(n).concat(t)),A(t,function(i){e.append(" ").append(H_(i.name)).append('="').append(i.value).append('"')})};Ke.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Cr;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),A(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function qc(e,t){Ke.call(this,e,t)}F_(qc,Ke);qc.prototype.parseNsAttributes=function(e){var t=Ke.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Kc),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t};qc.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function dP(){this.value="",this.write=function(e){this.value+=e}}function hP(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function mP(e){e=O({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new dP,o=new hP(r,e.format);if(e.preamble&&o.append(JR),new Ke().build(n).serializeTo(o),!i)return r.value}return{toXML:t}}function Xc(e,t){yn.call(this,e,t)}Xc.prototype=Object.create(yn.prototype);Xc.prototype.fromXML=function(e,t,n){qt(t)||(n=t,t="bpmn:Definitions");var i=new ip(O({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Xc.prototype.toXML=function(e,t){var n=new mP(t);return new Promise(function(i,r){try{var o=n.toXML(e);return i({xml:o})}catch(a){return r(a)}})};var gP="BPMN20",vP="http://www.omg.org/spec/BPMN/20100524/MODEL",yP="bpmn",_P=[],bP=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],xP=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],EP={tagAlias:"lowerCase",typePrefix:"t"},wP={name:gP,uri:vP,prefix:yP,associations:_P,types:bP,enumerations:xP,xml:EP},SP="BPMNDI",CP="http://www.omg.org/spec/BPMN/20100524/DI",RP="bpmndi",PP=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],TP=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],AP=[],MP={name:SP,uri:CP,prefix:RP,types:PP,enumerations:TP,associations:AP},DP="DC",kP="http://www.omg.org/spec/DD/20100524/DC",OP="dc",IP=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],NP=[],LP={name:DP,uri:kP,prefix:OP,types:IP,associations:NP},BP="DI",$P="http://www.omg.org/spec/DD/20100524/DI",jP="di",FP=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],HP=[],zP={tagAlias:"lowerCase"},VP={name:BP,uri:$P,prefix:jP,types:FP,associations:HP,xml:zP},WP="bpmn.io colors for BPMN",UP="http://bpmn.io/schema/bpmn/biocolor/1.0",GP="bioc",KP=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],YP=[],qP=[],XP={name:WP,uri:UP,prefix:GP,types:KP,enumerations:YP,associations:qP},ZP="BPMN in Color",JP="http://www.omg.org/spec/BPMN/non-normative/color/1.0",QP="color",eT=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],tT=[],nT=[],iT={name:ZP,uri:JP,prefix:QP,types:eT,enumerations:tT,associations:nT},rT={bpmn:wP,bpmndi:MP,dc:LP,di:VP,bioc:XP,color:iT};function oT(e,t){var n=O({},rT,e);return new Xc(n,t)}var aT="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function V_(e){Vt(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(aT)}})}function jt(e,t){return e.$instanceOf(t)}function sT(e){return De(e.rootElements,function(t){return jt(t,"bpmn:Process")||jt(t,"bpmn:Collaboration")})}function cT(e){var t={},n=[],i={};function r(H,K){return function(re){H(re,K)}}function o(H){t[H.id]=H}function a(H){return t[H.id]}function s(H,K){var re=H.gfx;if(re)throw new Error(`already rendered ${St(H)}`);return e.element(H,i[H.id],K)}function c(H,K){return e.root(H,i[H.id],K)}function l(H,K){try{var re=i[H.id]&&s(H,K);return o(H),re}catch(ke){u(ke.message,{element:H,error:ke}),console.error(`failed to import ${St(H)}`,ke)}}function u(H,K){e.error(H,K)}var f=this.registerDi=function(K){var re=K.bpmnElement;re?i[re.id]?u(`multiple DI elements defined for ${St(re)}`,{element:re}):(i[re.id]=K,V_(re)):u(`no bpmnElement referenced in ${St(K)}`,{element:K})};function p(H){d(H.plane)}function d(H){f(H),A(H.planeElement,h)}function h(H){f(H)}this.handleDefinitions=function(K,re){var ke=K.diagrams;if(re&&ke.indexOf(re)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!re&&ke&&ke.length&&(re=ke[0]),!re)throw new Error("no diagram to display");i={},p(re);var R=re.plane;if(!R)throw new Error(`no plane for ${St(re)}`);var g=R.bpmnElement;if(!g)if(g=sT(K),g)u(`correcting missing bpmnElement on ${St(R)} to ${St(g)}`),R.bpmnElement=g,f(R);else throw new Error("no process or collaboration to display");var _=c(g,R);if(jt(g,"bpmn:Process")||jt(g,"bpmn:SubProcess"))v(g,_);else if(jt(g,"bpmn:Collaboration"))Le(g,_),E(K.rootElements,_);else throw new Error(`unsupported bpmnElement for ${St(R)}: ${St(g)}`);m(n)};var m=this.handleDeferred=function(){for(var K;n.length;)K=n.shift(),K()};function v(H,K){oe(H,K),B(H.ioSpecification,K),D(H.artifacts,K),o(H)}function E(H,K){var re=Ee(H,function(ke){return!a(ke)&&jt(ke,"bpmn:Process")&&ke.laneSets});re.forEach(r(v,K))}function C(H,K){l(H,K)}function x(H,K){A(H,r(C,K))}function y(H,K){l(H,K)}function S(H,K){l(H,K)}function T(H,K){l(H,K)}function I(H,K){l(H,K)}function D(H,K){A(H,function(re){jt(re,"bpmn:Association")?n.push(function(){I(re,K)}):I(re,K)})}function B(H,K){H&&(A(H.dataInputs,r(S,K)),A(H.dataOutputs,r(T,K)))}var N=this.handleSubProcess=function(K,re){oe(K,re),D(K.artifacts,re)};function j(H,K){var re=l(H,K);jt(H,"bpmn:SubProcess")&&N(H,re||K),jt(H,"bpmn:Activity")&&B(H.ioSpecification,K),n.push(function(){A(H.dataInputAssociations,r(y,K)),A(H.dataOutputAssociations,r(y,K))})}function Y(H,K){l(H,K)}function Z(H,K){l(H,K)}function ue(H,K){n.push(function(){var re=l(H,K);H.childLaneSet&&Et(H.childLaneSet,re||K),ze(H)})}function Et(H,K){A(H.lanes,r(ue,K))}function ve(H,K){A(H,r(Et,K))}function oe(H,K){Se(H.flowElements,K),H.laneSets&&ve(H.laneSets,K)}function Se(H,K){A(H,function(re){jt(re,"bpmn:SequenceFlow")?n.push(function(){Y(re,K)}):jt(re,"bpmn:BoundaryEvent")?n.unshift(function(){j(re,K)}):jt(re,"bpmn:FlowNode")?j(re,K):jt(re,"bpmn:DataObject")||(jt(re,"bpmn:DataStoreReference")||jt(re,"bpmn:DataObjectReference")?Z(re,K):u(`unrecognized flowElement ${St(re)} in context ${St(K&&K.businessObject)}`,{element:re,context:K}))})}function Qe(H,K){var re=l(H,K),ke=H.processRef;ke&&v(ke,re||K)}function Le(H,K){A(H.participants,r(Qe,K)),D(H.artifacts,K),n.push(function(){x(H.messageFlows,K)})}function ze(H){A(H.flowNodeRef,function(K){var re=K.get("lanes");re&&re.push(H)})}}function lT(e,t,n){var i,r,o,a,s=[];function c(l,u){var f={root:function(m,v){return i.add(m,v)},element:function(m,v,E){return i.add(m,v,E)},error:function(m,v){s.push({message:m,context:v})}},p=new cT(f);u=u||l.diagrams&&l.diagrams[0];var d=uT(l,u);if(!d)throw new Error("no diagram to display");A(d,function(m){p.handleDefinitions(l,m)});var h=u.plane.bpmnElement.id;o.setRootElement(o.findRoot(h+"_plane")||o.findRoot(h))}return new Promise(function(l,u){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),c(t,n),r.fire("import.render.complete",{error:a,warnings:s}),l({warnings:s})}catch(f){return f.warnings=s,u(f)}})}function uT(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!b(n,"bpmn:Process")&&!b(n,"bpmn:Collaboration")&&(i=fT(n));var r;b(i,"bpmn:Collaboration")?r=i:r=De(e.rootElements,function(l){if(b(l,"bpmn:Collaboration"))return De(l.participants,function(u){return u.processRef===i})});var o=[i];r&&(o=Rt(r.participants,function(l){return l.processRef}),o.push(r));var a=W_(o),s=[t],c=[n];return A(e.diagrams,function(l){if(l.plane){var u=l.plane.bpmnElement;a.indexOf(u)!==-1&&c.indexOf(u)===-1&&(s.push(l),c.push(u))}}),s}}function W_(e){var t=[];return A(e,function(n){n&&(t.push(n),t=t.concat(W_(n.flowElements)))}),t}function fT(e){for(var t=e;t;){if(b(t,"bpmn:Process"))return t;t=t.$parent}}var pT='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',U_=pT,G_={verticalAlign:"middle"},K_={color:"#404040"},dT={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},hT={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},mT={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},gT='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+U_+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',jn;function vT(){jn=He(gT),Ct(jn,dT),Ct(Ie("svg",jn),G_),Ct(Ie(".backdrop",jn),hT),Ct(Ie(".notice",jn),mT),Ct(Ie(".link",jn),K_,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function yT(){jn||(vT(),Yt.bind(jn,".backdrop","click",function(e){document.body.removeChild(jn)})),document.body.appendChild(jn)}function Ye(e){e=O({},bT,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),ET(this._container),this._init(this._container,this._moddle,e)}ie(Ye,Ki);Ye.prototype.importXML=async function(t,n){const i=this;function r(a){return i.get("eventBus").createEvent(a)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let a;try{a=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(p){throw this._emit("import.parse.complete",{error:p}),p}let s=a.rootElement;const c=a.references,l=a.warnings,u=a.elementsById;o=o.concat(l),s=this._emit("import.parse.complete",r({error:null,definitions:s,elementsById:u,references:c,warnings:o}))||s;const f=await this.importDefinitions(s,n);return o=o.concat(f.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(a){let s=a;throw o=o.concat(s.warnings||[]),zs(s,o),s=_T(s),this._emit("import.done",{error:s,warnings:s.warnings}),s}};Ye.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};Ye.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const o=new Error("no XML imported");throw zs(o,[]),o}if(typeof t=="string"&&(i=xT(n,t),!i)){const o=new Error("BPMNDiagram <"+t+"> not found");throw zs(o,[]),o}try{this.clear()}catch(o){throw zs(o,[]),o}const{warnings:r}=await lT(this,n,i);return{warnings:r}};Ye.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(a){i=a}const o=i?{error:i}:{xml:r};if(this._emit("saveXML.done",o),i)throw i;return o};Ye.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),o=Ie(":scope > defs",i._svg),a=Ch(r),s=o?"<defs>"+Ch(o)+"</defs>":"",c=r.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+s+a+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};Ye.prototype._setDefinitions=function(e){this._definitions=e};Ye.prototype.getModules=function(){return this._modules};Ye.prototype.clear=function(){this.getDefinitions()&&Ki.prototype.clear.call(this)};Ye.prototype.destroy=function(){Ki.prototype.destroy.call(this),Kn(this._container)};Ye.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};Ye.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Ye.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Ie(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Ye.prototype.getDefinitions=function(){return this._definitions};Ye.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Ye.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,i,r),s=O(gn(n,["additionalModules"]),{canvas:O({},n.canvas,{container:e}),modules:a});Ki.call(this,s),n&&n.container&&this.attachTo(n.container)};Ye.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Ye.prototype._createContainer=function(e){const t=He('<div class="bjs-container"></div>');return Ct(t,{width:tm(e.width),height:tm(e.height),position:e.position}),t};Ye.prototype._createModdle=function(e){const t=O({},this._moddleExtensions,e.moddleExtensions);return new oT(t)};Ye.prototype._modules=[];function zs(e,t){return e.warnings=t,e}function _T(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const bT={width:"100%",height:"100%",position:"relative"};function tm(e){return e+(fe(e)?"px":"")}function xT(e,t){return t&&De(e.diagrams,function(n){return n.id===t})||null}function ET(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+U_+"</a>",i=He(n);Ct(Ie("svg",i),G_),Ct(i,K_,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),me.bind(i,"click",function(r){yT(),r.preventDefault()})}function qi(e){Ye.call(this,e)}ie(qi,Ye);qi.prototype._modules=[MC,qC,nR,Wc,qn,Fc];qi.prototype._moddleExtensions={};function Ma(e){Ye.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}ie(Ma,Ye);Ma.prototype._createModdle=function(e){var t=Ye.prototype._createModdle.call(this,e);return t.ids=new Yn([32,36,1]),t};Ma.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};var wT=["c","C"],ST=["v","V"],CT=["y","Y"],Y_=["z","Z"];function RT(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function sn(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function ft(e,t){return e=ge(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function ap(e){return e.shiftKey}function PT(e){return sn(e)&&ft(wT,e)}function TT(e){return sn(e)&&ft(ST,e)}function AT(e){return sn(e)&&!ap(e)&&ft(Y_,e)}function MT(e){return sn(e)&&(ft(CT,e)||ft(Y_,e)&&ap(e))}var Zc="keyboard.keydown",DT="keyboard.keyup",nm="input-handle-modified-keys",kT=1e3;function bt(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}bt.$inject=["config.keyboard","eventBus"];bt.prototype._keydownHandler=function(e){this._keyHandler(e,Zc)};bt.prototype._keyupHandler=function(e){this._keyHandler(e,DT)};bt.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||Zc,i),n&&e.preventDefault()}};bt.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:(OT(e.target)||IT(e.target)&&ft([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)};bt.prototype._isModifiedKeyIgnored=function(e){if(!sn(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};bt.prototype._getAllowedModifiers=function(e){var t=Vi(e,"["+nm+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(nm).split(",")};bt.prototype.bind=function(e){this.unbind(),this._node=e,me.bind(e,"keydown",this._keydownHandler),me.bind(e,"keyup",this._keyupHandler),this._fire("bind")};bt.prototype.getBinding=function(){return this._node};bt.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),me.unbind(e,"keydown",this._keydownHandler),me.unbind(e,"keyup",this._keyupHandler)),this._node=null};bt.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};bt.prototype.addListener=function(e,t,n){lt(e)&&(n=t,t=e,e=kT),this._eventBus.on(n||Zc,e,t)};bt.prototype.removeListener=function(e,t){this._eventBus.off(t||Zc,e)};bt.prototype.hasModifier=RT;bt.prototype.isCmd=sn;bt.prototype.isShift=ap;bt.prototype.isKey=ft;function OT(e){return e&&($c(e,"input, textarea")||e.contentEditable==="true")}function IT(e){return e&&$c(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var NT=500;function vo(e,t){var n=this;e.on("editorActions.init",NT,function(i){var r=i.editorActions;n.registerBindings(t,r)})}vo.$inject=["eventBus","keyboard"];vo.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(AT(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(MT(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(PT(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(TT(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(ft(["+","Add","="],r)&&sn(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(ft(["-","Subtract"],r)&&sn(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(ft("0",r)&&sn(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(ft(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};const sp={__init__:["keyboard","keyboardBindings"],keyboard:["type",bt],keyboardBindings:["type",vo]};var LT={moveSpeed:50,moveSpeedAccelerated:200};function q_(e,t,n){var i=this;this._config=O({},LT,e||{}),t.addListener(r);function r(o){var a=o.keyEvent,s=i._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var c=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,l;switch(a.key){case"ArrowLeft":case"Left":l="left";break;case"ArrowUp":case"Up":l="up";break;case"ArrowRight":case"Right":l="right";break;case"ArrowDown":case"Down":l="down";break}return i.moveCanvas({speed:c,direction:l}),!0}}this.moveCanvas=function(o){var a=0,s=0,c=o.speed,l=c/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":a=l;break;case"up":s=l;break;case"right":a=-l;break;case"down":s=-l;break}n.scroll({dx:a,dy:s})}}q_.$inject=["config.keyboardMove","keyboard","canvas"];const X_={__depends__:[sp],__init__:["keyboardMove"],keyboardMove:["type",q_]};var BT=/^djs-cursor-.*$/;function Jc(e){var t=Ze(document.body);t.removeMatching(BT),e&&t.add("djs-cursor-"+e)}function Z_(){Jc(null)}var $T=5e3;function J_(e,t){t=t||"element.click";function n(){return!1}return e.once(t,$T,n),function(){e.off(t,n)}}function ea(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Tn(e,t){return{x:e.x-t.x,y:e.y-t.y}}var jT=15;function Q_(e,t){var n;e.on("element.mousedown",500,function(a){return o(a.originalEvent)});function i(a){var s=n.start,c=n.button,l=Sr(a),u=Tn(l,s);if(!n.dragging&&FT(u)>jT&&(n.dragging=!0,c===0&&J_(e),Jc("grab")),n.dragging){var f=n.last||n.start;u=Tn(l,f),t.scroll({dx:u.x,dy:u.y}),n.last=l}a.preventDefault()}function r(a){me.unbind(document,"mousemove",i),me.unbind(document,"mouseup",r),n=null,Z_()}function o(a){if(!Vi(a.target,".djs-draggable")){var s=a.button;if(!(s>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:s,start:Sr(a)},me.bind(document,"mousemove",i),me.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!n}}Q_.$inject=["eventBus","canvas"];function FT(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const eb={__init__:["moveCanvas"],moveCanvas:["type",Q_]};function zu(e){return Math.log(e)/Math.log(10)}function tb(e,t){var n=zu(e.min),i=zu(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function HT(e,t){return Math.max(e.min,Math.min(e.max,t))}var zT=Math.sign||function(e){return e>=0?1:-1},cp={min:.2,max:4},nb=10,VT=.1,WT=.75;function Xn(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Wt(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||WT;var i=this;t.on("canvas.init",function(r){i._init(e.enabled!==!1)})}Xn.$inject=["config.zoomScroll","eventBus","canvas"];Xn.prototype.scroll=function(t){this._canvas.scroll(t)};Xn.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Xn.prototype.zoom=function(t,n){var i=tb(cp,nb*2);this._totalDelta+=t,Math.abs(this._totalDelta)>VT&&(this._zoom(t,n,i),this._totalDelta=0)};Xn.prototype._handleWheel=function(t){if(!Vi(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var i=t.ctrlKey||d_()&&t.metaKey,r=t.shiftKey,o=-1*this._scale,a;if(i?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,i){var s=n.getBoundingClientRect(),c={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*zT(t.deltaY)*o,this.zoom(a,c)}else r?a={dx:o*t.deltaY,dy:0}:a={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(a)}};Xn.prototype.stepZoom=function(t,n){var i=tb(cp,nb);this._zoom(t,n,i)};Xn.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=zu(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var s=Math.pow(10,a);i.zoom(HT(cp,s),t)};Xn.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&me[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};Xn.prototype._init=function(e){this.toggle(e)};const ib={__init__:["zoomScroll"],zoomScroll:["type",Xn]};function ha(e){qi.call(this,e)}ie(ha,qi);ha.prototype._navigationModules=[X_,eb,ib];ha.prototype._modules=[].concat(qi.prototype._modules,ha.prototype._navigationModules);function Ql(e){return e&&e[e.length-1]}function im(e){return e.y}function rm(e){return e.x}var UT={left:rm,center:rm,right:function(e){return e.x+e.width},top:im,middle:im,bottom:function(e){return e.y+e.height}};function yo(e,t){this._modeling=e,this._rules=t}yo.$inject=["modeling","rules"];yo.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}};yo.prototype._isType=function(e,t){return t.indexOf(e)!==-1};yo.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,o={},a={},s=!1,c,l,u;function f(p,d){return Math.round((p[i]+d[i]+d[r])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][i];else if(this._isType(e,["right","bottom"]))u=Ql(t),o[e]=u[i]+u[r];else if(this._isType(e,["center","middle"])){if(A(t,function(p){var d=p[i]+Math.round(p[r]/2);a[d]?a[d].elements.push(p):a[d]={elements:[p],center:d}}),c=Gn(a,function(p){return p.elements.length>1&&(s=!0),p.elements.length}),s)return o[e]=Ql(c).center,o;l=t[0],t=Gn(t,function(p){return p[i]+p[r]}),u=Ql(t),o[e]=f(l,u)}return o};yo.prototype.trigger=function(e,t){var n=this._modeling,i,r=Ee(e,function(c){return!(c.waypoints||c.host||c.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:r}),ge(i)&&(r=i),!(r.length<2||!i)){var o=UT[t],a=Gn(r,o),s=this._alignmentPosition(t,a);n.alignElements(a,s)}};const GT={__init__:["alignElements"],alignElements:["type",yo]},KT=new Ca;function _o(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}_o.$inject=["eventBus"];_o.prototype.schedule=function(e,t=KT.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};_o.prototype._schedule=function(e,t){const{promise:n,resolve:i,reject:r}=YT();return{executionId:requestAnimationFrame(()=>{try{i(e())}catch(a){r(a)}}),promise:n}};_o.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};_o.prototype._cancel=function(e){cancelAnimationFrame(e.executionId)};function YT(){let e,t;return{promise:new Promise((i,r)=>{e=i,t=r}),resolve:e,reject:t}}const qT={scheduler:["type",_o]};var XT="djs-element-hidden",ds=".entry",ZT=1e3,om=8,JT=300;function ot(e,t,n,i){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=i,this._current=null,this._init()}ot.$inject=["canvas","elementRegistry","eventBus","scheduler"];ot.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?n.length===1?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var r=i.target,o=ge(r)?r:[r],a=o.filter(function(c){return n.includes(c)});if(a.length){e.close();var s=o.filter(function(c){return e._elementRegistry.get(c.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,i=e._current,r=ge(i.target)?i.target:[i.target];r.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};ot.prototype._createContainer=function(){var e=He('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};ot.prototype.registerProvider=function(e,t){t||(t=e,e=ZT),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};ot.prototype.getEntries=function(e){var t=this._getProviders(),n=ge(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return A(t,function(r){if(lt(r[n])){var o=r[n](e);lt(o)?i=o(i):A(o,function(a,s){i[s]=a})}}),i};ot.prototype.trigger=function(e,t,n){var i=this,r,o,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(r=kt(a,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(r,"hover",o,n)},JT);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(r,e,o,n)};ot.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var r=this._current.target,o=this._current.entries,a=o[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:n})!==!1){if(lt(s)){if(t==="click")return s(n,r,i)}else if(s[t])return s[t](n,r,i);n.preventDefault()}}}};ot.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};ot.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};ot.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),i;A(t,function(r,o){var a=r.group||"default",s=He(r.html||'<div class="entry" draggable="true"></div>'),c;kt(s,"data-action",o),c=Ie("[data-group="+pa(a)+"]",n),c||(c=He('<div class="group"></div>'),kt(c,"data-group",a),n.appendChild(c)),c.appendChild(s),r.className&&QT(s,r.className),r.title&&kt(s,"title",r.title),r.imageUrl&&(i=He("<img>"),kt(i,"src",r.imageUrl),i.style.width="100%",i.style.height="100%",s.appendChild(i))}),Ze(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};ot.prototype._createHtml=function(e){var t=this,n=He('<div class="djs-context-pad"></div>');return Yt.bind(n,ds,"click",function(i){t.trigger("click",i)}),Yt.bind(n,ds,"dragstart",function(i){t.trigger("dragstart",i)}),Yt.bind(n,ds,"mouseover",function(i){t.trigger("mouseover",i)}),Yt.bind(n,ds,"mouseout",function(i){t.trigger("mouseout",i)}),me.bind(n,"mousedown",function(i){i.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};ot.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&tA(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};ot.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};ot.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return ge(e)!==ge(n)?!1:ge(e)?e.length===n.length&&Pr(e,function(i){return n.includes(i)}):n===e};ot.prototype.isShown=function(){return this.isOpen()&&Ze(this._current.html).has("open")};ot.prototype.show=function(){this.isOpen()&&(Ze(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};ot.prototype.hide=function(){this.isOpen()&&(Ze(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};ot.prototype._getPosition=function(e){if(!ge(e)&&$e(e)){var t=this._canvas.viewbox(),n=eA(e),i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:i+om*this._canvas.zoom(),top:r}}var o=this._canvas.getContainer(),a=o.getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-a.left+om*this._canvas.zoom(),top:s.top-a.top}};ot.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(i){i in n&&(t.style[i]=n[i]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};ot.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,i=ge(n)?n:[n],r=i.some(function(o){return t._canvas.hasMarker(o,XT)});r?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};ot.prototype._getTargetBounds=function(e){var t=this,n=ge(e)?e:[e],i=n.map(function(r){return t._canvas.getGraphics(r)});return i.reduce(function(r,o){const a=o.getBoundingClientRect();return r.top=Math.min(r.top,a.top),r.right=Math.max(r.right,a.right),r.bottom=Math.max(r.bottom,a.bottom),r.left=Math.min(r.left,a.left),r.x=r.left,r.y=r.top,r.width=r.right-r.left,r.height=r.bottom-r.top,r},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function QT(e,t){var n=Ze(e);t=ge(t)?t:t.split(/\s+/g),t.forEach(function(i){n.add(i)})}function eA(e){return e.waypoints[e.waypoints.length-1]}function tA(e,t){return e=ge(e)?e:[e],t=ge(t)?t:[t],e.length===t.length&&Pr(e,function(n){return t.includes(n)})}const rb={__depends__:[Gc,qT,Wc],contextPad:["type",ot]};var Qc,Ge,ob,mr,am,ab,Vu,lp,Wu,Uu,ma={},sb=[],nA=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,up=Array.isArray;function ki(e,t){for(var n in t)e[n]=t[n];return e}function cb(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function lb(e,t,n){var i,r,o,a={};for(o in t)o=="key"?i=t[o]:o=="ref"?r=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?Qc.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return Vs(e,a,i,r,null)}function Vs(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++ob,__i:-1,__u:0};return r==null&&Ge.vnode!=null&&Ge.vnode(o),o}function el(e){return e.children}function Ws(e,t){this.props=e,this.context=t}function to(e,t){if(t==null)return e.__?to(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?to(e):null}function ub(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ub(e)}}function sm(e){(!e.__d&&(e.__d=!0)&&mr.push(e)&&!pc.__r++||am!==Ge.debounceRendering)&&((am=Ge.debounceRendering)||ab)(pc)}function pc(){var e,t,n,i,r,o,a,s;for(mr.sort(Vu);e=mr.shift();)e.__d&&(t=mr.length,i=void 0,o=(r=(n=e).__v).__e,a=[],s=[],n.__P&&((i=ki({},r)).__v=r.__v+1,Ge.vnode&&Ge.vnode(i),fp(n.__P,i,r,n.__n,n.__P.namespaceURI,32&r.__u?[o]:null,a,o??to(r),!!(32&r.__u),s),i.__v=r.__v,i.__.__k[i.__i]=i,db(a,i,s),i.__e!=o&&ub(i)),mr.length>t&&mr.sort(Vu));pc.__r=0}function fb(e,t,n,i,r,o,a,s,c,l,u){var f,p,d,h,m,v=i&&i.__k||sb,E=t.length;for(n.__d=c,iA(n,t,v),c=n.__d,f=0;f<E;f++)(d=n.__k[f])!=null&&(p=d.__i===-1?ma:v[d.__i]||ma,d.__i=f,fp(e,d,p,r,o,a,s,c,l,u),h=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&pp(p.ref,null,d),u.push(d.ref,d.__c||h,d)),m==null&&h!=null&&(m=h),65536&d.__u||p.__k===d.__k?c=pb(d,c,e):typeof d.type=="function"&&d.__d!==void 0?c=d.__d:h&&(c=h.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=c,n.__e=m}function iA(e,t,n){var i,r,o,a,s,c=t.length,l=n.length,u=l,f=0;for(e.__k=[],i=0;i<c;i++)(r=t[i])!=null&&typeof r!="boolean"&&typeof r!="function"?(a=i+f,(r=e.__k[i]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Vs(null,r,null,null,null):up(r)?Vs(el,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Vs(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,o=null,(s=r.__i=rA(r,n,a,u))!==-1&&(u--,(o=n[s])&&(o.__u|=131072)),o==null||o.__v===null?(s==-1&&f--,typeof r.type!="function"&&(r.__u|=65536)):s!==a&&(s==a-1?f--:s==a+1?f++:(s>a?f--:f++,r.__u|=65536))):r=e.__k[i]=null;if(u)for(i=0;i<l;i++)(o=n[i])!=null&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=to(o)),hb(o,o))}function pb(e,t,n){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=pb(i[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=to(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function rA(e,t,n,i){var r=e.key,o=e.type,a=n-1,s=n+1,c=t[n];if(c===null||c&&r==c.key&&o===c.type&&!(131072&c.__u))return n;if(i>(c!=null&&!(131072&c.__u)?1:0))for(;a>=0||s<t.length;){if(a>=0){if((c=t[a])&&!(131072&c.__u)&&r==c.key&&o===c.type)return a;a--}if(s<t.length){if((c=t[s])&&!(131072&c.__u)&&r==c.key&&o===c.type)return s;s++}}return-1}function cm(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||nA.test(t)?n:n+"px"}function hs(e,t,n,i,r){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||cm(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||cm(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=lp,e.addEventListener(t,o?Uu:Wu,o)):e.removeEventListener(t,o?Uu:Wu,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function lm(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=lp++;else if(t.t<n.u)return;return n(Ge.event?Ge.event(t):t)}}}function fp(e,t,n,i,r,o,a,s,c,l){var u,f,p,d,h,m,v,E,C,x,y,S,T,I,D,B,N=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),o=[s=t.__e=n.__e]),(u=Ge.__b)&&u(t);e:if(typeof N=="function")try{if(E=t.props,C="prototype"in N&&N.prototype.render,x=(u=N.contextType)&&i[u.__c],y=u?x?x.props.value:u.__:i,n.__c?v=(f=t.__c=n.__c).__=f.__E:(C?t.__c=f=new N(E,y):(t.__c=f=new Ws(E,y),f.constructor=N,f.render=aA),x&&x.sub(f),f.props=E,f.state||(f.state={}),f.context=y,f.__n=i,p=f.__d=!0,f.__h=[],f._sb=[]),C&&f.__s==null&&(f.__s=f.state),C&&N.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=ki({},f.__s)),ki(f.__s,N.getDerivedStateFromProps(E,f.__s))),d=f.props,h=f.state,f.__v=t,p)C&&N.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),C&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(C&&N.getDerivedStateFromProps==null&&E!==d&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(E,y),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(E,f.__s,y)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(f.props=E,f.state=f.__s,f.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(j){j&&(j.__=t)}),S=0;S<f._sb.length;S++)f.__h.push(f._sb[S]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(E,f.__s,y),C&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(d,h,m)})}if(f.context=y,f.props=E,f.__P=e,f.__e=!1,T=Ge.__r,I=0,C){for(f.state=f.__s,f.__d=!1,T&&T(t),u=f.render(f.props,f.state,f.context),D=0;D<f._sb.length;D++)f.__h.push(f._sb[D]);f._sb=[]}else do f.__d=!1,T&&T(t),u=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++I<25);f.state=f.__s,f.getChildContext!=null&&(i=ki(ki({},i),f.getChildContext())),C&&!p&&f.getSnapshotBeforeUpdate!=null&&(m=f.getSnapshotBeforeUpdate(d,h)),fb(e,up(B=u!=null&&u.type===el&&u.key==null?u.props.children:u)?B:[B],t,n,i,r,o,a,s,c,l),f.base=t.__e,t.__u&=-161,f.__h.length&&a.push(f),v&&(f.__E=f.__=null)}catch(j){if(t.__v=null,c||o!=null){for(t.__u|=c?160:128;s&&s.nodeType===8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else t.__e=n.__e,t.__k=n.__k;Ge.__e(j,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=oA(n.__e,t,n,i,r,o,a,c,l);(u=Ge.diffed)&&u(t)}function db(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)pp(n[i],n[++i],n[++i]);Ge.__c&&Ge.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){Ge.__e(o,r.__v)}})}function oA(e,t,n,i,r,o,a,s,c){var l,u,f,p,d,h,m,v=n.props,E=t.props,C=t.type;if(C==="svg"?r="http://www.w3.org/2000/svg":C==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((d=o[l])&&"setAttribute"in d==!!C&&(C?d.localName===C:d.nodeType===3)){e=d,o[l]=null;break}}if(e==null){if(C===null)return document.createTextNode(E);e=document.createElementNS(r,C,E.is&&E),s&&(Ge.__m&&Ge.__m(t,o),s=!1),o=null}if(C===null)v===E||s&&e.data===E||(e.data=E);else{if(o=o&&Qc.call(e.childNodes),v=n.props||ma,!s&&o!=null)for(v={},l=0;l<e.attributes.length;l++)v[(d=e.attributes[l]).name]=d.value;for(l in v)if(d=v[l],l!="children"){if(l=="dangerouslySetInnerHTML")f=d;else if(!(l in E)){if(l=="value"&&"defaultValue"in E||l=="checked"&&"defaultChecked"in E)continue;hs(e,l,null,d,r)}}for(l in E)d=E[l],l=="children"?p=d:l=="dangerouslySetInnerHTML"?u=d:l=="value"?h=d:l=="checked"?m=d:s&&typeof d!="function"||v[l]===d||hs(e,l,d,v[l],r);if(u)s||f&&(u.__html===f.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(f&&(e.innerHTML=""),fb(e,up(p)?p:[p],t,n,i,C==="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,a,o?o[0]:n.__k&&to(n,0),s,c),o!=null)for(l=o.length;l--;)cb(o[l]);s||(l="value",C==="progress"&&h==null?e.removeAttribute("value"):h!==void 0&&(h!==e[l]||C==="progress"&&!h||C==="option"&&h!==v[l])&&hs(e,l,h,v[l],r),l="checked",m!==void 0&&m!==e[l]&&hs(e,l,m,v[l],r))}return e}function pp(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Ge.__e(r,n)}}function hb(e,t,n){var i,r;if(Ge.unmount&&Ge.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||pp(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){Ge.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&hb(i[r],t,n||typeof e.type!="function");n||cb(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function aA(e,t,n){return this.constructor(e,n)}function mb(e,t,n){var i,r,o,a;Ge.__&&Ge.__(e,t),r=(i=typeof n=="function")?null:t.__k,o=[],a=[],fp(t,e=(!i&&n||t).__k=lb(el,null,[e]),r||ma,ma,t.namespaceURI,!i&&n?[n]:r?null:t.firstChild?Qc.call(t.childNodes):null,o,!i&&n?n:r?r.__e:t.firstChild,i,a),db(o,e,a)}Qc=sb.slice,Ge={__e:function(e,t,n,i){for(var r,o,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),a=r.__d),a)return r.__E=r}catch(s){e=s}throw e}},ob=0,Ws.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ki({},this.state),typeof e=="function"&&(e=e(ki({},n),this.props)),e&&ki(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),sm(this))},Ws.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),sm(this))},Ws.prototype.render=el,mr=[],ab=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vu=function(e,t){return e.__v.__b-t.__v.__b},pc.__r=0,lp=0,Wu=lm(!1),Uu=lm(!0);var gb=function(e,t,n,i){var r;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],s=t[o]?(t[0]|=a?1:2,n[t[o++]]):t[++o];a===3?i[0]=s:a===4?i[1]=Object.assign(i[1]||{},s):a===5?(i[1]=i[1]||{})[t[++o]]=s:a===6?i[1][t[++o]]+=s+"":a?(r=e.apply(s,gb(e,s,n,["",null])),i.push(r),s[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):i.push(s)}return i},um=new Map;function sA(e){var t=um.get(this);return t||(t=new Map,um.set(this,t)),(t=gb(this,t.get(e)||(t.set(e,t=function(n){for(var i,r,o=1,a="",s="",c=[0],l=function(p){o===1&&(p||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?c.push(0,p,a):o===3&&(p||a)?(c.push(3,p,a),o=2):o===2&&a==="..."&&p?c.push(4,p,0):o===2&&a&&!p?c.push(5,0,!0,a):o>=5&&((a||!p&&o===5)&&(c.push(o,0,a,r),o=6),p&&(c.push(o,p,0,r),o=6)),a=""},u=0;u<n.length;u++){u&&(o===1&&l(),l(u));for(var f=0;f<n[u].length;f++)i=n[u][f],o===1?i==="<"?(l(),c=[c],o=3):a+=i:o===4?a==="--"&&i===">"?(o=1,a=""):a=i+a[0]:s?i===s?s="":a+=i:i==='"'||i==="'"?s=i:i===">"?(l(),o=1):o&&(i==="="?(o=5,r=a,a=""):i==="/"&&(o<5||n[u][f+1]===">")?(l(),o===3&&(c=c[0]),o=c,(c=c[0]).push(2,0,o),o=0):i===" "||i==="	"||i===`
`||i==="\r"?(l(),o=2):a+=i),o===3&&a==="!--"&&(o=4,c=c[0])}return l(),c}(e)),t),arguments,[])).length>1?t:t[0]}var Je=sA.bind(lb),no,tt,eu,fm,ga=0,vb=[],at=Ge,pm=at.__b,dm=at.__r,hm=at.diffed,mm=at.__c,gm=at.unmount,vm=at.__;function tl(e,t){at.__h&&at.__h(tt,e,ga||t),ga=0;var n=tt.__H||(tt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tu(e){return ga=1,cA(_b,e)}function cA(e,t,n){var i=tl(no++,2);if(i.t=e,!i.__c&&(i.__=[_b(void 0,t),function(s){var c=i.__N?i.__N[0]:i.__[0],l=i.t(c,s);c!==l&&(i.__N=[l,i.__[1]],i.__c.setState({}))}],i.__c=tt,!tt.u)){var r=function(s,c,l){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!o||o.call(this,s,c,l);var f=!1;return u.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(f=!0)}}),!(!f&&i.__c.props===s)&&(!o||o.call(this,s,c,l))};tt.u=!0;var o=tt.shouldComponentUpdate,a=tt.componentWillUpdate;tt.componentWillUpdate=function(s,c,l){if(this.__e){var u=o;o=void 0,r(s,c,l),o=u}a&&a.call(this,s,c,l)},tt.shouldComponentUpdate=r}return i.__N||i.__}function Gu(e,t){var n=tl(no++,3);!at.__s&&dp(n.__H,t)&&(n.__=e,n.i=t,tt.__H.__h.push(n))}function Ku(e,t){var n=tl(no++,4);!at.__s&&dp(n.__H,t)&&(n.__=e,n.i=t,tt.__h.push(n))}function yb(e){return ga=5,io(function(){return{current:e}},[])}function io(e,t){var n=tl(no++,7);return dp(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ko(e,t){return ga=8,io(function(){return e},t)}function lA(){for(var e;e=vb.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Us),e.__H.__h.forEach(Yu),e.__H.__h=[]}catch(t){e.__H.__h=[],at.__e(t,e.__v)}}at.__b=function(e){tt=null,pm&&pm(e)},at.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),vm&&vm(e,t)},at.__r=function(e){dm&&dm(e),no=0;var t=(tt=e.__c).__H;t&&(eu===tt?(t.__h=[],tt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(Us),t.__h.forEach(Yu),t.__h=[],no=0)),eu=tt},at.diffed=function(e){hm&&hm(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(vb.push(t)!==1&&fm===at.requestAnimationFrame||((fm=at.requestAnimationFrame)||uA)(lA)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),eu=tt=null},at.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Us),n.__h=n.__h.filter(function(i){return!i.__||Yu(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],at.__e(i,n.__v)}}),mm&&mm(e,t)},at.unmount=function(e){gm&&gm(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Us(i)}catch(r){t=r}}),n.__H=void 0,t&&at.__e(t,n.__v))};var ym=typeof requestAnimationFrame=="function";function uA(e){var t,n=function(){clearTimeout(i),ym&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);ym&&(t=requestAnimationFrame(n))}function Us(e){var t=tt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),tt=t}function Yu(e){var t=tt;e.__c=e.__(),tt=t}function dp(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function _b(e,t){return typeof t=="function"?t(e):t}function bb(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=bb(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function dc(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=bb(e))&&(i&&(i+=" "),i+=t);return i}function fA(e){const{headerEntries:t,onSelect:n,selectedEntry:i,setSelectedEntry:r,title:o}=e,a=io(()=>pA(t),[t]);return Je`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${a.map(s=>Je`
        <ul key=${s.id} class="djs-popup-header-group" data-header-group=${s.id}>

          ${s.entries.map(c=>Je`
            <li key=${c.id}>
              <${c.action?"button":"span"}
                class=${dA(c,c===i)}
                onClick=${l=>c.action&&n(l,c)}
                title=${c.title||c.label}
                data-id=${c.id}
                onMouseEnter=${()=>c.action&&r(c)}
                onMouseLeave=${()=>c.action&&r(null)}
                onFocus=${()=>c.action&&r(c)}
                onBlur=${()=>c.action&&r(null)}
              >
                ${c.imageUrl&&Je`<img class="djs-popup-entry-icon" src=${c.imageUrl} alt="" />`||c.imageHtml&&Je`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:c.imageHtml}} />`}
                ${c.label?Je`
                  <span class="djs-popup-label">${c.label}</span>
                `:null}
              </${c.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function pA(e){return e.reduce((t,n)=>{const i=n.group||"default",r=t.find(o=>o.id===i);return r?r.entries.push(n):t.push({id:i,entries:[n]}),t},[])}function dA(e,t){return dc("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function hA(e){const{entry:t,selected:n,onMouseEnter:i,onMouseLeave:r,onAction:o}=e;return Je`
    <li
      class=${dc("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${i}
      onBlur=${r}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${a=>o(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${dc("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&Je`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&Je`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?Je`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&Je`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&Je`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function mA(e){const{selectedEntry:t,setSelectedEntry:n,entries:i,...r}=e,o=yb(),a=io(()=>gA(i),[i]);return Ku(()=>{const s=o.current;if(!s)return;const c=s.querySelector(".selected");c&&vA(c)},[t]),Je`
    <div class="djs-popup-results" ref=${o}>
      ${a.map(s=>Je`
        ${s.name&&Je`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(c=>Je`
            <${hA}
              key=${c.id}
              entry=${c}
              selected=${c===t}
              onMouseEnter=${()=>n(c)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function gA(e){const t=[],n=o=>t.find(a=>o.id===a.id),i=o=>!!n(o),r=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const a=o.group?r(o.group):{id:"default"};i(a)?n(a).entries.push(o):t.push({...a,entries:[o]})}),t}function vA(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function yA(e){const{onClose:t,onSelect:n,className:i,headerEntries:r,position:o,title:a,width:s,scale:c,search:l,emptyPlaceholder:u,entries:f,onOpened:p,onClosed:d}=e,h=io(()=>mt(l)?f.length>5:!1,[l,f]),[m,v]=tu(""),E=ko((j,Y)=>{if(!h)return j;const Z=ue=>{if(!Y)return(ue.rank||0)>=0;if(ue.searchable===!1)return!1;const Et=[ue.description||"",ue.label||"",ue.search||""].map(ve=>ve.toLowerCase());return Y.toLowerCase().split(/\s/g).every(ve=>Et.some(oe=>oe.includes(ve)))};return j.filter(Z)},[h]),[C,x]=tu(E(f,m)),[y,S]=tu(C[0]),T=ko(j=>{(!y||!j.includes(y))&&S(j[0]),x(j)},[y,x,S]);Gu(()=>{T(E(f,m))},[m,f]);const I=ko(j=>{let Z=C.indexOf(y)+j;Z<0&&(Z=C.length-1),Z>=C.length&&(Z=0),S(C[Z])},[C,y,S]),D=ko(j=>{if(j.key==="Enter"&&y)return n(j,y);if(j.key==="ArrowUp")return I(-1),j.preventDefault();if(j.key==="ArrowDown")return I(1),j.preventDefault()},[n,y,I]),B=ko(j=>{$c(j.target,"input")&&v(()=>j.target.value)},[v]);Gu(()=>(p(),()=>{d()}),[]);const N=io(()=>a||r.length>0,[a,r]);return Je`
    <${_m}
      onClose=${t}
      onKeyup=${B}
      onKeydown=${D}
      className=${i}
      position=${o}
      width=${s}
      scale=${c}
    >
      ${N&&Je`
        <${fA}
          headerEntries=${r}
          onSelect=${n}
          selectedEntry=${y}
          setSelectedEntry=${S}
          title=${a}
        />
      `}
      ${f.length>0&&Je`
        <div class="djs-popup-body">

          ${h&&Je`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${a}" />
          </div>
          `}

          <${mA}
            entries=${C}
            selectedEntry=${y}
            setSelectedEntry=${S}
            onAction=${n}
          />
        </div>
      `}
    ${u&&C.length===0&&Je`
      <div class="djs-popup-no-results">${lt(u)?u(m):u}</div>
    `}
    </${_m}>
  `}function _m(e){const{onClose:t,onKeydown:n,onKeyup:i,className:r,children:o,position:a}=e,s=yb();return Ku(()=>{if(typeof a!="function")return;const c=s.current,l=a(c);c.style.left=`${l.x}px`,c.style.top=`${l.y}px`},[s.current,a]),Ku(()=>{const c=s.current;if(!c)return;(c.querySelector("input")||c).focus()},[]),Gu(()=>{const c=u=>{if(u.key==="Escape")return u.preventDefault(),t()},l=u=>{if(!Vi(u.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",c),document.body.addEventListener("click",l),()=>{document.documentElement.removeEventListener("keydown",c),document.body.removeEventListener("click",l)}},[]),Je`
    <div
      class=${dc("djs-popup",r)}
      style=${_A(e)}
      onKeydown=${n}
      onKeyup=${i}
      ref=${s}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function _A(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var bA="data-id",xb=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],xA=1e3;function qe(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var i=mt(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",r=>{const o=this.isOpen()&&this._current.target;r.element===o&&this.refresh()})}qe.$inject=["config.popupMenu","eventBus","canvas"];qe.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:i,emptyPlaceholder:r,options:o}=this._current,a=Object.entries(n).map(([p,d])=>({id:p,...d})),s=Object.entries(i).map(([p,d])=>({id:p,...d})),c=e&&(p=>this._ensureVisible(p,e)),l=this._updateScale(this._current.container);mb(Je`
      <${yA}
        onClose=${p=>this.close(p)}
        onSelect=${(p,d,h)=>this.trigger(p,d,h)}
        position=${c}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${r}
        scale=${l}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};qe.prototype.open=function(e,t,n,i){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:o,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:r,headerEntries:o,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()};qe.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:i,emptyPlaceholder:r}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:i,emptyPlaceholder:r},this._emit("refresh"),this._render()};qe.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:i,headerEntries:r,emptyPlaceholder:o,empty:!(Object.keys(i).length||Object.keys(r).length)}};qe.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};qe.prototype.reset=function(){const e=this._current.container;mb(null,e),Kn(e)};qe.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};qe.prototype._onOpened=function(){this._emit("opened")};qe.prototype._onClosed=function(){this._emit("closed")};qe.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const i=He(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(i),i};qe.prototype._bindAutoClose=function(){this._eventBus.once(xb,this.close,this)};qe.prototype._unbindAutoClose=function(){this._eventBus.off(xb,this.close,this)};qe.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,i,r=e;return t!==!0&&(t===!1?(n=1,i=1):(n=t.min,i=t.max),mt(n)&&e<n&&(r=n),mt(i)&&e>i&&(r=i)),r};qe.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),r={},o=t.x,a=t.y;return t.x+i.width>n.width&&(r.x=!0),t.y+i.height>n.height&&(r.y=!0),r.x&&r.y?(o=t.x-i.width,a=t.y-i.height):r.x?(o=t.x-i.width,a=t.y):r.y&&t.y<i.height?(o=t.x,a=10):r.y&&(o=t.x,a=t.y-i.height),t.y<n.top&&(a=t.y+i.height),{x:o,y:a}};qe.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};qe.prototype.registerProvider=function(e,t,n){n||(n=t,t=xA),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})};qe.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};qe.prototype._getEntries=function(e,t){var n={};return A(t,function(i){if(!i.getPopupMenuEntries){A(i.getEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=gn(o,["id"])});return}var r=i.getPopupMenuEntries(e);lt(r)?n=r(n):A(r,function(o,a){n[a]=o})}),n};qe.prototype._getHeaderEntries=function(e,t){var n={};return A(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;A(i.getHeaderEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=gn(o,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);lt(r)?n=r(n):A(r,function(o,a){n[a]=o})}),n};qe.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>lt(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};qe.prototype.isOpen=function(){return!!this._current};qe.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let r=Vi(e.delegateTarget||e.target,".entry",!0),o=kt(r,bA);t={id:o,...this._getEntry(o)}}const i=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(lt(i)){if(n==="click")return i(e,t)}else if(i[n])return i[n](e,t)}};qe.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const hp={__init__:["popupMenu"],popupMenu:["type",qe]};var Eb={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},EA=900;function bo(e,t,n,i){e.registerProvider(EA,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}bo.$inject=["contextPad","popupMenu","translate","canvas"];bo.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&O(t,this._getEntries(e)),t};bo.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};bo.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${Eb.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);O(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}};bo.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,i=n.getBoundingClientRect(),r={x:i.left,y:i.bottom+t};return r};var wA=["left","center","right","top","middle","bottom"];function Da(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}Da.$inject=["popupMenu","alignElements","translate","rules"];Da.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&O(t,this._getEntries(e)),t};Da.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Da.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,r={};return A(wA,function(o){r["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:Eb[o],action:function(){t.trigger(e,o),i.close()}}}),r};function _n(e){G.call(this,e),this.init()}_n.$inject=["eventBus"];ie(_n,G);_n.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(o,a,s){return n(o)},!0)})};_n.prototype.init=function(){};function nl(e){_n.call(this,e)}nl.$inject=["eventBus"];ie(nl,_n);nl.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=Ee(t,function(i){return!(i.waypoints||i.host||i.labelTarget)});return n=zc(n),n.length<2?!1:n})};const SA={__depends__:[GT,rb,hp],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",bo],alignElementsMenuProvider:["type",Da],bpmnAlignElements:["type",nl]};var CA=10,wb=50,RA=250;function mp(e,t,n,i){for(var r;r=PA(e,n,t);)n=i(t,n,r);return n}function gp(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=e[o];if(a){var s=o==="x"?"width":"height",c=a.margin,l=a.minDistance;c<0?r[o]=Math.min(i[o]+c-t[s]/2,n[o]-l+c):r[o]=Math.max(i[o]+i[s]+c+t[s]/2,n[o]+l+c)}}),r}}function PA(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=AA(e);return De(r,function(o){if(o===n)return!1;var a=Tt(o,i,CA);return a==="intersect"})}function TA(e,t){t||(t={});function n(h){return h.source===e?1:-1}var i=t.defaultDistance||wb,r=t.direction||"e",o=t.filter,a=t.getWeight||n,s=t.maxDistance||RA,c=t.reference||"start";o||(o=kA);function l(h,m){return r==="n"?c==="start"?le(h).top-le(m).bottom:c==="center"?le(h).top-pe(m).y:le(h).top-le(m).top:r==="w"?c==="start"?le(h).left-le(m).right:c==="center"?le(h).left-pe(m).x:le(h).left-le(m).left:r==="s"?c==="start"?le(m).top-le(h).bottom:c==="center"?pe(m).y-le(h).bottom:le(m).bottom-le(h).bottom:c==="start"?le(m).left-le(h).right:c==="center"?pe(m).x-le(h).right:le(m).right-le(h).right}var u=e.incoming.filter(o).map(function(h){var m=a(h),v=m<0?l(h.source,e):l(e,h.source);return{id:h.source.id,distance:v,weight:m}}),f=e.outgoing.filter(o).map(function(h){var m=a(h),v=m>0?l(e,h.target):l(h.target,e);return{id:h.target.id,distance:v,weight:m}}),p=u.concat(f).reduce(function(h,m){return h[m.id+"__weight_"+m.weight]=m,h},{}),d=Xt(p,function(h,m){var v=m.distance,E=m.weight;return v<0||v>s||(h[String(v)]||(h[String(v)]=0),h[String(v)]+=1*E,(!h.distance||h[h.distance]<h[String(v)])&&(h.distance=v)),h},{});return d.distance||i}function AA(e){var t=nu(e);return e.host&&(t=t.concat(nu(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(nu(i))},[]))),t}function nu(e){return DA(e).concat(MA(e))}function MA(e){return e.incoming.map(function(t){return t.source})}function DA(e){return e.outgoing.map(function(t){return t.target})}function kA(){return!0}var OA=100;function Sb(e,t,n){e.on("autoPlace",OA,function(i){var r=i.shape,o=i.source;return IA(o,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,o){e.fire("autoPlace.start",{source:i,shape:r});var a=e.fire("autoPlace",{source:i,shape:r}),s=t.appendShape(i,r,a,i.parent,o);return e.fire("autoPlace.end",{source:i,shape:s}),s}}Sb.$inject=["eventBus","modeling","canvas"];function IA(e,t,n){n||(n={});var i=n.defaultDistance||wb,r=pe(e),o=le(e);return{x:o.right+i+t.width/2,y:r.y}}function Cb(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}Cb.$inject=["eventBus","selection"];const NA={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",Sb],autoPlaceSelectionBehavior:["type",Cb]};function ro(e,t){for(qt(t)&&(t=[t]);e=e.parent;)if(be(e,t))return e;return null}function Rb(e,t){var n=ro(e,"bpmn:Process");if(n)return!0;var i=["bpmn:Participant","bpmn:Lane"];if(n=ro(e,i),n)return dt(n);if(be(e,i))return dt(e);var r;for(r=X(e);r&&!b(r,"bpmn:Process");r=r.$parent);if(!t)return!0;var o=t.find(function(a){var s=X(a);return s&&s.get("processRef")===r});return o?dt(o):!0}function Pb(e,t,n){var i=Rb(e,n);if(b(t,"bpmn:TextAnnotation"))return BA(e,t,i);if(be(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return $A(e,t,i);if(b(t,"bpmn:FlowNode"))return LA(e,t,i)}function LA(e,t,n){var i=le(e),r=pe(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},a=TA(e,{filter:function(d){return b(d,"bpmn:SequenceFlow")},direction:o.directionHint}),s=30,c=o.minDistance,l=o.baseOrientation;b(e,"bpmn:BoundaryEvent")&&(l=Tt(e,e.host,-25),l.indexOf(o.boundaryOrientation)!==-1&&(s*=-1));var u=n?{x:i.right+a+t.width/2,y:r.y+bm(l,c,o)}:{x:r.x+bm(l,c,o),y:i.bottom+a+t.height/2},f={margin:s,minDistance:c},p=n?{y:f}:{x:f};return mp(e,t,u,gp(p))}function bm(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function BA(e,t,n){var i=le(e),r=n?{x:i.right+t.width/2,y:i.top-50-t.height/2}:{x:i.right+50+t.width/2,y:i.bottom+t.height/2};$e(e)&&(r=pe(e),n?(r.x+=100,r.y-=50):(r.x+=100,r.y+=50));var o={margin:n?-30:30,minDistance:20},a=n?{y:o}:{x:o};return mp(e,t,r,gp(a))}function $A(e,t,n){var i=le(e),r=n?{x:i.right-10+t.width/2,y:i.bottom+40+t.width/2}:{x:i.left-40-t.width/2,y:i.bottom-10+t.height/2},o={margin:30,minDistance:30},a=n?{x:o}:{y:o};return mp(e,t,r,gp(a))}function Tb(e,t){e.on("autoPlace",function(n){var i=n.shape,r=n.source;return Pb(r,i,t)})}Tb.$inject=["eventBus","elementRegistry"];const vp={__depends__:[NA],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",Tb]};function hi(e,t,n,i){G.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(o){var a=o.context,s=a.hints||{},c=a.shape,l=a.parent||a.newParent;s.autoResize!==!1&&r._expand([c],l)}),this.postExecuted(["elements.move"],function(o){var a=o.context,s=Bf($f(a.closure.topLevel)),c=a.hints,l=c?c.autoResize:!0;if(l!==!1){var u=uo(s,function(f){return f.parent.id});A(u,function(f,p){ge(l)&&(f=f.filter(function(d){return De(l,Pn({id:d.id}))})),r._expand(f,p)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,s=a.hints,c=a.shape;s&&s.autoResize===!1||c.collapsed||r._expand(c.children||[],c)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,s=a.hints,c=a.shape,l=c.parent;s&&s.autoResize===!1||l&&r._expand([c],l)})}hi.$inject=["eventBus","elementRegistry","modeling","rules"];ie(hi,G);hi.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=le(pt(e)),o=le(t),a={};return r.top-o.top<i.top&&(a.top=r.top-n.top),r.left-o.left<i.left&&(a.left=r.left-n.left),o.right-r.right<i.right&&(a.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(a.bottom=r.bottom+n.bottom),Hc(O({},o,a))};hi.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(jA(i,t)){var r=FA(An(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var o=t.parent;o&&this._expand([t],o)}}};hi.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};hi.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};hi.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function jA(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function FA(e,t){var n="";return e=le(e),t=le(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function il(e){e.invoke(hi,this)}il.$inject=["injector"];ie(il,hi);il.prototype.resize=function(e,t,n){b(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function ka(e){_n.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}ka.$inject=["eventBus"];ie(ka,_n);ka.prototype.canResize=function(e,t){return!1};function rl(e,t){ka.call(this,e),this._modeling=t}ie(rl,ka);rl.$inject=["eventBus","modeling"];rl.prototype.canResize=function(e,t){if(b(t.di,"bpmndi:BPMNPlane")||!b(t,"bpmn:Participant")&&!b(t,"bpmn:Lane")&&!b(t,"bpmn:SubProcess"))return!1;var n=!0;return A(e,function(i){if(b(i,"bpmn:Lane")||Me(i)){n=!1;return}}),n};const HA={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",il],bpmnAutoResizeProvider:["type",rl]};var xm=1500;function Ab(e,t,n){var i=this,r=n.get("dragging",!1);function o(a){if(!a.hover){var s=a.originalEvent,c=i._findTargetGfx(s),l=c&&e.get(c);c&&l&&(a.stopPropagation(),r.hover({element:l,gfx:c}),r.move(s))}}r&&t.on("drag.start",function(a){t.once("drag.move",xm,function(s){o(s)})}),function(){var a,s;t.on("element.hover",function(c){a=c.gfx,s=c.element}),t.on("element.hover",xm,function(c){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,c;if(a instanceof MouseEvent)return s=Sr(a),c=document.elementFromPoint(s.x,s.y),zA(c)}}Ab.$inject=["elementRegistry","eventBus","injector"];function zA(e){return Vi(e,"svg, .djs-element",!0)}const VA={__init__:["hoverFix"],hoverFix:["type",Ab]};var Hr=Math.round,Em="djs-drag-active";function fr(e){e.preventDefault()}function WA(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function UA(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Mb(e,t,n,i){var r={threshold:5,trapClick:!0},o;function a(x){var y=t.viewbox(),S=t._container.getBoundingClientRect();return{x:y.x+(x.x-S.left)/y.scale,y:y.y+(x.y-S.top)/y.scale}}function s(x,y){y=y||o;var S=e.createEvent(O({},y.payload,y.data,{isTouch:y.isTouch}));return e.fire("drag."+x,S)===!1?!1:e.fire(y.prefix+"."+x,S)}function c(x){var y=x.filter(function(S){return i.get(S.id)});y.length&&n.select(y)}function l(x,y){var S=o.payload,T=o.displacement,I=o.globalStart,D=Sr(x),B=Tn(D,I),N=o.localStart,j=a(D),Y=Tn(j,N);if(!o.active&&(y||UA(B)>o.threshold)){if(O(S,{x:Hr(N.x+T.x),y:Hr(N.y+T.y),dx:0,dy:0},{originalEvent:x}),s("start")===!1)return v();o.active=!0,o.keepSelection||(S.previousSelection=n.get(),n.select(null)),o.cursor&&Jc(o.cursor),t.addMarker(t.getRootElement(),Em)}Zl(x),o.active&&(O(S,{x:Hr(j.x+T.x),y:Hr(j.y+T.y),dx:Hr(Y.x),dy:Hr(Y.y)},{originalEvent:x}),s("move"))}function u(x){var y,S=!0;o.active&&(x&&(o.payload.originalEvent=x,Zl(x)),S=s("end")),S===!1&&s("rejected"),y=E(S!==!0),s("ended",y)}function f(x){ft("Escape",x)&&(fr(x),v())}function p(x){var y;o.active&&(y=J_(e),setTimeout(y,400),fr(x)),u(x)}function d(x){l(x)}function h(x){var y=o.payload;y.hoverGfx=x.gfx,y.hover=x.element,s("hover")}function m(x){s("out");var y=o.payload;y.hoverGfx=null,y.hover=null}function v(x){var y;if(o){var S=o.active;S&&s("cancel"),y=E(x),S&&s("canceled",y)}}function E(x){var y,S;s("cleanup"),Z_(),o.trapClick?S=p:S=u,me.unbind(document,"mousemove",l),me.unbind(document,"dragstart",fr),me.unbind(document,"selectstart",fr),me.unbind(document,"mousedown",S,!0),me.unbind(document,"mouseup",S,!0),me.unbind(document,"keyup",f),me.unbind(document,"touchstart",d,!0),me.unbind(document,"touchcancel",v,!0),me.unbind(document,"touchmove",l,!0),me.unbind(document,"touchend",u,!0),e.off("element.hover",h),e.off("element.out",m),t.removeMarker(t.getRootElement(),Em);var T=o.payload.previousSelection;return x!==!1&&T&&!n.get().length&&c(T),y=o,o=null,y}function C(x,y,S,T){o&&v(!1),typeof y=="string"&&(T=S,S=y,y=null),T=O({},r,T||{});var I=T.data||{},D,B,N,j,Y;T.trapClick?j=p:j=u,x?(D=po(x)||x,B=Sr(x),Zl(x),D.type==="dragstart"&&fr(D)):(D=null,B={x:0,y:0}),N=a(B),y||(y=N),Y=WA(D),o=O({prefix:S,data:I,payload:{},globalStart:B,displacement:Tn(y,N),localStart:N,isTouch:Y},T),T.manual||(Y?(me.bind(document,"touchstart",d,!0),me.bind(document,"touchcancel",v,!0),me.bind(document,"touchmove",l,!0),me.bind(document,"touchend",u,!0)):(me.bind(document,"mousemove",l),me.bind(document,"dragstart",fr),me.bind(document,"selectstart",fr),me.bind(document,"mousedown",j,!0),me.bind(document,"mouseup",j,!0)),me.bind(document,"keyup",f),e.on("element.hover",h),e.on("element.out",m)),s("init"),T.autoActivate&&l(x,!0)}e.on("diagram.destroy",v),this.init=C,this.move=l,this.hover=h,this.out=m,this.end=u,this.cancel=v,this.context=function(){return o},this.setOptions=function(x){O(r,x)}}Mb.$inject=["eventBus","canvas","selection","elementRegistry"];const mi={__depends__:[VA,qn],dragging:["type",Mb]};function xo(e,t,n){this._canvas=n,this._opts=O({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var o=i._toBorderPoint(r);i.startScroll(o)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}xo.$inject=["config.autoScroll","eventBus","canvas"];xo.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var a=0,s=0,c=0;c<4;c++)GA(o[c],n.scrollThresholdOut[c],n.scrollThresholdIn[c])&&(c===0?a=n.scrollStep:c==1?s=n.scrollStep:c==2?a=-n.scrollStep:c==3&&(s=-n.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function GA(e,t,n){return t<e&&e<n}xo.prototype.stopScroll=function(){clearTimeout(this._scrolling)};xo.prototype.setOptions=function(e){this._opts=O({},this._opts,e)};xo.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=Sr(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const KA={__depends__:[mi],__init__:["autoScroll"],autoScroll:["type",xo]};function yp(e){this._commandStack=e.get("commandStack",!1)}yp.$inject=["injector"];yp.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const Zn={__init__:["rules"],rules:["type",yp]};var ms=Math.round,YA=Math.max;function qA(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function XA(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var Db=10;function ZA(e,t){var n,i;for(n=0;i=e[n];n++)if(wa(i,t)<=Db)return{point:e[n],bendpoint:!0,index:n};return null}function JA(e,t){var n=Jy(qA(t,Db),XA(e)),i=n[0],r=n[n.length-1],o;return i?i!==r?i.segment2!==r.segment2?(o=YA(i.segment2,r.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:ms(i.x+r.x)/2,y:ms(i.y+r.y)/2},index:i.segment2}:{point:{x:ms(i.x),y:ms(i.y)},index:i.segment2}:null}function qu(e,t){return ZA(e,t)||JA(e,t)}function kb(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function wm(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function QA(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function eM(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],o=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/o}function _p(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},o=eM([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function Ob(e,t){var n=_p(e,t),i={x:n.x-e.x,y:n.y-e.y};return kb(i)}function hc(e,t){return kb({x:e.x-t.x,y:e.y-t.y})}var Ib="djs-bendpoint",Nb="djs-segment-dragger";function tM(e,t){var n=Sr(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var o=e.viewbox();return{x:o.x+(n.x-r.x)/o.scale,y:o.y+(n.y-r.y)/o.scale}}function Xu(e,t,n){var i=tM(e,n),r=qu(t,i);return r}function Zu(e,t){var n=ae("g");Te(n).add(Ib),de(e,n);var i=ae("circle");te(i,{cx:0,cy:0,r:4}),Te(i).add("djs-visual"),de(n,i);var r=ae("circle");return te(r,{cx:0,cy:0,r:10}),Te(r).add("djs-hit"),de(n,r),t&&Te(n).add(t),n}function nM(e,t,n,i){var r=ae("g");de(e,r);var o=18,a=6,s=11,c=rM(t,n,i),l=a+s,u=ae("rect");te(u,{x:-o/2,y:-a/2,width:o,height:a}),Te(u).add("djs-visual"),de(r,u);var f=ae("rect");return te(f,{x:-c/2,y:-l/2,width:c,height:l}),Te(f).add("djs-hit"),de(r,f),qy(r,i==="v"?90:0),r}function Lb(e,t,n){var i=ae("g"),r=Nu(t,n),o=ri(t,n);return de(e,i),nM(i,t,n,o),Te(i).add(Nb),Te(i).add(o==="h"?"horizontal":"vertical"),yt(i,r.x,r.y),i}function Ju(e){return Math.abs(Math.round(e*2/3))}function iM(e,t){var n=oM(e,t);return _p(e,n)}function rM(e,t,n){var i=t.x-e.x,r=t.y-e.y;return Ju(n==="h"?i:r)}function oM(e,t){for(var n=t.waypoints,i=1/0,r,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1],c=Ob(e,[a,s]);c<i&&(i=c,r=o)}return[n[r],n[r+1]]}function Bb(e,t,n,i,r){function o(x,y,S){var T=x.index,I=x.point,D,B,N,j,Y,Z;return T<=0||x.bendpoint?!1:(D=y[T-1],B=y[T],N=Nu(D,B),j=ri(D,B),Y=Math.abs(I.x-N.x),Z=Math.abs(I.y-N.y),j&&Y<=S&&Z<=S)}function a(x,y){var S=x.waypoints,T,I,D,B;return y.index<=0||y.bendpoint||(T={start:S[y.index-1],end:S[y.index]},I=ri(T.start,T.end),!I)?null:(I==="h"?D=T.end.x-T.start.x:D=T.end.y-T.start.y,B=Ju(D)/2,B)}function s(x,y){var S=y.waypoints,T=Xu(t,S,x),I;if(T)return I=a(y,T),o(T,S,I)?r.start(x,y,T.index):i.start(x,y,T.index,!T.bendpoint),!0}function c(x,y,S){me.bind(x,y,function(T){n.triggerMouseEvent(y,T,S),T.stopPropagation()})}function l(x,y){var S=t.getLayer("overlays"),T=Ie('.djs-bendpoints[data-element-id="'+pa(x.id)+'"]',S);return!T&&y&&(T=ae("g"),te(T,{"data-element-id":x.id}),Te(T).add("djs-bendpoints"),de(S,T),c(T,"mousedown",x),c(T,"click",x),c(T,"dblclick",x)),T}function u(x,y){return Ie('.djs-segment-dragger[data-segment-idx="'+x+'"]',y)}function f(x,y){y.waypoints.forEach(function(S,T){var I=Zu(x);de(x,I),yt(I,S.x,S.y)}),Zu(x,"floating")}function p(x,y){for(var S=y.waypoints,T,I,D,B=1;B<S.length;B++)T=S[B-1],I=S[B],ri(T,I)&&(D=Lb(x,T,I),te(D,{"data-segment-idx":B}),c(D,"mousemove",y))}function d(x){A(Iu("."+Ib,x),function(y){ct(y)})}function h(x){A(Iu("."+Nb,x),function(y){ct(y)})}function m(x){var y=l(x);return y||(y=l(x,!0),f(y,x),p(y,x)),y}function v(x){var y=l(x);y&&(h(y),d(y),p(y,x),f(y,x))}function E(x,y){var S=Ie(".floating",x),T=y.point;S&&yt(S,T.x,T.y)}function C(x,y,S){var T=u(y.index,x),I=S[y.index-1],D=S[y.index],B=y.point,N=Nu(I,D),j=ri(I,D),Y,Z;T&&(Y=aM(T),Z={x:B.x-N.x,y:B.y-N.y},j==="v"&&(Z={x:Z.y,y:Z.x}),yt(Y,Z.x,Z.y))}e.on("connection.changed",function(x){v(x.element)}),e.on("connection.remove",function(x){var y=l(x.element);y&&ct(y)}),e.on("element.marker.update",function(x){var y=x.element,S;y.waypoints&&(S=m(y),x.add?Te(S).add(x.marker):Te(S).remove(x.marker))}),e.on("element.mousemove",function(x){var y=x.element,S=y.waypoints,T,I;if(S){if(T=l(y,!0),I=Xu(t,S,x.originalEvent),!I)return;E(T,I),I.bendpoint||C(T,I,S)}}),e.on("element.mousedown",function(x){if(Ui(x)){var y=x.originalEvent,S=x.element;if(S.waypoints)return s(y,S)}}),e.on("selection.changed",function(x){var y=x.newSelection,S=y[0];S&&S.waypoints&&m(S)}),e.on("element.hover",function(x){var y=x.element;y.waypoints&&(m(y),n.registerEvent(x.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(x){n.unregisterEvent(x.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(x){var y=x.element,S=x.newId;if(y.waypoints){var T=l(y);T&&te(T,{"data-element-id":S})}}),this.addHandles=m,this.updateHandles=v,this.getBendpointsContainer=l,this.getSegmentDragger=u}Bb.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function aM(e){return Ie(".djs-visual",e)}var Sm=Math.round,dr="reconnectStart",hr="reconnectEnd",Oo="updateWaypoints";function bp(e,t,n,i,r,o){this._injector=e,this.start=function(a,s,c,l){var u=n.getGraphics(s),f=s.source,p=s.target,d=s.waypoints,h;!l&&c===0?h=dr:!l&&c===d.length-1?h=hr:h=Oo;var m=h===Oo?"connection.updateWaypoints":"connection.reconnect",v=r.allowed(m,{connection:s,source:f,target:p});v===!1&&(v=r.allowed(m,{connection:s,source:p,target:f})),v!==!1&&i.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:u,context:{allowed:v,bendpointIndex:c,connection:s,source:f,target:p,insert:l,type:h}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,c=s.connection,l=c.source,u=c.target,f=a.hover,p=s.type;s.hover=f;var d;if(f){var h=p===Oo?"connection.updateWaypoints":"connection.reconnect";if(d=s.allowed=r.allowed(h,{connection:c,source:p===dr?f:l,target:p===hr?f:u}),d){s.source=p===dr?f:l,s.target=p===hr?f:u;return}d===!1&&(d=s.allowed=r.allowed(h,{connection:c,source:p===hr?f:u,target:p===dr?f:l})),d&&(s.source=p===hr?f:u,s.target=p===dr?f:l)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,c=s.type;s.hover=null,s.source=null,s.target=null,c!==Oo&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,c=s.allowed,l=s.bendpointIndex,u=s.connection,f=s.insert,p=u.waypoints.slice(),d=s.source,h=s.target,m=s.type,v=s.hints||{},E={x:Sm(a.x),y:Sm(a.y)};if(!c)return!1;m===Oo?(f?p.splice(l,0,E):p[l]=E,v.bendpointMove={insert:f,bendpointIndex:l},p=this.cropWaypoints(u,p),o.updateWaypoints(u,SC(p),v)):(m===dr?(v.docking="source",mc(s)&&(v.docking="target",v.newWaypoints=p.reverse())):m===hr&&(v.docking="target",mc(s)&&(v.docking="source",v.newWaypoints=p.reverse())),o.reconnect(u,d,h,E,v))},this)}bp.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];bp.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function mc(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===dr)return t&&i&&t===i&&n!==i;if(r===hr)return t&&n&&t===n&&n!==i}var sM="reconnectStart",cM="reconnectEnd",Cm="updateWaypoints",Io="connect-ok",gs="connect-not-ok",Rm="connect-hover",Pm="djs-updating",Tm="djs-dragging",Am=1100;function $b(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,s=a.bendpointIndex,c=a.connection,l=a.insert,u=c.waypoints,f=u.slice();a.waypoints=u,l&&f.splice(s,0,{x:o.x,y:o.y}),c.waypoints=f;var p=a.draggerGfx=Zu(i.getLayer("overlays"));Te(p).add("djs-dragging"),i.addMarker(c,Tm),i.addMarker(c,Pm)}),n.on("bendpoint.move.hover",function(o){var a=o.context,s=a.allowed,c=a.hover,l=a.type;if(c){if(i.addMarker(c,Rm),l===Cm)return;s?(i.removeMarker(c,gs),i.addMarker(c,Io)):s===!1&&(i.removeMarker(c,Io),i.addMarker(c,gs))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],Am,function(o){var a=o.context,s=a.hover,c=a.target;s&&(i.removeMarker(s,Rm),i.removeMarker(s,c?Io:gs))}),n.on("bendpoint.move.move",function(o){var a=o.context,s=a.allowed,c=a.bendpointIndex,l=a.draggerGfx,u=a.hover,f=a.type,p=a.connection,d=p.source,h=p.target,m=p.waypoints.slice(),v={x:o.x,y:o.y},E=a.hints||{},C={};r&&(E.connectionStart&&(C.connectionStart=E.connectionStart),E.connectionEnd&&(C.connectionEnd=E.connectionEnd),f===sM?mc(a)?(C.connectionEnd=C.connectionEnd||v,C.source=h,C.target=u||d,m=m.reverse()):(C.connectionStart=C.connectionStart||v,C.source=u||d,C.target=h):f===cM?mc(a)?(C.connectionStart=C.connectionStart||v,C.source=u||h,C.target=d,m=m.reverse()):(C.connectionEnd=C.connectionEnd||v,C.source=d,C.target=u||h):(C.noCropping=!0,C.noLayout=!0,m[c]=v),f===Cm&&(m=e.cropWaypoints(p,m)),C.waypoints=m,r.drawPreview(a,s,C)),yt(l,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],Am,function(o){var a=o.context,s=a.connection,c=a.draggerGfx,l=a.hover,u=a.target,f=a.waypoints;s.waypoints=f,ct(c),i.removeMarker(s,Pm),i.removeMarker(s,Tm),l&&(i.removeMarker(l,Io),i.removeMarker(l,u?Io:gs)),r&&r.cleanUp(a)})}$b.$inject=["bendpointMove","injector","eventBus","canvas"];var Mm="connect-hover",Dm="djs-updating";function km(e,t,n){return xp(e,t,e[t]+n)}function xp(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function lM(e,t,n,i){var r=Math.max(t[i],n[i]),o=Math.min(t[i],n[i]),a=20,s=Math.min(Math.max(o+a,e[i]),r-a);return xp(t,i,s)}function jb(e){return e==="x"?"y":"x"}function Om(e,t,n){var i,r;return e.original?e.original:(i=pe(t),r=jb(n),xp(e,r,i[r]))}function Fb(e,t,n,i,r,o){var a=e.get("connectionDocking",!1);this.start=function(f,p,d){var h,m=n.getGraphics(p),v=d-1,E=d,C=p.waypoints,x=C[v],y=C[E],S=Xu(n,C,f),T,I,D;T=ri(x,y),T&&(I=T==="v"?"x":"y",v===0&&(x=Om(x,p.source,I)),E===C.length-1&&(y=Om(y,p.target,I)),S?D=S.point:D={x:(x.x+y.x)/2,y:(x.y+y.y)/2},h={connection:p,segmentStartIndex:v,segmentEndIndex:E,segmentStart:x,segmentEnd:y,axis:I,dragPosition:D},i.init(f,D,"connectionSegment.move",{cursor:I==="x"?"resize-ew":"resize-ns",data:{connection:p,connectionGfx:m,context:h}}))};function s(f,p){if(!a)return p;var d=f.waypoints,h;return f.waypoints=p,h=a.getCroppedWaypoints(f),f.waypoints=d,h}function c(f){r.update("connection",f.connection,f.connectionGfx)}function l(f,p,d){var h=f.newWaypoints,m=f.segmentStartIndex+p,v=h[m],E=f.segmentEndIndex+p,C=h[E],x=jb(f.axis),y=lM(d,v,C,x);yt(f.draggerGfx,y.x,y.y)}function u(f,p){var d=0,h=f.filter(function(m,v){return Vf(f[v-1],f[v+1],m)?(d=v<=p?d-1:d,!1):!0});return{waypoints:h,segmentOffset:d}}t.on("connectionSegment.move.start",function(f){var p=f.context,d=f.connection,h=n.getLayer("overlays");p.originalWaypoints=d.waypoints.slice(),p.draggerGfx=Lb(h,p.segmentStart,p.segmentEnd),Te(p.draggerGfx).add("djs-dragging"),n.addMarker(d,Dm)}),t.on("connectionSegment.move.move",function(f){var p=f.context,d=p.connection,h=p.segmentStartIndex,m=p.segmentEndIndex,v=p.segmentStart,E=p.segmentEnd,C=p.axis,x=p.originalWaypoints.slice(),y=km(v,C,f["d"+C]),S=km(E,C,f["d"+C]),T=x.length,I=0;x[h]=y,x[m]=S;var D,B;h<2&&(D=Tt(d.source,y),h===1?D==="intersect"&&(x.shift(),x[0]=y,I--):D!=="intersect"&&(x.unshift(v),I++)),m>T-3&&(B=Tt(d.target,S),m===T-2?B==="intersect"&&(x.pop(),x[x.length-1]=S):B!=="intersect"&&x.push(E)),p.newWaypoints=d.waypoints=s(d,x),l(p,I,f),p.newSegmentStartIndex=h+I,c(f)}),t.on("connectionSegment.move.hover",function(f){f.context.hover=f.hover,n.addMarker(f.hover,Mm)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(f){var p=f.context.hover;p&&n.removeMarker(p,Mm)}),t.on("connectionSegment.move.cleanup",function(f){var p=f.context,d=p.connection;p.draggerGfx&&ct(p.draggerGfx),n.removeMarker(d,Dm)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(f){var p=f.context,d=p.connection;d.waypoints=p.originalWaypoints,c(f)}),t.on("connectionSegment.move.end",function(f){var p=f.context,d=p.connection,h=p.newWaypoints,m=p.newSegmentStartIndex;h=h.map(function(S){return{original:S.original,x:Math.round(S.x),y:Math.round(S.y)}});var v=u(h,m),E=v.waypoints,C=s(d,E),x=v.segmentOffset,y={segmentMove:{segmentStartIndex:p.segmentStartIndex,newSegmentStartIndex:m+x}};o.updateWaypoints(d,C,y)})}Fb.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var uM=Math.abs,Im=Math.round;function fM(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],uM(r-e)<=n)return r}function Hb(e){return{x:e.x,y:e.y}}function zb(e){return{x:e.x+e.width,y:e.y+e.height}}function mn(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:Im(e.x+e.width/2),y:Im(e.y+e.height/2)}}function oo(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function nt(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function Vb(e){return e.children||[]}var pM=Math.abs,Nm=Math.round,iu=10;function Wb(e){function t(o,a){if(ge(o)){for(var s=o.length;s--;)if(pM(o[s]-a)<=iu)return o[s]}else{o=+o;var c=a%o;if(c<iu)return a-c;if(c>o-iu)return a-c+o}return a}function n(o,a){if(o.waypoints)return iM(a,o);if(o.width)return{x:Nm(o.width/2+o.x),y:Nm(o.height/2+o.y)}}function i(o){var a=o.context,s=a.snapPoints,c=a.connection,l=c.waypoints,u=a.segmentStart,f=a.segmentStartIndex,p=a.segmentEnd,d=a.segmentEndIndex,h=a.axis;if(s)return s;var m=[l[f-1],u,p,l[d+1]];return f<2&&m.unshift(n(c.source,o)),d>l.length-3&&m.unshift(n(c.target,o)),a.snapPoints=s={horizontal:[],vertical:[]},A(m,function(v){v&&(v=v.original||v,h==="y"&&s.horizontal.push(v.y),h==="x"&&s.vertical.push(v.x))}),s}e.on("connectionSegment.move.move",1500,function(o){var a=i(o),s=o.x,c=o.y,l,u;if(a){l=t(a.vertical,s),u=t(a.horizontal,c);var f=s-l,p=c-u;O(o,{dx:o.dx-f,dy:o.dy-p,x:l,y:u}),(f||a.vertical.indexOf(s)!==-1)&&nt(o,"x",l),(p||a.horizontal.indexOf(c)!==-1)&&nt(o,"y",u)}});function r(o){var a=o.snapPoints,s=o.connection.waypoints,c=o.bendpointIndex;if(a)return a;var l=[s[c-1],s[c+1]];return o.snapPoints=a={horizontal:[],vertical:[]},A(l,function(u){u&&(u=u.original||u,a.horizontal.push(u.y),a.vertical.push(u.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var a=o.context,s=a.hover,c=s&&n(s,o);!$e(s)||!c||!c.x||!c.y||(nt(o,"x",c.x),nt(o,"y",c.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var a=o.context,s=r(a),c=a.hover,l=c&&n(c,o),u=o.x,f=o.y,p,d;if(s){p=t(l?s.vertical.concat([l.x]):s.vertical,u),d=t(l?s.horizontal.concat([l.y]):s.horizontal,f);var h=u-p,m=f-d;O(o,{dx:o.dx-h,dy:o.dy-m,x:o.x-h,y:o.y-m}),(h||s.vertical.indexOf(u)!==-1)&&nt(o,"x",p),(m||s.horizontal.indexOf(f)!==-1)&&nt(o,"y",d)}})}Wb.$inject=["eventBus"];const dM={__depends__:[mi,Zn],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Bb],bendpointMove:["type",bp],bendpointMovePreview:["type",$b],connectionSegmentMove:["type",Fb],bendpointSnapping:["type",Wb]};function Ub(e,t,n,i){function r(a,s){return i.allowed("connection.create",{source:a,target:s})}function o(a,s){return r(s,a)}e.on("connect.hover",function(a){var s=a.context,c=s.start,l=a.hover,u;if(s.hover=l,u=s.canExecute=r(c,l),!la(u)){if(u!==!1){s.source=c,s.target=l;return}u=s.canExecute=o(c,l),!la(u)&&u!==!1&&(s.source=l,s.target=c)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,c=s.canExecute,l=s.connectionStart,u={x:a.x,y:a.y},f=s.source,p=s.target;if(!c)return!1;var d=null,h={connectionStart:Qu(s)?u:l,connectionEnd:Qu(s)?l:u};gt(c)&&(d=c),s.connection=n.connect(f,p,d,h)}),this.start=function(a,s,c,l){gt(c)||(l=c,c=pe(s)),t.init(a,"connect",{autoActivate:l,data:{shape:s,context:{start:s,connectionStart:c}}})}}Ub.$inject=["eventBus","dragging","modeling","rules"];function Qu(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var hM=1100,mM=900,Lm="connect-ok",Bm="connect-not-ok";function Gb(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var o=r.context,a=o.canExecute,s=o.hover,c=o.source,l=o.start,u=o.startPosition,f=o.target,p=o.connectionStart||u,d=o.connectionEnd||{x:r.x,y:r.y},h=p,m=d;Qu(o)&&(h=d,m=p),i.drawPreview(o,a,{source:c||l,target:f||s,connectionStart:h,connectionEnd:m})}),t.on("connect.hover",mM,function(r){var o=r.context,a=r.hover,s=o.canExecute;s!==null&&n.addMarker(a,s?Lm:Bm)}),t.on(["connect.out","connect.cleanup"],hM,function(r){var o=r.hover;o&&(n.removeMarker(o,Lm),n.removeMarker(o,Bm))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}Gb.$inject=["injector","eventBus","canvas"];const Ep={__depends__:[qn,Zn,mi],__init__:["connectPreview"],connect:["type",Ub],connectPreview:["type",Gb]};var gM="djs-dragger";function gi(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}gi.$inject=["injector","canvas","graphicsFactory","elementFactory"];gi.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,o=n.source,a=n.target,s=n.waypoints,c=n.connectionStart,l=n.connectionEnd,u=n.noLayout,f=n.noCropping,p=n.noNoop,d,h=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Nc(i),r||(r=e.getConnection=vM(function(m,v,E){return h.getConnection(m,v,E)})),t&&(d=r(t,o,a)),!d){!p&&this.drawNoopPreview(i,n);return}d.waypoints=s||[],this._layouter&&!u&&(d.waypoints=this._layouter.layoutConnection(d,{source:o,target:a,connectionStart:c,connectionEnd:l,waypoints:n.waypoints||d.waypoints})),(!d.waypoints||!d.waypoints.length)&&(d.waypoints=[o?pe(o):c,a?pe(a):l]),this._connectionDocking&&(o||a)&&!f&&(d.waypoints=this._connectionDocking.getCroppedWaypoints(d,o,a)),this._graphicsFactory.drawConnection(i,d,{stroke:"var(--element-dragger-color)"})};gi.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||pe(n),o=t.connectionEnd||pe(i),a=this.cropWaypoints(r,o,n,i),s=this.createNoopConnection(a[0],a[1]);de(e,s)};gi.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),a=i&&r.getShapePath(i),s=r.getConnectionPath({waypoints:[e,t]});return e=n&&Bu(o,s,!0)||e,t=i&&Bu(a,s,!1)||t,[e,t]};gi.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&ct(e.connectionPreviewGfx)};gi.prototype.getConnection=function(e){var t=yM(e);return this._elementFactory.createConnection(t)};gi.prototype.createConnectionPreviewGfx=function(){var e=ae("g");return te(e,{pointerEvents:"none"}),Te(e).add(gM),de(this._canvas.getActiveLayer(),e),e};gi.prototype.createNoopConnection=function(e,t){return Lc([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function vM(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function yM(e){return gt(e)?e:{}}const _M={__init__:["connectionPreview"],connectionPreview:["type",gi]},bM=new Ca("ps");var xM=["marker-start","marker-mid","marker-end"],EM=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Xi(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i}Xi.$inject=["elementRegistry","eventBus","canvas","styles"];Xi.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};Xi.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Xi.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var r=zy(n),o=n.getBoundingClientRect();return this._cloneMarkers(_r(r),i),te(r,this._styles.cls(i,[],{x:o.top,y:o.left})),de(t,r),te(r,"data-preview-support-element-id",e.id),r};Xi.prototype.addFrame=function(e,t){var n=ae("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return de(t,n),te(n,"data-preview-support-element-id",e.id),n};Xi.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var i=this;if(e.childNodes)for(var r=0;r<e.childNodes.length;r++)i._cloneMarkers(e.childNodes[r],t,n);RM(e)&&xM.forEach(function(o){if(te(e,o)){var a=wM(e,o,i._canvas.getContainer());a&&i._cloneMarker(n,e,a,o,t)}})};Xi.prototype._cloneMarker=function(e,t,n,i,r="djs-dragger"){var o=[n.id,r,bM.next()].join("-"),a=Ie("marker#"+n.id,e);e=e||this._canvas._svg;var s=a||zy(n);s.id=o,Te(s).add(r);var c=Ie(":scope > defs",e);c||(c=ae("defs"),de(e,c)),de(c,s);var l=CM(s.id);te(t,i,l)};function wM(e,t,n){var i=SM(te(e,t));return Ie("marker#"+i,n||document)}function SM(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function CM(e){return"url(#"+e+")"}function RM(e){return EM.indexOf(e.nodeName)!==-1}const Eo={__init__:["previewSupport"],previewSupport:["type",Xi]},vs="complex-preview";class Kb{constructor(t,n,i){this._canvas=t,this._graphicsFactory=n,this._previewSupport=i,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:i=[],removed:r=[],resized:o=[]}=t,a=this._canvas.getLayer(vs);n.filter(s=>!PM(s)).forEach(s=>{let c;$e(s)?(c=this._graphicsFactory._createContainer("connection",ae("g")),this._graphicsFactory.drawConnection(_r(c),s)):(c=this._graphicsFactory._createContainer("shape",ae("g")),this._graphicsFactory.drawShape(_r(c),s),yt(c,s.x,s.y)),this._previewSupport.addDragger(s,a,c)}),i.forEach(({element:s,delta:c})=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"]);const l=this._previewSupport.addDragger(s,a);$e(s)?yt(l,c.x,c.y):yt(l,s.x+c.x,s.y+c.y)}),r.forEach(s=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"])}),o.forEach(({shape:s,bounds:c})=>{this._canvas.addMarker(s,"djs-hidden"),this._markers.push([s,"djs-hidden"]),this._previewSupport.addDragger(s,a,void 0,"djs-dragging");const l=this._graphicsFactory._createContainer("shape",ae("g"));this._graphicsFactory.drawShape(_r(l),s,{width:c.width,height:c.height}),yt(l,c.x,c.y),this._previewSupport.addDragger(s,a,l)})}cleanUp(){Nc(this._canvas.getLayer(vs)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(vs)}hide(){this._canvas.hideLayer(vs)}}Kb.$inject=["canvas","graphicsFactory","previewSupport"];function PM(e){return e.hidden}const TM={__depends__:[Eo],__init__:["complexPreview"],complexPreview:["type",Kb]};var wp=["top","bottom","left","right"],ys=10;function Sp(e,t){G.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var o=r.context,a=o.connection,s=a.source,c=a.target,l=o.hints||{};l.createElementsBehavior!==!1&&(n(s),n(c))}),this.postExecuted(["label.create"],function(r){var o=r.context,a=o.shape,s=o.hints||{};s.createElementsBehavior!==!1&&n(a.labelTarget)}),this.postExecuted(["elements.create"],function(r){var o=r.context,a=o.elements,s=o.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(c){n(c)})});function n(r){if(Ic(r)){var o=DM(r);o&&i(r,o)}}function i(r,o){var a=pe(r),s=r.label,c=pe(s);if(s.parent){var l=le(r),u;switch(o){case"top":u={x:a.x,y:l.top-ys-s.height/2};break;case"left":u={x:l.left-ys-s.width/2,y:a.y};break;case"bottom":u={x:a.x,y:l.bottom+ys+s.height/2};break;case"right":u={x:l.right+ys+s.width/2,y:a.y};break}var f=Tn(u,c);t.moveShape(s,f)}}}ie(Sp,G);Sp.$inject=["eventBus","modeling"];function AM(e){var t=e.host,n=pe(e),i=Tt(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var o=wp.filter(function(a){return r.indexOf(a)===-1});return o}function MM(e){var t=pe(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return Yb(t,i)});return n}function DM(e){var t=pe(e.label),n=pe(e),i=Yb(n,t);if(kM(i)){var r=MM(e);if(e.host){var o=AM(e);r=r.concat(o)}var a=wp.filter(function(s){return r.indexOf(s)===-1});if(a.indexOf(i)===-1)return a[0]}}function Yb(e,t){return Tt(t,e,5)}function kM(e){return wp.indexOf(e)!==-1}function Cp(e){G.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,i=t.shape;t.position||(b(i,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-i.height/2}:t.position={x:n.x+n.width+80+i.width/2,y:n.y+n.height/2})},!0)}ie(Cp,G);Cp.$inject=["eventBus"];function Rp(e,t){e.invoke(G,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,o=Ee(r.incoming.concat(r.outgoing),function(a){return b(a,"bpmn:Association")});A(o,function(a){t.moveConnection(a,{x:0,y:0},i)})},!0)}ie(Rp,G);Rp.$inject=["injector","modeling"];var $m=500;function ol(e,t){t.invoke(G,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",$m,function(i){var r=i.elements;r=r.filter(function(o){var a=o.host;return jm(o,a)}),r.length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var a=r[o];i.elements[o]=n._replaceShape(r[o],a)})},!0),this.preExecute("elements.move",$m,function(i){var r=i.shapes,o=i.newHost;if(r.length===1){var a=r[0];jm(a,o)&&(i.shapes=[n._replaceShape(a,o)])}},!0)}ol.$inject=["bpmnReplace","injector"];ie(ol,G);ol.prototype._replaceShape=function(e,t){var n=OM(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function OM(e){var t=X(e),n=t.eventDefinitions;return n&&n[0]}function jm(e,t){return!Me(e)&&be(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function Pp(e,t){G.call(this,e);function n(i){return Ee(i.attachers,function(r){return b(r,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(i){var r=i.context.source,o=i.context.target,a=n(o);b(r,"bpmn:EventBasedGateway")&&b(o,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}),this.postExecute("connection.reconnect",function(i){var r=i.context.oldSource,o=i.context.newSource;b(r,"bpmn:Gateway")&&b(o,"bpmn:EventBasedGateway")&&A(o.outgoing,function(a){var s=a.target,c=n(s);b(s,"bpmn:ReceiveTask")&&c.length>0&&t.removeElements(c)})})}Pp.$inject=["eventBus","modeling"];ie(Pp,G);function Tp(e,t,n){G.call(this,e),this.preExecute("shape.replace",s,!0),this.postExecuted("shape.replace",c,!0),this.preExecute("connection.create",r,!0),this.postExecuted("connection.delete",i,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",a,!0);function i(v){const E=v.source,C=v.target;zr(E)&&No(C)&&u(C)}function r(v){const E=v.connection,C=v.source,x=v.target;zr(C)&&_s(x)&&(l(x),p(C,[E]))}function o(v){const E=v.newTarget,C=v.oldSource,x=v.oldTarget;if(x!==E){const y=C;No(x)&&u(x),zr(y)&&_s(E)&&l(E)}}function a(v){const{element:E}=v;No(E)?(f(E),d(E)):_s(E)&&h(E)}function s(v){const{newData:E,oldShape:C}=v;if(zr(v.oldShape)&&E.eventDefinitionType!=="bpmn:CompensateEventDefinition"||E.type!=="bpmn:BoundaryEvent"){const x=C.outgoing.find(({target:y})=>No(y));x&&x.target&&(v._connectionTarget=x.target)}else if(!zr(v.oldShape)&&E.eventDefinitionType==="bpmn:CompensateEventDefinition"&&E.type==="bpmn:BoundaryEvent"){const x=C.outgoing.find(({target:y})=>_s(y));x&&x.target&&(v._connectionTarget=x.target),m(C)}}function c(v){const{_connectionTarget:E,newShape:C}=v;E&&t.connect(C,E)}function l(v){t.updateProperties(v,{isForCompensation:!0})}function u(v){t.updateProperties(v,{isForCompensation:void 0})}function f(v){for(const E of v.incoming)n.canConnect(E.source,v)||t.removeConnection(E);for(const E of v.outgoing)n.canConnect(v,E.target)||t.removeConnection(E)}function p(v,E){v.outgoing.filter(y=>b(y,"bpmn:Association")).filter(y=>No(y.target)&&!E.includes(y)).forEach(y=>t.removeConnection(y))}function d(v){const E=v.attachers.slice();E.length&&t.removeElements(E)}function h(v){const E=v.incoming.filter(C=>zr(C.source));t.removeElements(E)}function m(v){const E=v.outgoing.filter(C=>b(C,"bpmn:SequenceFlow"));t.removeElements(E)}}ie(Tp,G);Tp.$inject=["eventBus","modeling","bpmnRules"];function No(e){const t=X(e);return t&&t.get("isForCompensation")}function zr(e){return e&&b(e,"bpmn:BoundaryEvent")&&fo(e,"bpmn:CompensateEventDefinition")}function _s(e){return e&&b(e,"bpmn:Activity")&&!Pt(e)}function Ap(e){e.invoke(G,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;b(i,"bpmn:Lane")&&!b(r,"bpmn:Lane")&&(n.parent=ro(i,"bpmn:Participant"))})}Ap.$inject=["injector"];ie(Ap,G);function Mp(e,t){G.call(this,e),this.preExecute("shape.create",function(n){var i=n.context,r=i.shape;if(b(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=t.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}Mp.$inject=["eventBus","bpmnFactory"];ie(Mp,G);var ef=20,tf=20,qb=30,bs=2e3;function Dp(e,t,n){G.call(this,t),t.on(["create.start","shape.move.start"],bs,function(r){var o=r.context,a=o.shape,s=e.getRootElement();if(!(!b(a,"bpmn:Participant")||!b(s,"bpmn:Process")||!s.children.length)){var c=s.children.filter(function(f){return!b(f,"bpmn:Group")&&!Me(f)&&!$e(f)});if(c.length){var l=pt(c),u=IM(a,l);O(a,u),o.createConstraints=NM(a,l)}}}),t.on("create.start",bs,function(r){var o=r.context,a=o.shape,s=e.getRootElement(),c=e.getGraphics(s);function l(u){u.element=s,u.gfx=c}b(a,"bpmn:Participant")&&b(s,"bpmn:Process")&&(t.on("element.hover",bs,l),t.once("create.cleanup",function(){t.off("element.hover",l)}))});function i(){var r=e.getRootElement();return b(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",bs,function(r){var o=r.elements,a=r.parent,s=LM(o),c;s&&b(a,"bpmn:Process")&&(r.parent=i(),c=r.hints=r.hints||{},c.participant=s,c.process=a,c.processRef=X(s).get("processRef"))},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;b(a,"bpmn:Participant")&&b(o,"bpmn:Process")&&(r.parent=i(),r.process=o,r.processRef=X(a).get("processRef"))},!0),this.execute("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,s=r.shape,c=o.participant;a&&(!c||s===c)&&X(s).set("processRef",X(a))},!0),this.revert("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,s=r.processRef||o.processRef,c=r.shape,l=o.participant;a&&(!l||c===l)&&X(c).set("processRef",s)},!0),this.postExecute("shape.create",function(r){var o=r.hints||{},a=r.process||r.hints.process,s=r.shape,c=o.participant;if(a){var l=a.children.slice();c?s===c&&n.moveElements(l,{x:0,y:0},c):n.moveElements(l,{x:0,y:0},s)}},!0)}Dp.$inject=["canvas","eventBus","modeling"];ie(Dp,G);function IM(e,t){t={width:t.width+ef*2+qb,height:t.height+tf*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function NM(e,t){return t=le(t),{bottom:t.top+e.height/2-tf,left:t.right-e.width/2+ef,top:t.bottom-e.height/2+tf,right:t.left+e.width/2-ef-qb}}function LM(e){return De(e,function(t){return b(t,"bpmn:Participant")})}var Fm="__targetRef_placeholder";function kp(e,t){G.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Hm(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Hm(o));function n(a,s,c){var l=a.get("dataInputAssociations");return De(l,function(u){return u!==c&&u.targetRef===s})}function i(a,s){var c=a.get("properties"),l=De(c,function(u){return u.name===Fm});return!l&&s&&(l=t.create("bpmn:Property",{name:Fm}),ut(c,l)),l}function r(a,s){var c=i(a);c&&(n(a,c,s)||it(a.get("properties"),c))}function o(a){var s=a.context,c=s.connection,l=c.businessObject,u=c.target,f=u&&u.businessObject,p=s.newTarget,d=p&&p.businessObject,h=s.oldTarget||s.target,m=h&&h.businessObject,v=c.businessObject,E;m&&m!==f&&r(m,l),d&&d!==f&&r(d,l),f?(E=i(f,!0),v.targetRef=E):v.targetRef=null}}kp.$inject=["eventBus","bpmnFactory"];ie(kp,G);function Hm(e){return function(t){var n=t.context,i=n.connection;if(b(i,"bpmn:DataInputAssociation"))return e(t)}}function al(e){this._bpmnUpdater=e}al.$inject=["bpmnUpdater"];al.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,r=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};al.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,r=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};function Op(e,t,n,i){G.call(this,i),t.registerHandler("dataStore.updateContainment",al);function r(){return n.filter(function(s){return b(s,"bpmn:Participant")&&X(s).processRef})[0]}function o(s){return s.children.filter(function(c){return b(c,"bpmn:DataStoreReference")&&!c.labelTarget})}function a(s,c){var l=s.businessObject||s;if(c=c||r(),c){var u=c.businessObject||c;t.execute("dataStore.updateContainment",{dataStoreBo:l,dataStoreDi:Ae(s),newSemanticParent:u.processRef||u,newDiParent:Ae(c)})}}this.preExecute("shape.create",function(s){var c=s.context,l=c.shape;b(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(c.hints||(c.hints={}),c.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var c=s.context,l=c.shapes,u=l.filter(function(f){return b(f,"bpmn:DataStoreReference")});u.length&&(c.hints||(c.hints={}),c.hints.autoResize=l.filter(function(f){return!b(f,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var c=s.context,l=c.shape,u=l.parent;b(l,"bpmn:DataStoreReference")&&l.type!=="label"&&b(u,"bpmn:Collaboration")&&a(l)}),this.postExecute("shape.move",function(s){var c=s.context,l=c.shape,u=c.oldParent,f=l.parent;if(!b(u,"bpmn:Collaboration")&&b(l,"bpmn:DataStoreReference")&&l.type!=="label"&&b(f,"bpmn:Collaboration")){var p=b(u,"bpmn:Participant")?u:$M(u,"bpmn:Participant");a(l,p)}}),this.postExecute("shape.delete",function(s){var c=s.context,l=c.shape,u=e.getRootElement();be(l,["bpmn:Participant","bpmn:SubProcess"])&&b(u,"bpmn:Collaboration")&&o(u).filter(function(f){return BM(f,l)}).forEach(function(f){a(f)})}),this.postExecute("canvas.updateRoot",function(s){var c=s.context,l=c.oldRoot,u=c.newRoot,f=o(l);f.forEach(function(p){b(u,"bpmn:Process")&&a(p,u)})})}Op.$inject=["canvas","commandStack","elementRegistry","eventBus"];ie(Op,G);function BM(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function $M(e,t){for(;e.parent;){if(b(e.parent,t))return e.parent;e=e.parent}}var gc=Math.max,vc=Math.min,jM=20;function Xb(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function FM(e,t,n){var i=n.x,r=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+r,o.height=e.height-r):t.indexOf("s")!==-1&&(o.height=e.height+r),t.indexOf("e")!==-1?o.width=e.width+i:t.indexOf("w")!==-1&&(o.x=e.x+i,o.width=e.width-i),o}function HM(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function xs(e,t,n){var i=t[e],r=n.min&&n.min[e],o=n.max&&n.max[e];return fe(r)&&(i=(/top|left/.test(e)?vc:gc)(i,r)),fe(o)&&(i=(/top|left/.test(e)?gc:vc)(i,o)),i}function zM(e,t){if(!t)return e;var n=le(e);return Hc({top:xs("top",n,t),right:xs("right",n,t),bottom:xs("bottom",n,t),left:xs("left",n,t)})}function VM(e,t,n,i){var r=le(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},a=i?le(i):o,s={top:vc(o.top,a.top),left:vc(o.left,a.left),bottom:gc(o.bottom,a.bottom),right:gc(o.right,a.right)};return Hc(s)}function Lo(e,t){return typeof e<"u"?e:jM}function WM(e,t){var n,i,r,o;return typeof t=="object"?(n=Lo(t.left),i=Lo(t.right),r=Lo(t.top),o=Lo(t.bottom)):n=i=r=o=Lo(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}}function UM(e){return!(e.waypoints||e.type==="label")}function Zb(e,t){var n;if(e.length===void 0?n=Ee(e.children,UM):n=e,n.length)return WM(pt(n),t)}var Ei=Math.abs;function GM(e,t){return Xb(le(t),le(e))}var KM=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],dn=30;function sl(e,t){return t=t||[],e.children.filter(function(n){b(n,"bpmn:Lane")&&(sl(n,t),t.push(n))}),t}function Zi(e){return e.children.filter(function(t){return b(t,"bpmn:Lane")})}function hn(e){return ro(e,KM)||e}function YM(e,t){var n=hn(e),i=b(n,"bpmn:Process")?[]:[n],r=sl(n,i),o=le(e),a=le(t),s=GM(e,t),c=[],l=dt(e);return r.forEach(function(u){if(u!==e){var f=l?0:s.top,p=l?s.right:0,d=l?0:s.bottom,h=l?s.left:0,m=le(u);s.top&&(Ei(m.bottom-o.top)<10&&(d=a.top-m.bottom),Ei(m.top-o.top)<5&&(f=a.top-m.top)),s.left&&(Ei(m.right-o.left)<10&&(p=a.left-m.right),Ei(m.left-o.left)<5&&(h=a.left-m.left)),s.bottom&&(Ei(m.top-o.bottom)<10&&(f=a.bottom-m.top),Ei(m.bottom-o.bottom)<5&&(d=a.bottom-m.bottom)),s.right&&(Ei(m.left-o.right)<10&&(h=a.right-m.left),Ei(m.right-o.right)<5&&(p=a.right-m.right)),(f||p||d||h)&&c.push({shape:u,newBounds:HM(u,{top:f,right:p,bottom:d,left:h})})}}),c}var qM=500;function Ip(e,t){G.call(this,e);function n(i,r){var o=dt(i),a=Zi(r),s=[],c=[],l=[],u=[];if(Mr(a,function(v){return o?v.y>i.y?c.push(v):s.push(v):v.x>i.x?u.push(v):l.push(v),v.children}),!!a.length){var f;o?c.length&&s.length?f=i.height/2:f=i.height:u.length&&l.length?f=i.width/2:f=i.width;var p,d,h,m;s.length&&(p=t.calculateAdjustments(s,"y",f,i.y-10),t.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:f},"s")),c.length&&(d=t.calculateAdjustments(c,"y",-f,i.y+i.height+10),t.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:-f},"n")),l.length&&(h=t.calculateAdjustments(l,"x",f,i.x-10),t.makeSpace(h.movingShapes,h.resizingShapes,{x:f,y:0},"e")),u.length&&(m=t.calculateAdjustments(u,"x",-f,i.x+i.width+10),t.makeSpace(m.movingShapes,m.resizingShapes,{x:-f,y:0},"w"))}}this.postExecuted("shape.delete",qM,function(i){var r=i.context,o=r.hints,a=r.shape,s=r.oldParent;b(a,"bpmn:Lane")&&(o&&o.nested||n(a,s))})}Ip.$inject=["eventBus","spaceTool"];ie(Ip,G);var zm=500;function cl(e,t){t.invoke(G,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",zm,function(i){var r=i.elements;r.filter(function(o){var a=o.host;return Vm(o,a)}).map(function(o){return r.indexOf(o)}).forEach(function(o){i.elements[o]=n._replaceShape(r[o])})},!0),this.preExecute("elements.move",zm,function(i){var r=i.shapes,o=i.newHost;r.forEach(function(a,s){var c=a.host;Vm(a,ZM(r,c)?c:o)&&(r[s]=n._replaceShape(a))})},!0)}cl.$inject=["bpmnReplace","injector"];ie(cl,G);cl.prototype._replaceShape=function(e){var t=XM(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function XM(e){var t=X(e),n=t.eventDefinitions;return n&&n[0]}function Vm(e,t){return!Me(e)&&b(e,"bpmn:BoundaryEvent")&&!t}function ZM(e,t){return e.indexOf(t)!==-1}function Np(e,t,n){G.call(this,e);function i(r,o,a){var s=o.waypoints,c,l,u,f,p,d,h,m=r.outgoing.slice(),v=r.incoming.slice(),E;fe(a.width)?E=pe(a):E=a;var C=qu(s,E);if(C){if(c=s.slice(0,C.index),l=s.slice(C.index+(C.bendpoint?1:0)),!c.length||!l.length)return;u=C.bendpoint?s[C.index]:E,(c.length===1||!Wm(r,c[c.length-1]))&&c.push(Um(u)),(l.length===1||!Wm(r,l[0]))&&l.unshift(Um(u))}f=o.source,p=o.target,t.canConnect(f,r,o)&&(n.reconnectEnd(o,r,c||E),d=o),t.canConnect(r,p,o)&&(d?h=n.connect(r,p,{type:o.type,waypoints:l}):(n.reconnectStart(o,r,l||E),h=o));var x=[].concat(d&&Ee(v,function(y){return y.source===d.source})||[],h&&Ee(m,function(y){return y.target===h.target})||[]);x.length&&n.removeElements(x)}this.preExecute("elements.move",function(r){var o=r.newParent,a=r.shapes,s=r.delta,c=a[0];if(!(!c||!o)){o&&o.waypoints&&(r.newParent=o=o.parent);var l=pe(c),u={x:l.x+s.x,y:l.y+s.y},f=De(o.children,function(p){var d=t.canInsert(a,p);return d&&qu(p.waypoints,u)});f&&(r.targetFlow=f,r.position=u)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,a=r.targetFlow,s=r.position;a&&i(o[0],a,s)},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;t.canInsert(a,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,a=r.targetFlow,s=r.position;a&&i(o,a,s)},!0)}ie(Np,G);Np.$inject=["eventBus","bpmnRules","modeling"];function Wm(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Um(e){return O({},e)}function Lp(e,t){G.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.connection,o=i.source,a=i.target,s=i.hints;if(!(s&&s.createElementsBehavior===!1)&&Vr(r)){var c=[];b(o,"bpmn:EventBasedGateway")?c=a.incoming.filter(l=>l!==r&&Vr(l)):c=a.incoming.filter(l=>l!==r&&Vr(l)&&b(l.source,"bpmn:EventBasedGateway")),c.forEach(function(l){t.removeConnection(l)})}}),this.preExecuted("shape.replace",function(n){var i=n.context,r=i.newShape;if(b(r,"bpmn:EventBasedGateway")){var o=r.outgoing.filter(Vr).reduce(function(a,s){return a.includes(s.target)?a:a.concat(s.target)},[]);o.forEach(function(a){a.incoming.filter(Vr).forEach(function(s){const c=a.incoming.filter(Vr).filter(function(l){return l.source===r});(s.source!==r||c.length>1)&&t.removeConnection(s)})})}})}Lp.$inject=["eventBus","modeling"];ie(Lp,G);function Vr(e){return b(e,"bpmn:SequenceFlow")}var Es=1500,Gm=2e3;function Jb(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Es,function(i){var r=i.context,o=r.shape||i.shape,a=i.hover;b(a,"bpmn:Lane")&&!be(o,["bpmn:Lane","bpmn:Participant"])&&(i.hover=hn(a),i.hoverGfx=e.getGraphics(i.hover));var s=n.getRootElement();a!==s&&(o.labelTarget||be(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(i.hover=s,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Es,function(i){var r=i.hover;b(r,"bpmn:Lane")&&(i.hover=hn(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],Es,function(i){var r=i.context,o=i.hover,a=r.type;b(o,"bpmn:Lane")&&/reconnect/.test(a)&&(i.hover=hn(o)||o,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],Es,function(i){var r=i.context,o=r.start;b(o,"bpmn:Lane")&&(r.start=hn(o)||o)}),t.on("shape.move.start",Gm,function(i){var r=i.shape;b(r,"bpmn:Lane")&&(i.shape=hn(r)||r)}),t.on("spaceTool.move",Gm,function(i){var r=i.hover;r&&b(r,"bpmn:Lane")&&(i.hover=hn(r))})}Jb.$inject=["elementRegistry","eventBus","canvas"];function JM(e){return e.create("bpmn:Category")}function QM(e){return e.create("bpmn:CategoryValue")}function eD(e,t,n){return ut(t.get("categoryValue"),e),e.$parent=t,ut(n.get("rootElements"),t),t.$parent=n,e}function tD(e){var t=e.$parent;return t&&(it(t.get("categoryValue"),e),e.$parent=null),e}function nD(e){var t=e.$parent;return t&&(it(t.get("rootElements"),e),e.$parent=null),e}var Km=770;function Bp(e,t,n,i,r,o){r.invoke(G,this);function a(){return n.filter(function(h){return b(h,"bpmn:Group")})}function s(h,m){return h.some(function(v){var E=X(v),C=E.categoryValueRef&&E.categoryValueRef.$parent;return C===m})}function c(h,m){return h.some(function(v){var E=X(v);return E.categoryValueRef===m})}function l(h,m,v){var E=a().filter(function(C){return C.businessObject!==v});m&&!s(E,m)&&nD(m),h&&!c(E,h)&&tD(h)}function u(h,m){return eD(h,m,t.getDefinitions())}function f(h,m){var v=X(h),E=v.categoryValueRef;E||(E=v.categoryValueRef=m.categoryValue=m.categoryValue||QM(e));var C=E.$parent;C||(C=E.$parent=m.category=m.category||JM(e)),u(E,C,t.getDefinitions())}function p(h,m){var v=m.category,E=m.categoryValue,C=X(h);E?(C.categoryValueRef=null,l(E,v,C)):l(null,C.categoryValueRef.$parent,C)}this.execute("label.create",function(h){var m=h.context,v=m.labelTarget;b(v,"bpmn:Group")&&f(v,m)}),this.revert("label.create",function(h){var m=h.context,v=m.labelTarget;b(v,"bpmn:Group")&&p(v,m)}),this.execute("shape.delete",function(h){var m=h.context,v=m.shape,E=X(v);if(!(!b(v,"bpmn:Group")||v.labelTarget)){var C=m.categoryValue=E.categoryValueRef,x;C&&(x=m.category=C.$parent,l(C,x,E),E.categoryValueRef=null)}}),this.reverted("shape.delete",function(h){var m=h.context,v=m.shape;if(!(!b(v,"bpmn:Group")||v.labelTarget)){var E=m.category,C=m.categoryValue,x=X(v);C&&(x.categoryValueRef=C,u(C,E))}}),this.execute("shape.create",function(h){var m=h.context,v=m.shape;!b(v,"bpmn:Group")||v.labelTarget||X(v).categoryValueRef&&f(v,m)}),this.reverted("shape.create",function(h){var m=h.context,v=m.shape;!b(v,"bpmn:Group")||v.labelTarget||X(v).categoryValueRef&&p(v,m)});function d(h,m){var v=e.create(h.$type);return o.copyElement(h,v,null,m)}i.on("copyPaste.copyElement",Km,function(h){var m=h.descriptor,v=h.element;if(!(!b(v,"bpmn:Group")||v.labelTarget)){var E=X(v);if(E.categoryValueRef){var C=E.categoryValueRef;m.categoryValue=d(C,!0),C.$parent&&(m.category=d(C.$parent,!0))}}}),i.on("copyPaste.pasteElement",Km,function(h){var m=h.descriptor,v=m.businessObject,E=m.categoryValue,C=m.category;E&&(E=v.categoryValueRef=d(E)),C&&(E.$parent=d(C)),delete m.category,delete m.categoryValue})}Bp.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];ie(Bp,G);function nf(e,t,n,i){var r,o,a,s,c;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(o=e.y-n.y,a=e.x-n.x,c=(i.x-n.x)*o-(i.y-n.y)*a,s=c/r,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function Qb(e){function t(i,r,o){var a={x:o.x,y:o.y-50},s={x:o.x-50,y:o.y},c=nf(i,r,o,a),l=nf(i,r,o,s),u;c&&l?Ym(c,o)>Ym(l,o)?u=l:u=c:u=c||l,i.original=u}function n(i){var r=i.waypoints;t(r[0],r[1],pe(i.source)),t(r[r.length-1],r[r.length-2],pe(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}Qb.$inject=["eventBus"];function Ym(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $p(e){G.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=n.context.shape,r=X(i),o=Ae(i);if(be(r,t)){var a=o.get("isHorizontal");a===void 0&&(a=!0),o.set("isHorizontal",a)}})}$p.$inject=["eventBus"];ie($p,G);var ex=Math.sqrt,tx=Math.min,iD=Math.max,qm=Math.abs;function Xm(e){return Math.pow(e,2)}function Bo(e,t){return ex(Xm(e.x-t.x)+Xm(e.y-t.y))}function rD(e,t){var n=0,i,r,o,a,s,c,l,u,f,p,d;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],Jm(i,r)?l=[i]:(o=Bo(e,i),a=Bo(e,r),c=tx(o,a),l=oD(i,r,e,c)),l.length<1)throw new Error("expected between [1, 2] circle -> line intersections");l.length===1&&(u={type:"bendpoint",position:l[0],segmentIndex:n,bendpointIndex:Jm(i,l[0])?n:n+1}),l.length===2&&(s=sD(l[0],l[1]),u={type:"segment",position:s,segmentIndex:n,relativeLocation:Bo(i,s)/Bo(i,r)}),f=Bo(u.position,e),(!d||p>f)&&(d=u,p=f)}return d}function oD(e,t,n,i){var r=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,c=r*r+o*o,l=r*a+o*s,u=a*a+s*s-i*i,f=l/c,p=u/c,d=f*f-p;if(d<0&&d>-1e-6&&(d=0),d<0)return[];var h=ex(d),m=-f+h,v=-f-h,E={x:e.x-r*m,y:e.y-o*m};if(d===0)return[E];var C={x:e.x-r*v,y:e.y-o*v};return[E,C].filter(function(x){return aD(x,e,t)})}function aD(e,t,n){return Zm(e.x,t.x,n.x)&&Zm(e.y,t.y,n.y)}function Zm(e,t,n){return e>=tx(t,n)-yc&&e<=iD(t,n)+yc}function sD(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var yc=.1;function Jm(e,t){return qm(e.x-t.x)<=yc&&qm(e.y-t.y)<=yc}function cD(e,t,n,i){var r=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var a=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return r===a?s:r>=s?r+o<s?s:r+o:r}if(i.bendpointMove){var c=i.bendpointMove.insert,l=i.bendpointMove.bendpointIndex,u;if(o===0)return r;if(r>=l&&(u=c?r+1:r-1),r<l&&(u=r,c&&n.type!=="bendpoint"&&l-1===r)){var f=ix(t,l);f<n.relativeLocation&&u++}return u}return o===0?r:i.connectionStart&&r===0?0:i.connectionEnd&&r===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function nx(e,t,n,i){var r=0,o=0,a={point:e,delta:{x:0,y:0}},s=rD(e,n),c=s.segmentIndex,l=cD(n,t,s,i);if(l<0||l>t.length-2||l===null)return a;var u=Qm(n,c),f=Qm(t,l),p=s.position,d=uD(u,p),h=lD(u,f);if(s.type==="bendpoint"){var m=t.length-n.length,v=s.bendpointIndex,E=n[v];if(t.indexOf(E)!==-1)return a;if(m===0){var C=t[v];return r=C.x-s.position.x,o=C.y-s.position.y,{delta:{x:r,y:o},point:{x:e.x+r,y:e.y+o}}}m<0&&v!==0&&v<n.length-1&&(d=ix(n,v))}var x={x:(f[1].x-f[0].x)*d+f[0].x,y:(f[1].y-f[0].y)*d+f[0].y},y=QA({x:e.x-p.x,y:e.y-p.y},h);return r=x.x+y.x-e.x,o=x.y+y.y-e.y,{point:ai(x),delta:ai({x:r,y:o})}}function ix(e,t){var n=hc(e[t-1],e[t]),i=hc(e[t],e[t+1]),r=n/(n+i);return r}function lD(e,t){var n=wm(e),i=wm(t);return i-n}function Qm(e,t){return[e[t],e[t+1]]}function uD(e,t){var n=hc(e[0],e[1]),i=hc(e[0],t);return n===0?0:i/n}function fD(e,t,n,i){var r=pe(e);return nx(r,t,n,i).delta}function Oa(e,t,n){var i=ea(t),r=ea(n),o=Tn(e,i),a={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return ai({x:r.x+a.x,y:r.y+a.y})}function eg(e,t,n){var i=ea(e),r=ea(t),o=ea(n),a=Tn(e,i),s=Tn(i,r),c=pD(i,t,n);if(c)return c;var l={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},u={x:o.x+l.x,y:o.y+l.y};return ai({x:u.x+a.x-e.x,y:u.y+a.y-e.y})}function pD(e,t,n){var i=le(t),r=le(n);if(dD(i,r))return null;var o=Tt(t,e),a,s,c;if(o==="top")a={x:0,y:r.bottom-i.bottom};else if(o==="bottom")a={x:0,y:r.top-i.top};else if(o==="right")a={x:r.left-i.left,y:0};else if(o==="left")a={x:r.right-i.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},c=Tt(n,s),c!==o?null:a}function dD(e,t){return hD(e,t)||mD(e,t)}function hD(e,t){return e.right!==t.right&&e.left!==t.left}function mD(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var tg="name",ng="text";function jp(e,t,n,i){G.call(this,e),this.postExecute("element.updateProperties",r),this.postExecute("element.updateModdleProperties",a=>{X(a.context.element)===a.context.moddleElement&&r(a)});function r(a){var s=a.context,c=s.element,l=s.properties;if(tg in l&&t.updateLabel(c,l[tg]),ng in l&&b(c,"bpmn:TextAnnotation")){var u=i.getTextAnnotationBounds({x:c.x,y:c.y,width:c.width,height:c.height},l[ng]||"");t.updateLabel(c,l.text,u)}}this.postExecute(["shape.create","connection.create"],function(a){var s=a.context,c=s.hints||{};if(c.createElementsBehavior!==!1){var l=s.shape||s.connection;Me(l)||!wr(l)||an(l)&&t.updateLabel(l,an(l))}}),this.postExecute("shape.delete",function(a){var s=a.context,c=s.labelTarget,l=s.hints||{};c&&l.unsetLabel!==!1&&t.updateLabel(c,null,null,{removeShape:!1})});function o(a){var s=a.context,c=s.connection,l=c.label,u=O({},s.hints),f=s.newWaypoints||c.waypoints,p=s.oldWaypoints;return typeof u.startChanged>"u"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged>"u"&&(u.endChanged=!!u.connectionEnd),fD(l,f,p,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var s=a.context,c=s.hints||{};if(c.labelBehavior!==!1){var l=s.connection,u=l.label,f;!u||!u.parent||(f=o(a),t.moveShape(u,f))}}),this.postExecute(["shape.replace"],function(a){var s=a.context,c=s.newShape,l=s.oldShape,u=X(c);u&&wr(u)&&l.label&&c.label&&(c.label.x=l.label.x,c.label.y=l.label.y)}),this.postExecute("shape.resize",function(a){var s=a.context,c=s.shape,l=s.newBounds,u=s.oldBounds;if(Ic(c)){var f=c.label,p=pe(f),d=yD(u),h=vD(p,d),m=gD(h,u,l);t.moveShape(f,m)}})}ie(jp,G);jp.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function gD(e,t,n){var i=Oa(e,t,n);return ai(Tn(i,e))}function vD(e,t){if(t.length){var n=_D(e,t);return _p(e,n)}}function yD(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function _D(e,t){var n=t.map(function(r){return{line:r,distance:Ob(e,r)}}),i=Gn(n,"distance");return i[0].line}function bD(e,t,n,i){return nx(e,t,n,i).point}function Fp(e,t){G.call(this,e);function n(i,r){var o=i.context,a=o.connection,s=O({},o.hints),c=o.newWaypoints||a.waypoints,l=o.oldWaypoints;return typeof s.startChanged>"u"&&(s.startChanged=!!s.connectionStart),typeof s.endChanged>"u"&&(s.endChanged=!!s.connectionEnd),bD(r,c,l,s)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var r=i.context,o=r.connection,a=o.outgoing,s=o.incoming;s.forEach(function(c){var l=c.waypoints[c.waypoints.length-1],u=n(i,l),f=[].concat(c.waypoints.slice(0,-1),[u]);t.updateWaypoints(c,f)}),a.forEach(function(c){var l=c.waypoints[0],u=n(i,l),f=[].concat([u],c.waypoints.slice(1));t.updateWaypoints(c,f)})}),this.postExecute(["connection.move"],function(i){var r=i.context,o=r.connection,a=o.outgoing,s=o.incoming,c=r.delta;s.forEach(function(l){var u=l.waypoints[l.waypoints.length-1],f={x:u.x+c.x,y:u.y+c.y},p=[].concat(l.waypoints.slice(0,-1),[f]);t.updateWaypoints(l,p)}),a.forEach(function(l){var u=l.waypoints[0],f={x:u.x+c.x,y:u.y+c.y},p=[].concat([f],l.waypoints.slice(1));t.updateWaypoints(l,p)})})}ie(Fp,G);Fp.$inject=["eventBus","modeling"];function ll(e,t,n){var i=fl(e),r=ox(i,t),o=i[0];return r.length?r[r.length-1]:Oa(o.original||o,n,t)}function ul(e,t,n){var i=fl(e),r=ox(i,t),o=i[i.length-1];return r.length?r[0]:Oa(o.original||o,n,t)}function Hp(e,t,n){var i=fl(e),r=rx(t,n),o=i[0];return Oa(o.original||o,r,t)}function zp(e,t,n){var i=fl(e),r=rx(t,n),o=i[i.length-1];return Oa(o.original||o,r,t)}function rx(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function fl(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function ox(e,t){var n=Rt(e,ED);return Ee(n,function(i){return xD(i,t)})}function xD(e,t){return Tt(t,e,1)==="intersect"}function ED(e){return e.original||e}function Vp(e,t){G.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(wD(i,r)){var o=SD(i);o.incoming.forEach(function(a){var s=ul(a,r,i);t.reconnectEnd(a,r,s)}),o.outgoing.forEach(function(a){var s=ll(a,r,i);t.reconnectStart(a,r,s)})}},!0)}Vp.$inject=["eventBus","modeling"];ie(Vp,G);function wD(e,t){return b(e,"bpmn:Participant")&&we(e)&&b(t,"bpmn:Participant")&&!we(t)}function SD(e){var t=Sa([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(o){b(o,"bpmn:MessageFlow")&&n.push(o)}),r.outgoing.forEach(function(o){b(o,"bpmn:MessageFlow")&&i.push(o)}))},[]),{incoming:n,outgoing:i}}const CD=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function ax(e){const t=X(e);if(!b(t,"bpmn:BoundaryEvent")&&!(b(t,"bpmn:StartEvent")&&Pt(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:CD.some(i=>b(n[0],i))}function sx(e){return b(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function Wp(e,t){e.invoke(G,this),this.postExecuted("shape.replace",function(n){const i=n.context.oldShape,r=n.context.newShape,o=n.context.hints;if(!ax(r))return;const a=sx(r);if(o.targetElement&&o.targetElement[a]!==void 0)return;const c=X(i).get(a),l=X(r).get(a);c!==l&&t.updateProperties(r,{[a]:c})})}Wp.$inject=["injector","modeling"];ie(Wp,G);function Up(e,t){G.call(this,e),this.preExecute("shape.resize",function(n){var i=n.shape,r=Ae(i),o=r&&r.get("label"),a=o&&o.get("bounds");a&&t.updateModdleProperties(i,o,{bounds:void 0})},!0)}ie(Up,G);Up.$inject=["eventBus","modeling"];function Gp(e,t,n){G.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var o=r.incoming[0],a=r.outgoing[0];if(!(!b(o,"bpmn:SequenceFlow")||!b(a,"bpmn:SequenceFlow"))&&t.canConnect(o.source,a.target,o)){var s=RD(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,s)}}})}ie(Gp,G);Gp.$inject=["eventBus","bpmnRules","modeling"];function Wr(e){return e.original||e}function RD(e,t){var n=nf(Wr(e[e.length-2]),Wr(e[e.length-1]),Wr(t[1]),Wr(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[Wr(e[0]),Wr(t[t.length-1])]}function Kp(e,t){G.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;b(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;if(i&&!i.businessObject.participants.length){var r=t.makeProcess(),o=i.children.slice();t.moveElements(o,{x:0,y:0},r)}},!0)}Kp.$inject=["eventBus","modeling"];ie(Kp,G);function Yp(e,t,n,i){G.call(this,e);var r=i.get("dragging",!1);function o(c){var l=c.source,u=c.target,f=c.parent;if(f){var p,d;b(c,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(l,u)||(d=!0),n.canConnectMessageFlow(l,u)&&(p="bpmn:MessageFlow")),b(c,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(l,u)||(d=!0),n.canConnectSequenceFlow(l,u)&&(p="bpmn:SequenceFlow")),d&&t.removeConnection(c),p&&t.connect(l,u,{type:p,waypoints:c.waypoints.slice()})}}function a(c){var l=c.context,u=l.connection,f=l.newSource||u.source,p=l.newTarget||u.target,d,h;d=n.canConnect(f,p),!(!d||d.type===u.type)&&(h=t.connect(f,p,{type:d.type,associationDirection:d.associationDirection,waypoints:u.waypoints.slice()}),u.parent&&t.removeConnection(u),l.connection=h,r&&s(u,h))}function s(c,l){var u=r.context(),f=u&&u.payload.previousSelection,p;!f||!f.length||(p=f.indexOf(c),p!==-1&&f.splice(p,1,l))}this.postExecuted("elements.move",function(c){var l=c.closure,u=l.allConnections;A(u,o)},!0),this.preExecute("connection.reconnect",a),this.postExecuted("element.updateProperties",function(c){var l=c.context,u=l.properties,f=l.element,p=f.businessObject,d;u.default&&(d=De(f.outgoing,Pn({id:f.businessObject.default.id})),d&&t.updateProperties(d,{conditionExpression:void 0})),u.conditionExpression&&p.sourceRef.default===p&&t.updateProperties(f.source,{default:void 0})})}ie(Yp,G);Yp.$inject=["eventBus","modeling","bpmnRules","injector"];function pl(e,t,n,i,r,o){i.invoke(G,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var s=a.context,c=s.parent,l=s.elements,u=Xt(l,function(f,p){var d=t.canReplace([p],p.host||p.parent||c);return d?f.concat(d.replacements):f},[]);u.length&&this._replaceElements(l,u)},this),this.postExecuted(["elements.move"],500,function(a){var s=a.context,c=s.newParent,l=s.newHost,u=[];A(s.closure.topLevel,function(p){Pt(p)?u=u.concat(p.children):u=u.concat(p)}),u.length===1&&l&&(c=l);var f=t.canReplace(u,c);f&&this._replaceElements(u,f.replacements,l)},this),this.postExecute(["shape.replace"],1500,function(a){var s=a.context,c=s.oldShape,l=s.newShape,u=c.attachers,f;u&&u.length&&(f=t.canReplace(u,l),this._replaceElements(u,f.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var s=a.context,c=s.oldShape,l=s.newShape;r.unclaimId(c.businessObject.id,c.businessObject),r.updateProperties(l,{id:c.id})})}ie(pl,G);pl.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;A(t,function(o){var a={type:o.newElementType},s=n.get(o.oldElementId),c=e.indexOf(s);e[c]=i.replaceElement(s,a,{select:!1})}),t&&r.select(e)};pl.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var PD=1500,TD={width:140,height:120},qp={width:300,height:60},Xp={width:60,height:300},Gs={width:300,height:150},Ks={width:150,height:300},cx={width:140,height:120},lx={width:50,height:30};function ux(e){e.on("resize.start",PD,function(t){var n=t.context,i=n.shape,r=n.direction,o=n.balanced;(b(i,"bpmn:Lane")||b(i,"bpmn:Participant"))&&(n.resizeConstraints=OD(i,r,o)),b(i,"bpmn:SubProcess")&&we(i)&&(n.minDimensions=cx),b(i,"bpmn:TextAnnotation")&&(n.minDimensions=lx)})}ux.$inject=["eventBus"];var wi=Math.abs,AD=Math.min,MD=Math.max;function fx(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function Ur(e,t,n){return fx(e,t,n,AD)}function Gr(e,t,n){return fx(e,t,n,MD)}var DD={top:20,left:50,right:20,bottom:20},kD={top:50,left:20,right:20,bottom:20};function OD(e,t,n){var i=hn(e),r=!0,o=!0,a=sl(i,[i]),s=le(e),c={},l={},u=dt(e),f=u?qp:Xp;/n/.test(t)?l.top=s.bottom-f.height:/e/.test(t)?l.right=s.left+f.width:/s/.test(t)?l.bottom=s.top+f.height:/w/.test(t)&&(l.left=s.right-f.width),a.forEach(function(h){var m=le(h);u?(m.top<s.top-10&&(r=!1),m.bottom>s.bottom+10&&(o=!1)):(m.left<s.left-10&&(r=!1),m.right>s.right+10&&(o=!1)),/n/.test(t)&&(n&&wi(s.top-m.bottom)<10&&Gr(c,"top",m.top+f.height),wi(s.top-m.top)<5&&Ur(l,"top",m.bottom-f.height)),/e/.test(t)&&(n&&wi(s.right-m.left)<10&&Ur(c,"right",m.right-f.width),wi(s.right-m.right)<5&&Gr(l,"right",m.left+f.width)),/s/.test(t)&&(n&&wi(s.bottom-m.top)<10&&Ur(c,"bottom",m.bottom-f.height),wi(s.bottom-m.bottom)<5&&Gr(l,"bottom",m.top+f.height)),/w/.test(t)&&(n&&wi(s.left-m.right)<10&&Gr(c,"left",m.left+f.width),wi(s.left-m.left)<5&&Ur(l,"left",m.right-f.width))});var p=i.children.filter(function(h){return!h.hidden&&!h.waypoints&&(b(h,"bpmn:FlowElement")||b(h,"bpmn:Artifact"))}),d=u?DD:kD;return p.forEach(function(h){var m=le(h);/n/.test(t)&&(!u||r)&&Ur(l,"top",m.top-d.top),/e/.test(t)&&(u||o)&&Gr(l,"right",m.right+d.right),/s/.test(t)&&(!u||o)&&Gr(l,"bottom",m.bottom+d.bottom),/w/.test(t)&&(u||r)&&Ur(l,"left",m.left-d.left)}),{min:l,max:c}}var ig=1001;function px(e,t){e.on("resize.start",ig+500,function(n){var i=n.context,r=i.shape;(b(r,"bpmn:Lane")||b(r,"bpmn:Participant"))&&(i.balanced=!da(n))}),e.on("resize.end",ig,function(n){var i=n.context,r=i.shape,o=i.canExecute,a=i.newBounds;if(b(r,"bpmn:Lane")||b(r,"bpmn:Participant"))return o&&(a=e_(a),t.resizeLane(r,a,i.balanced)),!1})}px.$inject=["eventBus","modeling"];var ID=500;function Zp(e,t,n,i,r){n.invoke(G,this);function o(u){return be(u,["bpmn:ReceiveTask","bpmn:SendTask"])||ND(u,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(u){var f=e.getDefinitions(),p=f.get("rootElements");return!!De(p,Pn({id:u.id}))}function s(u){if(b(u,"bpmn:ErrorEventDefinition"))return"errorRef";if(b(u,"bpmn:EscalationEventDefinition"))return"escalationRef";if(b(u,"bpmn:MessageEventDefinition"))return"messageRef";if(b(u,"bpmn:SignalEventDefinition"))return"signalRef"}function c(u){if(be(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.get("messageRef");var f=u.get("eventDefinitions"),p=f[0];return p.get(s(p))}function l(u,f){if(be(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.set("messageRef",f);var p=u.get("eventDefinitions"),d=p[0];return d.set(s(d),f)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var f=u.shape||u.element;if(o(f)){var p=X(f),d=c(p),h;d&&!a(d)&&(h=e.getDefinitions().get("rootElements"),ut(h,d),u.addedRootElement=d)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var f=u.addedRootElement;if(f){var p=e.getDefinitions().get("rootElements");it(p,f)}},!0),t.on("copyPaste.copyElement",function(u){var f=u.descriptor,p=u.element;if(!(p.labelTarget||!o(p))){var d=X(p),h=c(d);h&&(f.referencedRootElement=h)}}),t.on("copyPaste.pasteElement",ID,function(u){var f=u.descriptor,p=f.businessObject,d=f.referencedRootElement;d&&(a(d)||(d=i.copyElement(d,r.create(d.$type))),l(p,d),delete f.referencedRootElement)})}Zp.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];ie(Zp,G);function ND(e,t){return ge(t)||(t=[t]),zi(t,function(n){return fo(e,n)})}var dx=Math.max;function hx(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,o={};return A(n,function(a){var s=a.id;b(a,"bpmn:Participant")&&(o[s]=BD(a,i,r)),b(a,"bpmn:Lane")&&(o[s]=dt(a)?qp:Xp),b(a,"bpmn:SubProcess")&&we(a)&&(o[s]=cx),b(a,"bpmn:TextAnnotation")&&(o[s]=lx),b(a,"bpmn:Group")&&(o[s]=TD)}),o})}hx.$inject=["eventBus"];function LD(e){return e==="x"}function BD(e,t,n){var i=dt(e);if(!FD(e))return i?Gs:Ks;var r=LD(t),o={};return r?i?o=Gs:o={width:jD(e,n,r),height:Ks.height}:i?o={width:Gs.width,height:$D(e,n,r)}:o=Ks,o}function $D(e,t,n){var i;return i=HD(e,t,n),dx(Gs.height,i)}function jD(e,t,n){var i;return i=zD(e,t,n),dx(Ks.width,i)}function FD(e){return!!Zi(e).length}function HD(e,t,n){var i=Zi(e),r;return r=Jp(i,t,n),e.height-r.height+qp.height}function zD(e,t,n){var i=Zi(e),r;return r=Jp(i,t,n),e.width-r.width+Xp.width}function Jp(e,t,n){var i,r,o;for(i=0;i<e.length;i++)if(r=e[i],!n&&t>=r.y&&t<=r.y+r.height||n&&t>=r.x&&t<=r.x+r.width)return o=Zi(r),o.length?Jp(o,t,n):r}var rg=400,VD=600,og={x:180,y:160};function Ji(e,t,n,i,r,o,a){G.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=r,this._bpmnjs=o,this._elementRegistry=a;var s=this;function c(f){return b(f,"bpmn:SubProcess")&&!we(f)}function l(f){var p=f.shape,d=f.newRootElement,h=X(p);d=s._addDiagram(d||h),f.newRootElement=e.addRootElement(d)}function u(f){var p=f.shape,d=X(p);s._removeDiagram(d);var h=f.newRootElement=a.get(ii(d));e.removeRootElement(h)}this.executed("shape.create",function(f){var p=f.shape;c(p)&&l(f)},!0),this.postExecuted("shape.create",function(f){var p=f.shape,d=f.newRootElement;!d||!p.children||(s._showRecursively(p.children),s._moveChildrenToShape(p,d))},!0),this.reverted("shape.create",function(f){var p=f.shape;c(p)&&u(f)},!0),this.preExecuted("shape.delete",function(f){var p=f.shape;if(c(p)){var d=a.get(ii(p));d&&n.removeElements(d.children.slice())}},!0),this.executed("shape.delete",function(f){var p=f.shape;c(p)&&u(f)},!0),this.reverted("shape.delete",function(f){var p=f.shape;c(p)&&l(f)},!0),this.preExecuted("shape.replace",function(f){var p=f.oldShape,d=f.newShape;!c(p)||!c(d)||(f.oldRoot=e.removeRootElement(ii(p)))},!0),this.postExecuted("shape.replace",function(f){var p=f.newShape,d=f.oldRoot,h=e.findRoot(ii(p));if(!(!d||!h)){var m=d.children;n.moveElements(m,{x:0,y:0},h)}},!0),this.executed("element.updateProperties",function(f){var p=f.element;if(b(p,"bpmn:SubProcess")){var d=f.properties,h=f.oldProperties,m=h.id,v=d.id;if(m!==v){if(js(p)){a.updateId(p,lr(v)),a.updateId(m,v);return}var E=a.get(lr(m));E&&a.updateId(lr(m),lr(v))}}},!0),this.reverted("element.updateProperties",function(f){var p=f.element;if(b(p,"bpmn:SubProcess")){var d=f.properties,h=f.oldProperties,m=h.id,v=d.id;if(m!==v){if(js(p)){a.updateId(p,lr(m)),a.updateId(v,m);return}var E=a.get(lr(v));E&&a.updateId(E,lr(m))}}},!0),t.on("element.changed",function(f){var p=f.element;if(js(p)){var d=p,h=a.get(jh(d));!h||h===d||t.fire("element.changed",{element:h})}}),this.executed("shape.toggleCollapse",rg,function(f){var p=f.shape;b(p,"bpmn:SubProcess")&&(we(p)?u(f):(l(f),s._showRecursively(p.children)))},!0),this.reverted("shape.toggleCollapse",rg,function(f){var p=f.shape;b(p,"bpmn:SubProcess")&&(we(p)?u(f):(l(f),s._showRecursively(p.children)))},!0),this.postExecuted("shape.toggleCollapse",VD,function(f){var p=f.shape;if(b(p,"bpmn:SubProcess")){var d=f.newRootElement;d&&(we(p)?s._moveChildrenToShape(d,p):s._moveChildrenToShape(p,d))}},!0),t.on("copyPaste.createTree",function(f){var p=f.element,d=f.children;if(c(p)){var h=ii(p),m=a.get(h);m&&d.push.apply(d,m.children)}}),t.on("copyPaste.copyElement",function(f){var p=f.descriptor,d=f.element,h=f.elements,m=d.parent,v=b(Ae(m),"bpmndi:BPMNPlane");if(v){var E=jh(m),C=De(h,function(x){return x.id===E});C&&(p.parent=C.id)}}),t.on("copyPaste.pasteElement",function(f){var p=f.descriptor;p.parent&&(c(p.parent)||p.parent.hidden)&&(p.hidden=!0)})}ie(Ji,G);Ji.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,i=e.children,r;if(i){i=i.concat(i.reduce(function(l,u){return u.label&&u.label.parent!==e?l.concat(u.label):l},[]));var o=i.filter(function(l){return!l.hidden});if(!o.length){n.moveElements(i,{x:0,y:0},t,{autoResize:!1});return}var a=pt(o);if(!t.x)r={x:og.x-a.x,y:og.y-a.y};else{var s=pe(t),c=pe(a);r={x:s.x-c.x,y:s.y-c.y}}n.moveElements(i,r,t,{autoResize:!1})}};Ji.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(r){r.hidden=!!t,i=i.concat(r),r.children&&(i=i.concat(n._showRecursively(r.children,r.collapsed||t)))}),i};Ji.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};Ji.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:i});i.$parent=r;var o=n.createRoot({id:ii(e),type:e.$type,di:i,businessObject:e,collapsed:!0});return o};Ji.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,i=De(n,function(r){return r.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(i),1),i};Ji.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function Qp(e,t){e.invoke(G,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!b(r,"bpmn:SubProcess")||!(b(i,"bpmn:Task")||b(i,"bpmn:CallActivity"))||!we(r))){var o=WD(r);t.createShape({type:"bpmn:StartEvent"},o,r)}})}Qp.$inject=["injector","modeling"];ie(Qp,G);function WD(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function ed(e){G.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;b(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&b(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}ie(ed,G);ed.$inject=["eventBus"];function td(e,t){G.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var i=n.shape;if(we(i))return;var r=Sa(i);r.forEach(function(a){var s=a.incoming.slice(),c=a.outgoing.slice();A(s,function(l){o(l,!0)}),A(c,function(l){o(l,!1)})});function o(a,s){r.indexOf(a.source)!==-1&&r.indexOf(a.target)!==-1||(s?t.reconnectEnd(a,i,pe(i)):t.reconnectStart(a,i,pe(i)))}},!0)}ie(td,G);td.$inject=["eventBus","modeling"];var ru=500;function nd(e,t,n){G.call(this,e);function i(a){a.length&&a.forEach(function(s){s.type==="label"&&!s.businessObject.name&&(s.hidden=!0)})}function r(a,s){var c=a.children,l=s,u,f;return u=UD(c).concat([a]),f=Zb(u),f?(l.width=Math.max(f.width,l.width),l.height=Math.max(f.height,l.height),l.x=f.x+(f.width-l.width)/2,l.y=f.y+(f.height-l.height)/2):(l.x=a.x+(a.width-l.width)/2,l.y=a.y+(a.height-l.height)/2),l}function o(a,s){return{x:a.x+(a.width-s.width)/2,y:a.y+(a.height-s.height)/2,width:s.width,height:s.height}}this.executed(["shape.toggleCollapse"],ru,function(a){var s=a.context,c=s.shape;b(c,"bpmn:SubProcess")&&(c.collapsed?Ae(c).isExpanded=!1:(i(c.children),Ae(c).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],ru,function(a){var s=a.context,c=s.shape;c.collapsed?Ae(c).isExpanded=!1:Ae(c).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],ru,function(a){var s=a.context.shape,c=t.getDefaultSize(s),l;s.collapsed?l=o(s,c):l=r(s,c),n.resizeShape(s,l,null,{autoResize:s.collapsed?!1:"nwse"})})}ie(nd,G);nd.$inject=["eventBus","elementFactory","modeling"];function UD(e){return e.filter(function(t){return!t.hidden})}function id(e,t,n,i){t.invoke(G,this),this.preExecute("shape.delete",function(r){var o=r.context,a=o.shape,s=a.businessObject;Me(a)||(b(a,"bpmn:Participant")&&we(a)&&n.ids.unclaim(s.processRef.id),i.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(r){var o=r.context,a=o.connection,s=a.businessObject;i.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),o=r.businessObject;b(r,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}ie(id,G);id.$inject=["canvas","injector","moddle","modeling"];function rd(e,t){G.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,o=r.source;GD(r,o)&&t.updateProperties(o,{default:null})})}ie(rd,G);rd.$inject=["eventBus","modeling"];function GD(e,t){if(!b(e,"bpmn:SequenceFlow"))return!1;var n=X(t),i=X(e);return n.get("default")===i}var KD=500,YD=5e3;function od(e,t){G.call(this,e);var n;function i(){return n=n||new qD,n.enter(),n}function r(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var s=n.leave();return s&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),s}var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,YD,function(s){i()}),this.postExecuted(a,KD,function(s){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var c=s.context,l=c.shape,u=r();l.labelTarget||(b(l,"bpmn:Lane")&&u.addLane(l),b(l,"bpmn:FlowNode")&&u.addFlowNode(l))})}od.$inject=["eventBus","modeling"];ie(od,G);function qD(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function ad(e,t){G.call(this,e),this.postExecuted("elements.create",function(n){const i=n.context,r=i.elements;for(const o of r)XD(o)&&!JD(o)&&t.updateProperties(o,{isForCompensation:void 0})})}ie(ad,G);ad.$inject=["eventBus","modeling"];function XD(e){const t=X(e);return t&&t.isForCompensation}function ZD(e){return e&&b(e,"bpmn:BoundaryEvent")&&fo(e,"bpmn:CompensateEventDefinition")}function JD(e){return e.incoming.filter(n=>ZD(n.source)).length>0}const QD={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",Sp],appendBehavior:["type",Cp],associationBehavior:["type",Rp],attachEventBehavior:["type",ol],boundaryEventBehavior:["type",Pp],compensateBoundaryEventBehaviour:["type",Tp],createBehavior:["type",Ap],createDataObjectBehavior:["type",Mp],createParticipantBehavior:["type",Dp],dataInputAssociationBehavior:["type",kp],dataStoreBehavior:["type",Op],deleteLaneBehavior:["type",Ip],detachEventBehavior:["type",cl],dropOnFlowBehavior:["type",Np],eventBasedGatewayBehavior:["type",Lp],fixHoverBehavior:["type",Jb],groupBehavior:["type",Bp],importDockingFix:["type",Qb],isHorizontalFix:["type",$p],labelBehavior:["type",jp],layoutConnectionBehavior:["type",Fp],messageFlowBehavior:["type",Vp],nonInterruptingBehavior:["type",Wp],removeElementBehavior:["type",Gp],removeEmbeddedLabelBoundsBehavior:["type",Up],removeParticipantBehavior:["type",Kp],replaceConnectionBehavior:["type",Yp],replaceElementBehaviour:["type",pl],resizeBehavior:["type",ux],resizeLaneBehavior:["type",px],rootElementReferenceBehavior:["type",Zp],spaceToolBehavior:["type",hx],subProcessPlaneBehavior:["type",Ji],subProcessStartEventBehavior:["type",Qp],textAnnotationBehavior:["type",ed],toggleCollapseConnectionBehaviour:["type",td],toggleElementCollapseBehaviour:["type",nd],unclaimIdBehavior:["type",id],unsetDefaultFlowBehavior:["type",rd],updateFlowNodeRefsBehavior:["type",od],setCompensationActivityAfterPasteBehavior:["type",ad]};function mx(e,t){var n=Tt(e,t,-15);return n!=="intersect"?n:null}function xt(e){_n.call(this,e)}ie(xt,_n);xt.$inject=["eventBus"];xt.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return e2(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,o=i.targetAttach;if(o)return!1;r&&(n.parent=r);try{return Ys(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return Ys(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return Sx(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return $e(i)&&!_c(t,i)?!1:Pr(t,function(r){return $e(r)?Ys(r.source,r.target,r):r.host?ta(r,r.host,null,n):sf(r,i,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return ta(n,t,null,i)||Ex(n,t,i)||wx(n,t)||_c(n,t)}),this.addRule("shape.create",function(e){return sf(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return ta(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return Ax(n,t)})};xt.prototype.canConnectMessageFlow=Px;xt.prototype.canConnectSequenceFlow=Tx;xt.prototype.canConnectDataAssociation=cd;xt.prototype.canConnectAssociation=Cx;xt.prototype.canConnectCompensationAssociation=Rx;xt.prototype.canMove=wx;xt.prototype.canAttach=ta;xt.prototype.canReplace=Ex;xt.prototype.canDrop=ao;xt.prototype.canInsert=_c;xt.prototype.canCreate=sf;xt.prototype.canConnect=Ys;xt.prototype.canResize=Sx;xt.prototype.canCopy=Ax;function e2(e){return rf(e)?null:be(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function rf(e){return!e||Me(e)}function t2(e,t){return e===t}function ag(e){do{if(b(e,"bpmn:Process"))return X(e);if(b(e,"bpmn:Participant"))return X(e).processRef||X(e)}while(e=e.parent)}function of(e){return b(e,"bpmn:TextAnnotation")}function sd(e){return b(e,"bpmn:Group")&&!e.labelTarget}function gx(e){return b(e,"bpmn:BoundaryEvent")&&Hn(e,"bpmn:CompensateEventDefinition")}function dl(e){return X(e).isForCompensation}function n2(e,t){var n=ag(e),i=ag(t);return n===i}function i2(e){return b(e,"bpmn:InteractionNode")&&!b(e,"bpmn:BoundaryEvent")&&(!b(e,"bpmn:Event")||b(e,"bpmn:ThrowEvent")&&yx(e,"bpmn:MessageEventDefinition"))}function r2(e){return b(e,"bpmn:InteractionNode")&&!dl(e)&&(!b(e,"bpmn:Event")||b(e,"bpmn:CatchEvent")&&yx(e,"bpmn:MessageEventDefinition"))&&!(b(e,"bpmn:BoundaryEvent")&&!Hn(e,"bpmn:MessageEventDefinition"))}function sg(e){for(var t=e;t=t.parent;){if(b(t,"bpmn:FlowElementsContainer"))return X(t);if(b(t,"bpmn:Participant"))return X(t).processRef}return null}function vx(e,t){var n=sg(e),i=sg(t);return n===i}function Hn(e,t){var n=X(e);return!!De(n.eventDefinitions||[],function(i){return b(i,t)})}function yx(e,t){var n=X(e);return(n.eventDefinitions||[]).every(function(i){return b(i,t)})}function o2(e){return b(e,"bpmn:FlowNode")&&!b(e,"bpmn:EndEvent")&&!Pt(e)&&!(b(e,"bpmn:IntermediateThrowEvent")&&Hn(e,"bpmn:LinkEventDefinition"))&&!gx(e)&&!dl(e)}function a2(e){return b(e,"bpmn:FlowNode")&&!b(e,"bpmn:StartEvent")&&!b(e,"bpmn:BoundaryEvent")&&!Pt(e)&&!(b(e,"bpmn:IntermediateCatchEvent")&&Hn(e,"bpmn:LinkEventDefinition"))&&!dl(e)}function s2(e){return b(e,"bpmn:ReceiveTask")||b(e,"bpmn:IntermediateCatchEvent")&&(Hn(e,"bpmn:MessageEventDefinition")||Hn(e,"bpmn:TimerEventDefinition")||Hn(e,"bpmn:ConditionalEventDefinition")||Hn(e,"bpmn:SignalEventDefinition"))}function c2(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function af(e,t){var n=c2(t);return n.indexOf(e)!==-1}function Ys(e,t,n){if(rf(e)||rf(t))return null;if(!b(n,"bpmn:DataAssociation")){if(Px(e,t))return{type:"bpmn:MessageFlow"};if(Tx(e,t))return{type:"bpmn:SequenceFlow"}}var i=cd(e,t);return i||(Rx(e,t)?{type:"bpmn:Association",associationDirection:"One"}:Cx(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function ao(e,t){return Me(e)||sd(e)?!0:b(t,"bpmn:Participant")&&!we(t)?!1:b(e,"bpmn:Participant")?b(t,"bpmn:Process")||b(t,"bpmn:Collaboration"):be(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:b(e,"bpmn:Lane")?b(t,"bpmn:Participant")||b(t,"bpmn:Lane"):b(e,"bpmn:BoundaryEvent")&&!l2(e)?!1:b(e,"bpmn:FlowElement")&&!b(e,"bpmn:DataStoreReference")?b(t,"bpmn:FlowElementsContainer")?we(t):be(t,["bpmn:Participant","bpmn:Lane"]):b(e,"bpmn:DataStoreReference")&&b(t,"bpmn:Collaboration")?zi(X(t).get("participants"),function(n){return!!n.get("processRef")}):be(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?be(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):b(e,"bpmn:MessageFlow")?b(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function l2(e){return X(e).cancelActivity&&(_x(e)||bx(e))}function u2(e){return!Me(e)&&b(e,"bpmn:BoundaryEvent")}function f2(e){return b(e,"bpmn:Lane")}function p2(e){return u2(e)||b(e,"bpmn:IntermediateThrowEvent")&&_x(e)?!0:b(e,"bpmn:IntermediateCatchEvent")&&bx(e)}function _x(e){var t=X(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function bx(e){return xx(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function xx(e,t){return t.some(function(n){return Hn(e,n)})}function d2(e){return b(e,"bpmn:ReceiveTask")&&De(e.incoming,function(t){return b(t.source,"bpmn:EventBasedGateway")})}function ta(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return Me(r)||!p2(r)||Pt(t)||!b(t,"bpmn:Activity")||dl(t)||i&&!mx(i,t)||d2(t)?!1:"attach"}function Ex(e,t,n){if(!t)return!1;var i={replacements:[]};return A(e,function(r){Pt(t)||b(r,"bpmn:StartEvent")&&r.type!=="label"&&ao(r,t)&&(H1(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(z1(r)||V1(r)||W1(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),xx(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&b(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),b(t,"bpmn:Transaction")||Hn(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(b(r,"bpmn:EndEvent")&&ao(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),b(r,"bpmn:BoundaryEvent")&&ta(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function wx(e,t){return zi(e,f2)?!1:t?e.every(function(n){return ao(n,t)}):!0}function sf(e,t,n,i){return t?Me(e)||sd(e)?!0:t2(n,t)||n&&af(n,t)?!1:ao(e,t)||_c(e,t):!1}function Sx(e,t){return b(e,"bpmn:SubProcess")?we(e)&&(!t||t.width>=100&&t.height>=80):!!(b(e,"bpmn:Lane")||b(e,"bpmn:Participant")||of(e)||sd(e))}function h2(e,t){var n=of(e),i=of(t);return(n||i)&&n!==i}function Cx(e,t){return af(t,e)||af(e,t)?!1:h2(e,t)?!0:!!cd(e,t)}function Rx(e,t){return vx(e,t)&&gx(e)&&b(t,"bpmn:Activity")&&!g2(t,e)&&!Pt(t)}function Px(e,t){return cg(e)&&!cg(t)?!1:i2(e)&&r2(t)&&!n2(e,t)}function Tx(e,t){return o2(e)&&a2(t)&&vx(e,t)&&!(b(e,"bpmn:EventBasedGateway")&&!s2(t))}function cd(e,t){return be(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&be(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:be(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&be(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function _c(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:be(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Me(t)&&b(e,"bpmn:FlowNode")&&!b(e,"bpmn:BoundaryEvent")&&ao(e,t.parent)}function m2(e,t){return e&&t&&e.indexOf(t)!==-1}function Ax(e,t){return Me(t)?!0:!(b(t,"bpmn:Lane")&&!m2(e,t.parent))}function cg(e){return ro(e,"bpmn:Process")||ro(e,"bpmn:Collaboration")}function g2(e,t){return e.attachers.includes(t)}const v2={__depends__:[Zn],__init__:["bpmnRules"],bpmnRules:["type",xt]};var y2=2e3;function Mx(e,t){e.on("saveXML.start",y2,n);function n(){var i=t.getRootElements();A(i,function(r){var o=Ae(r),a,s;a=Sa([r],!1),a=Ee(a,function(c){return c!==r&&!c.labelTarget}),s=Rt(a,Ae),o.set("planeElement",s)})}}Mx.$inject=["eventBus","canvas"];const _2={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",Mx]};function hl(e){G.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,o=i.parent,a=t.getOrdering(r,o);a&&(a.parent!==void 0&&(i.parent=a.parent),i.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,o=i.newParent||r.parent,a=t.getOrdering(r,o);a&&(a.parent!==void 0&&(i.newParent=a.parent),i.newParentIndex=a.index)})}hl.prototype.getOrdering=function(e,t){return null};ie(hl,G);function ld(e,t){hl.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function i(a){if(a.labelTarget)return{level:10};var s=De(n,function(c){return be(a,[c.type])});return s&&s.order||{level:1}}function r(a){var s=a.order;if(s||(a.order=s=i(a)),!s)throw new Error(`no order for <${a.id}>`);return s}function o(a,s,c){for(var l=s;l&&!be(l,c);)l=l.parent;if(!l)throw new Error(`no parent for <${a.id}> in <${s&&s.id}>`);return l}this.getOrdering=function(a,s){if(a.labelTarget||b(a,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var c=r(a);c.containers&&(s=o(a,s,c.containers));var l=s.children.indexOf(a),u=Ly(s.children,function(f){return!a.labelTarget&&f.labelTarget?!1:c.level<r(f).level});return u!==-1&&l!==-1&&l<u&&(u-=1),{index:u,parent:s}}}ld.$inject=["eventBus","canvas"];ie(ld,hl);const b2={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",ld]};function Ia(){}Ia.prototype.get=function(){return this._data};Ia.prototype.set=function(e){this._data=e};Ia.prototype.clear=function(){var e=this._data;return delete this._data,e};Ia.prototype.isEmpty=function(){return!this._data};const x2={clipboard:["type",Ia]};var E2="drop-ok",lg="drop-not-ok",ug="attach-ok",fg="new-parent",pg="create",w2=2e3;function Dx(e,t,n,i,r){function o(c,l,u,f,p){if(!l)return!1;c=Ee(c,function(C){var x=C.labelTarget;return!C.parent&&!(Me(C)&&c.indexOf(x)!==-1)});var d=De(c,function(C){return!$e(C)}),h=!1,m=!1,v=!1;hg(c)&&(h=r.allowed("shape.attach",{position:u,shape:d,target:l})),h||(hg(c)?v=r.allowed("shape.create",{position:u,shape:d,source:f,target:l}):v=r.allowed("elements.create",{elements:c,position:u,target:l}));var E=p.connectionTarget;return v||h?(d&&f&&(m=r.allowed("connection.create",{source:E===f?d:f,target:E===f?f:d,hints:{targetParent:l,targetAttach:h}})),{attach:h,connect:m}):v===null||h===null?null:!1}function a(c,l){[ug,E2,lg,fg].forEach(function(u){u===l?e.addMarker(c,u):e.removeMarker(c,u)})}n.on(["create.move","create.hover"],function(c){var l=c.context,u=l.elements,f=c.hover,p=l.source,d=l.hints||{};if(!f){l.canExecute=!1,l.target=null;return}dg(c);var h={x:c.x,y:c.y},m=l.canExecute=f&&o(u,f,h,p,d);f&&m!==null&&(l.target=f,m&&m.attach?a(f,ug):a(f,m?fg:lg))}),n.on(["create.end","create.out","create.cleanup"],function(c){var l=c.hover;l&&a(l,null)}),n.on("create.end",function(c){var l=c.context,u=l.source,f=l.shape,p=l.elements,d=l.target,h=l.canExecute,m=h&&h.attach,v=h&&h.connect,E=l.hints||{};if(h===!1||!d)return!1;dg(c);var C={x:c.x,y:c.y};v?f=i.appendShape(u,f,C,d,{attach:m,connection:v===!0?{}:v,connectionTarget:E.connectionTarget}):(p=i.createElements(p,C,d,O({},E,{attach:m})),f=De(p,function(x){return!$e(x)})),O(l,{elements:p,shape:f}),O(c,{elements:p,shape:f})});function s(){var c=t.context();c&&c.prefix===pg&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],w2,function(){n.off("elements.changed",s)})}),this.start=function(c,l,u){ge(l)||(l=[l]);var f=De(l,function(h){return!$e(h)});if(f){u=O({elements:l,hints:{},shape:f},u||{}),A(l,function(h){fe(h.x)||(h.x=0),fe(h.y)||(h.y=0)});var p=Ee(l,function(h){return!h.hidden}),d=pt(p);A(l,function(h){$e(h)&&(h.waypoints=Rt(h.waypoints,function(m){return{x:m.x-d.x-d.width/2,y:m.y-d.y-d.height/2}})),O(h,{x:h.x-d.x-d.width/2,y:h.y-d.y-d.height/2})}),t.init(c,pg,{cursor:"grabbing",autoActivate:!0,data:{shape:f,elements:l,context:u}})}}}Dx.$inject=["canvas","dragging","eventBus","modeling","rules"];function dg(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function hg(e){return e&&e.length===1&&!$e(e[0])}var S2=750;function kx(e,t,n,i,r){function o(a){var s=ae("g");te(s,r.cls("djs-drag-group",["no-events"]));var c=ae("g");return a.forEach(function(l){var u;l.hidden||(l.waypoints?(u=n._createContainer("connection",c),n.drawConnection(_r(u),l)):(u=n._createContainer("shape",c),n.drawShape(_r(u),l),yt(u,l.x,l.y)),i.addDragger(l,s,u))}),s}t.on("create.move",S2,function(a){var s=a.hover,c=a.context,l=c.elements,u=c.dragGroup;u||(u=c.dragGroup=o(l));var f;s?(u.parentNode||(f=e.getActiveLayer(),de(f,u)),yt(u,a.x,a.y)):ct(u)}),t.on("create.cleanup",function(a){var s=a.context,c=s.dragGroup;c&&ct(c)})}kx.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const ml={__depends__:[mi,Eo,Zn,qn],__init__:["create","createPreview"],create:["type",Dx],createPreview:["type",kx]};function ud(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}ud.$inject=["eventBus"];ud.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||C2(0,0)};function C2(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,o=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,a,!1,!1,!1,!1,0,null),n}const Na={__init__:["mouse"],mouse:["type",ud]};function Mn(e,t,n,i,r,o,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=a,this._rules=s,r.on("copyPaste.copyElement",function(c){var l=c.descriptor,u=c.element,f=c.elements;l.priority=1,l.id=u.id;var p=De(f,function(d){return d===u.parent});p&&(l.parent=u.parent.id),R2(u)&&(l.priority=2,l.host=u.host.id),$e(u)&&(l.priority=3,l.source=u.source.id,l.target=u.target.id,l.waypoints=P2(u)),Me(u)&&(l.priority=4,l.labelTarget=u.labelTarget.id),A(["x","y","width","height"],function(d){fe(u[d])&&(l[d]=u[d])}),l.hidden=u.hidden,l.collapsed=u.collapsed}),r.on("copyPaste.pasteElements",function(c){var l=c.hints;O(l,{createElementsBehavior:!1})})}Mn.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Mn.prototype.copy=function(e){var t,n;return ge(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(ge(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};Mn.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}};Mn.prototype._paste=function(e,t,n,i){A(e,function(o){fe(o.x)||(o.x=0),fe(o.y)||(o.y=0)});var r=pt(e);return A(e,function(o){$e(o)&&(o.waypoints=Rt(o.waypoints,function(a){return{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2}})),O(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,O({},i))};Mn.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return A(e,function(o,a){o=Gn(o,"priority"),A(o,function(s){var c=O({},gn(s,["priority"]));i[s.parent]?c.parent=i[s.parent]:delete c.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:c});var l;if($e(c)){c.source=i[s.source],c.target=i[s.target],l=i[s.id]=t.createConnection(c),r.push(l);return}if(Me(c)){c.labelTarget=i[c.labelTarget],l=i[s.id]=t.createLabel(c),r.push(l);return}c.host&&(c.host=i[c.host]),l=i[s.id]=t.createShape(c),r.push(l)})}),r};Mn.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(gn(e,["id"]));return t};Mn.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(gn(e,["id"]));return t};Mn.prototype.createShape=function(e){var t=this._elementFactory.createShape(gn(e,["id"]));return t};Mn.prototype.hasRelations=function(e,t){var n,i,r;return!($e(e)&&(i=De(t,Pn({id:e.source.id})),r=De(t,Pn({id:e.target.id})),!i||!r)||Me(e)&&(n=De(t,Pn({id:e.labelTarget.id})),!n))};Mn.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],o=zc(e);function a(l,u){return t.allowed("element.copy",{element:l,elements:u})}function s(l,u){var f=De(r,function(p){return l===p.element});if(!f){r.push({element:l,depth:u});return}f.depth<u&&(r=c(f,r),r.push({element:f.element,depth:u}))}function c(l,u){var f=u.indexOf(l);return f!==-1&&u.splice(f,1),u}return Mr(o,function(l,u,f){if(Me(l))return;A(l.labels,function(h){s(h,f)});function p(h){h&&h.length&&A(h,function(m){A(m.labels,function(v){s(v,f)}),s(m,f)})}A([l.attachers,l.incoming,l.outgoing],p),s(l,f);var d=[];return l.children&&(d=l.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:l,children:d}),d}),e=Rt(r,function(l){return l.element}),r=Rt(r,function(l){return l.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:l.descriptor,element:l.element,elements:e}),l}),r=Gn(r,function(l){return l.descriptor.priority}),e=Rt(r,function(l){return l.element}),A(r,function(l){var u=l.depth;if(!n.hasRelations(l.element,e)){gg(l.element,e);return}if(!a(l.element,e)){gg(l.element,e);return}i[u]||(i[u]=[]),i[u].push(l.descriptor)}),i};function R2(e){return!!e.host}function P2(e){return Rt(e.waypoints,function(t){return t=mg(t),t.original&&(t.original=mg(t.original)),t})}function mg(e){return O({},e)}function gg(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const T2={__depends__:[x2,ml,Na,Zn],__init__:["copyPaste"],copyPaste:["type",Mn]};function ou(e,t,n){ge(n)||(n=[n]),A(n,function(i){Er(e[i])||(t[i]=e[i])})}var au=750;function Ox(e,t,n){function i(c,l){var u=e.create(c.$type);return n.copyElement(c,u,null,l)}t.on("copyPaste.copyElement",au,function(c){var l=c.descriptor,u=c.element,f=X(u);if(Me(u))return l;var p=l.businessObject=i(f,!0),d=l.di=i(Ae(u),!0);d.bpmnElement=p,ou(p,l,"name"),ou(d,l,"isExpanded"),f.default&&(l.default=f.default.id)});var r="-bpmn-js-refs";function o(c){return c[r]=c[r]||{}}function a(c,l){c[r]=l}function s(c,l,u){var f=X(c);return c.default&&(u[c.default]={element:f,property:"default"}),c.host&&(X(c).attachedToRef=X(l[c.host])),gn(u,Xt(u,function(p,d,h){var m=d.element,v=d.property;return h===c.id&&(m.set(v,f),p.push(c.id)),p},[]))}t.on("copyPaste.pasteElement",function(c){var l=c.cache,u=c.descriptor,f=u.businessObject,p=u.di;if(Me(u)){u.businessObject=X(l[u.labelTarget]),u.di=Ae(l[u.labelTarget]);return}f=u.businessObject=i(f),p=u.di=i(p),p.bpmnElement=f,ou(u,f,["isExpanded","name"]),u.type=f.$type}),t.on("copyPaste.copyElement",au,function(c){var l=c.descriptor,u=c.element;if(b(u,"bpmn:Participant")){var f=X(u);f.processRef&&(l.processRef=i(f.processRef,!0))}}),t.on("copyPaste.pasteElement",function(c){var l=c.descriptor,u=l.processRef;u&&(l.processRef=i(u))}),t.on("copyPaste.pasteElement",au,function(c){var l=c.cache,u=c.descriptor;a(l,s(u,l,o(l)))})}Ox.$inject=["bpmnFactory","eventBus","moddleCopy"];var A2=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function La(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(!(!r||!r.length))return Gn(r,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,o=gt(r)&&r.$descriptor,a=i.propertyName;if(a&&A2.indexOf(a)!==-1||a&&o&&!De(o.properties,Pn({name:a})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(i){var r=i.property;if(M2(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}La.$inject=["eventBus","bpmnFactory","moddle"];La.prototype.copyElement=function(e,t,n,i=!1){var r=this;n&&!ge(n)&&(n=[n]),n=n||cf(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return o===!1||(ge(o)&&(n=o),A(n,function(a){var s;Vt(e,a)&&(s=e.get(a));var c=r.copyProperty(s,t,a,i);if(mt(c)){var l=r._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:c,propertyName:a});l!==!1&&t.set(a,c)}})),t};La.prototype.copyProperty=function(e,t,n,i=!1){var r=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(o!==!1){if(o)return gt(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,i):ge(e)?Xt(e,function(s,c){return o=r.copyProperty(c,t,n,i),o?s.concat(o):s},[]):gt(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=r._bpmnFactory.create(e.$type),o.$parent=t,o=r.copyElement(e,o,null,i),o):e}};La.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function cf(e,t){return Xt(e.properties,function(n,i){return t&&i.default?n:n.concat(i.name)},[])}function M2(e,t){return e&&lt(e.$instanceOf)&&e.$instanceOf(t)}const Ix={__depends__:[T2],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",Ox],moddleCopy:["type",La]};var vg=Math.round;function fd(e,t){this._modeling=e,this._eventBus=t}fd.$inject=["modeling","eventBus"];fd.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=this._eventBus;r.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,a=t.height||e.height,s=t.x||e.x,c=t.y||e.y,l=vg(s+o/2),u=vg(c+a/2),f=i.replaceShape(e,O({},t,{x:l,y:u,width:o,height:a}),n);return r.fire("replace.end",{element:e,newElement:f,hints:n}),f};function Nx(e,t){t.on("replace.end",500,function(n){const{newElement:i,hints:r={}}=n;r.select!==!1&&e.select(i)})}Nx.$inject=["selection","eventBus"];const D2={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",Nx],replace:["type",fd]};function k2(e,t,n){ge(n)||(n=[n]),A(n,function(i){Er(e[i])||(t[i]=e[i])})}var O2=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function I2(e,t){var n=e&&Vt(e,"collapsed")?e.collapsed:!we(e),i;return t&&(Vt(t,"collapsed")||Vt(t,"isExpanded"))?i=Vt(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i}function Lx(e,t,n,i,r,o){function a(s,c,l){l=l||{};var u=c.type,f=s.businessObject;if(ws(f)&&u==="bpmn:SubProcess"&&I2(s,c))return i.toggleCollapse(s),s;var p=e.create(u),d={type:u,businessObject:p};d.di={},u==="bpmn:ExclusiveGateway"&&(d.di.isMarkerVisible=!0),k2(s.di,d.di,["fill","stroke","background-color","border-color","color"]);var h=cf(f.$descriptor),m=cf(p.$descriptor,!0),v=N2(h,m);O(p,An(c,O2));var E=Ee(v,function(y){return y==="eventDefinitions"?yg(s,c.eventDefinitionType):y==="loopCharacteristics"?!Pt(p):Vt(p,y)||y==="processRef"&&c.isExpanded===!1||y==="triggeredByEvent"?!1:y==="isForCompensation"?!Pt(p):!0});if(p=n.copyElement(f,p,E),c.eventDefinitionType&&(yg(p,c.eventDefinitionType)||(d.eventDefinitionType=c.eventDefinitionType,d.eventDefinitionAttrs=c.eventDefinitionAttrs)),b(f,"bpmn:Activity")){if(ws(f))d.isExpanded=we(s);else if(c&&Vt(c,"isExpanded")){d.isExpanded=c.isExpanded;var C=t.getDefaultSize(p,{isExpanded:d.isExpanded});d.width=C.width,d.height=C.height,d.x=s.x-(d.width-s.width)/2,d.y=s.y-(d.height-s.height)/2}we(s)&&!b(f,"bpmn:Task")&&d.isExpanded&&(d.width=s.width,d.height=s.height)}if(ws(f)&&!ws(p)&&(l.moveChildren=!1),b(f,"bpmn:Participant")){c.isExpanded===!0?p.processRef=e.create("bpmn:Process"):l.moveChildren=!1;var x=dt(s);Ae(s).isHorizontal||(Ae(d).isHorizontal=x),d.width=x?s.width:t.getDefaultSize(d).width,d.height=x?t.getDefaultSize(d).height:s.height}return o.allowed("shape.resize",{shape:p})||(d.height=t.getDefaultSize(d).height,d.width=t.getDefaultSize(d).width),p.name=f.name,be(f,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&be(p,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(p.default=f.default),c.host&&!b(f,"bpmn:BoundaryEvent")&&b(p,"bpmn:BoundaryEvent")&&(d.host=c.host),(d.type==="bpmn:DataStoreReference"||d.type==="bpmn:DataObjectReference")&&(d.x=s.x+(s.width-d.width)/2),r.replaceElement(s,d,{...l,targetElement:c})}this.replaceElement=a}Lx.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function ws(e){return b(e,"bpmn:SubProcess")}function yg(e,t){var n=X(e);return t&&n.get("eventDefinitions").some(function(i){return b(i,t)})}function N2(e,t){return e.filter(function(n){return t.includes(n)})}const Bx={__depends__:[Ix,D2,qn],bpmnReplace:["type",Lx]};var L2=250;function Ir(e){this._eventBus=e,this._tools=[],this._active=null}Ir.$inject=["eventBus"];Ir.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Ir.prototype.isActive=function(e){return e&&this._active===e};Ir.prototype.length=function(e){return this._tools.length};Ir.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Ir.prototype.bindEvents=function(e,t){var n=this._eventBus,i=[];n.on(t.tool+".init",function(r){var o=r.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),A(t,function(r){i.push(r+".ended"),i.push(r+".canceled")}),n.on(i,L2,function(r){this._active&&(B2(r)||this.setActive(null))},this)};function B2(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Vi(t,'.group[data-group="tools"]')}const gl={__depends__:[mi],__init__:["toolManager"],toolManager:["type",Ir]};function $2(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function j2(e,t){var n=[];return A(e.concat(t),function(i){var r=i.incoming,o=i.outgoing;A(r.concat(o),function(a){var s=a.source,c=a.target;($o(e,s)||$o(e,c)||$o(t,s)||$o(t,c))&&($o(n,a)||n.push(a))})}),n}function $o(e,t){return e.indexOf(t)!==-1}function F2(e,t,n){var i=e.x,r=e.y,o=e.width,a=e.height,s=n.x,c=n.y;switch(t){case"n":return{x:i,y:r+c,width:o,height:a-c};case"s":return{x:i,y:r,width:o,height:a+c};case"w":return{x:i+s,y:r,width:o-s,height:a};case"e":return{x:i,y:r,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}var su=Math.abs,H2=Math.round,ei={x:"width",y:"height"},$x="crosshair",Si={n:"top",w:"left",s:"bottom",e:"right"},z2=1500,Ss={n:"s",w:"e",s:"n",e:"w"},Cs=20;function bn(e,t,n,i,r,o,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=a;var s=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(c){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(c.originalEvent)})}),n.on("spaceTool.move",z2,function(c){var l=c.context,u=l.initialized;u||(u=l.initialized=s.init(c,l)),u&&bg(c)}),n.on("spaceTool.end",function(c){var l=c.context,u=l.axis,f=l.direction,p=l.movingShapes,d=l.resizingShapes,h=l.start;if(l.initialized){bg(c);var m={x:0,y:0};m[u]=H2(c["d"+u]),s.makeSpace(p,d,m,f,h),n.once("spaceTool.ended",function(v){s.activateSelection(v.originalEvent,!0,!0)})}})}bn.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];bn.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:$x,data:{context:{reactivate:n}},trapClick:!1})};bn.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:$x,data:{context:{}}})};bn.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)};bn.prototype.init=function(e,t){var n=su(e.dx)>su(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(su(i)<5)return!1;i<0&&(i*=-1),da(e)&&(i*=-1);var o=$2(n,i),a=this._canvas.getRootElement();!uc(e)&&e.hover&&(a=e.hover);var s=[...Sa(a,!0),...a.attachers||[]],c=this.calculateAdjustments(s,n,i,r),l=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:c.resizingShapes,start:r}),u=V2(c,n,o,r,l);return O(t,c,{axis:n,direction:o,spaceToolConstraints:u,start:r}),Jc("resize-"+(n==="x"?"ew":"ns")),!0};bn.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,o=[],a=[],s=[],c=[];function l(p){o.includes(p)||o.push(p);var d=p.label;d&&!o.includes(d)&&o.push(d)}function u(p){a.includes(p)||a.push(p)}A(e,function(p){if(!(!p.parent||Me(p))){if($e(p)){c.push(p);return}var d=p[t],h=d+p[ei[t]];if(W2(p)&&(n>0&&pe(p)[t]>i||n<0&&pe(p)[t]<i)){s.push(p);return}if(n>0&&d>i||n<0&&h<i){l(p);return}if(d<i&&h>i&&r.allowed("shape.resize",{shape:p})){u(p);return}}}),A(o,function(p){var d=p.attachers;d&&A(d,function(h){l(h)})});var f=o.concat(a);return A(s,function(p){var d=p.host;gr(f,d)&&l(p)}),f=o.concat(a),A(c,function(p){var d=p.source,h=p.target,m=p.label;gr(f,d)&&gr(f,h)&&m&&l(m)}),{movingShapes:o,resizingShapes:a}};bn.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};bn.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function _g(e){return{top:e.top-Cs,right:e.right+Cs,bottom:e.bottom+Cs,left:e.left-Cs}}function bg(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;fe(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),fe(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),fe(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),fe(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function V2(e,t,n,i,r){var o=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},c,l;return A(a,function(u){var f=u.attachers,p=u.children,d=le(u),h=Ee(p,function(N){return!$e(N)&&!Me(N)&&!gr(o,N)&&!gr(a,N)}),m=Ee(p,function(N){return!$e(N)&&!Me(N)&&gr(o,N)}),v,E,C,x=[],y=[],S,T,I,D;h.length&&(E=_g(le(pt(h))),v=i-d[Si[n]]+E[Si[n]],n==="n"?s.bottom=l=fe(l)?Math.min(l,v):v:n==="w"?s.right=l=fe(l)?Math.min(l,v):v:n==="s"?s.top=c=fe(c)?Math.max(c,v):v:n==="e"&&(s.left=c=fe(c)?Math.max(c,v):v)),m.length&&(C=_g(le(pt(m))),v=i-C[Si[Ss[n]]]+d[Si[Ss[n]]],n==="n"?s.bottom=l=fe(l)?Math.min(l,v):v:n==="w"?s.right=l=fe(l)?Math.min(l,v):v:n==="s"?s.top=c=fe(c)?Math.max(c,v):v:n==="e"&&(s.left=c=fe(c)?Math.max(c,v):v)),f&&f.length&&(f.forEach(function(N){gr(o,N)?x.push(N):y.push(N)}),x.length&&(S=le(pt(x.map(pe))),T=d[Si[Ss[n]]]-(S[Si[Ss[n]]]-i)),y.length&&(I=le(pt(y.map(pe))),D=I[Si[n]]-(d[Si[n]]-i)),n==="n"?(v=Math.min(T||1/0,D||1/0),s.bottom=l=fe(l)?Math.min(l,v):v):n==="w"?(v=Math.min(T||1/0,D||1/0),s.right=l=fe(l)?Math.min(l,v):v):n==="s"?(v=Math.max(T||-1/0,D||-1/0),s.top=c=fe(c)?Math.max(c,v):v):n==="e"&&(v=Math.max(T||-1/0,D||-1/0),s.left=c=fe(c)?Math.max(c,v):v));var B=r&&r[u.id];B&&(n==="n"?(v=i+u[ei[t]]-B[ei[t]],s.bottom=l=fe(l)?Math.min(l,v):v):n==="w"?(v=i+u[ei[t]]-B[ei[t]],s.right=l=fe(l)?Math.min(l,v):v):n==="s"?(v=i-u[ei[t]]+B[ei[t]],s.top=c=fe(c)?Math.max(c,v):v):n==="e"&&(v=i-u[ei[t]]+B[ei[t]],s.left=c=fe(c)?Math.max(c,v):v))}),s}}function gr(e,t){return e.indexOf(t)!==-1}function W2(e){return!!e.host}var cu="djs-dragging",xg="djs-resizing",U2=250,Rs=Math.max;function jx(e,t,n,i,r){function o(a,s){A(a,function(c){r.addDragger(c,s),n.addMarker(c,cu)})}e.on("spaceTool.selection.start",function(a){var s=n.getLayer("space"),c=a.context,l={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},u=ae("g");te(u,i.cls("djs-crosshair-group",["no-events"])),de(s,u);var f=ae("path");te(f,"d",l.x),Te(f).add("djs-crosshair"),de(u,f);var p=ae("path");te(p,"d",l.y),Te(p).add("djs-crosshair"),de(u,p),c.crosshairGroup=u}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;yt(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,c=s.crosshairGroup;c&&ct(c)}),e.on("spaceTool.move",U2,function(a){var s=a.context,c=s.line,l=s.axis,u=s.movingShapes,f=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var p=n.getLayer("space");c=ae("path"),te(c,"d","M0,0 L0,0"),Te(c).add("djs-crosshair"),de(p,c),s.line=c;var d=ae("g");te(d,i.cls("djs-drag-group",["no-events"])),de(n.getActiveLayer(),d),o(u,d);var h=s.movingConnections=t.filter(function(y){var S=!1;A(u,function(B){A(B.outgoing,function(N){y===N&&(S=!0)})});var T=!1;A(u,function(B){A(B.incoming,function(N){y===N&&(T=!0)})});var I=!1;A(f,function(B){A(B.outgoing,function(N){y===N&&(I=!0)})});var D=!1;return A(f,function(B){A(B.incoming,function(N){y===N&&(D=!0)})}),$e(y)&&(S||I)&&(T||D)});o(h,d),s.dragGroup=d}if(!s.frameGroup){var m=ae("g");te(m,i.cls("djs-frame-group",["no-events"])),de(n.getActiveLayer(),m);var v=[];A(f,function(y){var S=r.addFrame(y,m),T=S.getBBox();v.push({element:S,initialBounds:T}),n.addMarker(y,xg)}),s.frameGroup=m,s.frames=v}var E={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};te(c,{d:E[l]});var C={x:"y",y:"x"},x={x:a.dx,y:a.dy};x[C[s.axis]]=0,yt(s.dragGroup,x.x,x.y),A(s.frames,function(y){var S=y.element,T=y.initialBounds,I,D;s.direction==="e"?te(S,{width:Rs(T.width+x.x,5)}):(I=Rs(T.width-x.x,5),te(S,{width:I,x:T.x+T.width-I})),s.direction==="s"?te(S,{height:Rs(T.height+x.y,5)}):(D=Rs(T.height-x.y,5),te(S,{height:D,y:T.y+T.height-D}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,c=s.movingShapes,l=s.movingConnections,u=s.resizingShapes,f=s.line,p=s.dragGroup,d=s.frameGroup;A(c,function(h){n.removeMarker(h,cu)}),A(l,function(h){n.removeMarker(h,cu)}),p&&(ct(f),ct(p)),A(u,function(h){n.removeMarker(h,xg)}),d&&ct(d)})}jx.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const G2={__init__:["spaceToolPreview"],__depends__:[mi,Zn,gl,Eo,Na],spaceTool:["type",bn],spaceToolPreview:["type",jx]};function vl(e){e.invoke(bn,this)}vl.$inject=["injector"];ie(vl,bn);vl.prototype.calculateAdjustments=function(e,t,n,i){var r=bn.prototype.calculateAdjustments.call(this,e,t,n,i);return r.resizingShapes=r.resizingShapes.filter(function(o){return!(b(o,"bpmn:TextAnnotation")||K2(o)&&(t==="y"&&dt(o)||t==="x"&&!dt(o)))}),r};function K2(e){return b(e,"bpmn:Participant")&&!X(e).processRef}const Fx={__depends__:[G2],spaceTool:["type",vl]};function Xe(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Xe.$inject=["eventBus","injector"];Xe.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};Xe.prototype.canExecute=function(e,t){const n={command:e,context:t},i=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r};Xe.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Xe.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Xe.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Xe.prototype.register=function(e,t){this._setHandler(e,t)};Xe.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};Xe.prototype.canUndo=function(){return!!this._getUndoAction()};Xe.prototype.canRedo=function(){return!!this._getRedoAction()};Xe.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Xe.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Xe.prototype._internalUndo=function(e){const t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};Xe.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const i=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const o of i)if(r=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return r};Xe.prototype._createId=function(){return this._uid++};Xe.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Xe.prototype._internalExecute=function(e,t){const n=e.command,i=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction()};Xe.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)};Xe.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:By("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Xe.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=ge(e)?e:[e],t.dirty=t.dirty.concat(e))};Xe.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};Xe.prototype._revertedAction=function(e){this._stackIdx--};Xe.prototype._getHandler=function(e){return this._handlerMap[e]};Xe.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const Y2={commandStack:["type",Xe]};function Ii(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var q2=250,Eg=1400;function pd(e,t,n){G.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",Eg,function(r){var o=r.context,a=o.shapes,s=o.validatedShapes;o.shapes=wg(a),o.validatedShapes=wg(s)}),i&&t.on("shape.move.start",q2,function(r){var o=r.context,a=o.shapes,s=[];A(a,function(c){A(c.labels,function(l){!l.hidden&&o.shapes.indexOf(l)===-1&&s.push(l),c.labelTarget&&s.push(c)})}),A(s,function(c){i.makeDraggable(o,c,!0)})}),this.preExecuted("elements.move",Eg,function(r){var o=r.context,a=o.closure,s=a.enclosedElements,c=[];A(s,function(l){A(l.labels,function(u){s[u.id]||c.push(u)})}),a.addAll(c)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context,a=o.connection||o.shape;Ii(a.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,a=o.shape,s=a.labelTarget;s&&(o.labelTargetIndex=Xf(s.labels,a),o.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,a=o.shape,s=o.labelTarget,c=o.labelTargetIndex;s&&(ut(s.labels,a,c),a.labelTarget=s)})}ie(pd,G);pd.$inject=["injector","eventBus","modeling"];function wg(e){return Ee(e,function(t){return e.indexOf(t.labelTarget)===-1})}const X2={__init__:["labelSupport"],labelSupport:["type",pd]};var Z2=251,Sg=1401,Cg="attach-ok";function dd(e,t,n,i,r){G.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",Sg,function(a){var s=a.context,c=s.shapes,l=s.validatedShapes;s.shapes=J2(c),s.validatedShapes=Q2(l)}),o&&t.on("shape.move.start",Z2,function(a){var s=a.context,c=s.shapes,l=lf(c);A(l,function(u){o.makeDraggable(s,u,!0),A(u.labels,function(f){o.makeDraggable(s,f,!0)})})}),o&&t.on("shape.move.start",function(a){var s=a.context,c=s.shapes;if(c.length===1){var l=c[0],u=l.host;u&&(n.addMarker(u,Cg),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(u,Cg)}))}}),this.preExecuted("elements.move",Sg,function(a){var s=a.context,c=s.closure,l=s.shapes,u=lf(l);A(u,function(f){c.add(f,c.topLevel[f.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,c=s.shapes,l=s.newHost,u;l&&c.length!==1||(l?u=c:u=Ee(c,function(f){var p=f.host;return ek(f)&&!tk(c,p)}),A(u,function(f){r.updateAttachment(f,l)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;A(s,function(c){A(c.attachers,function(l){A(l.outgoing.slice(),function(u){var f=i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});f||r.removeConnection(u)}),A(l.incoming.slice(),function(u){var f=i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});f||r.removeConnection(u)})})})}),this.postExecute("shape.create",function(a){var s=a.context,c=s.shape,l=s.host;l&&r.updateAttachment(c,l)}),this.postExecute("shape.replace",function(a){var s=a.context,c=s.oldShape,l=s.newShape;Ii(c.attachers,function(u){var f=i.allowed("elements.move",{target:l,shapes:[u]});f==="attach"?r.updateAttachment(u,l):r.removeShape(u)}),l.attachers.length&&A(l.attachers,function(u){var f=eg(u,c,l);r.moveShape(u,f,u.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,c=s.shape,l=s.oldBounds,u=s.newBounds,f=c.attachers,p=s.hints||{};p.attachSupport!==!1&&A(f,function(d){var h=eg(d,l,u);r.moveShape(d,h,d.parent),A(d.labels,function(m){r.moveShape(m,h,m.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;Ii(s.attachers,function(c){r.removeShape(c)}),s.host&&r.updateAttachment(s,null)})}ie(dd,G);dd.$inject=["injector","eventBus","canvas","rules","modeling"];function lf(e){return Bf(Rt(e,function(t){return t.attachers||[]}))}function J2(e){var t=lf(e);return L1("id",e,t)}function Q2(e){var t=uo(e,"id");return Ee(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function ek(e){return!!e.host}function tk(e,t){return e.indexOf(t)!==-1}const nk={__depends__:[Zn],__init__:["attachSupport"],attachSupport:["type",dd]};function xn(e){this._model=e}xn.$inject=["moddle"];xn.prototype._needsId=function(e){return be(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};xn.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;b(e,"bpmn:Activity")?t="Activity":b(e,"bpmn:Event")?t="Event":b(e,"bpmn:Gateway")?t="Gateway":be(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};xn.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};xn.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};xn.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",O({bpmnElement:e,bounds:this.createDiBounds()},t))};xn.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};xn.prototype.createDiWaypoints=function(e){var t=this;return Rt(e,function(n){return t.createDiWaypoint(n)})};xn.prototype.createDiWaypoint=function(e){return this.create("dc:Point",An(e,["x","y"]))};xn.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",O({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};xn.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",O({bpmnElement:e},t))};function Jt(e,t,n){G.call(this,e),this._bpmnFactory=t;var i=this;function r(d){var h=d.context,m=h.hints||{},v;!h.cropped&&m.createElementsBehavior!==!1&&(v=h.connection,v.waypoints=n.getCroppedWaypoints(v),h.cropped=!0)}this.executed(["connection.layout","connection.create"],r),this.reverted(["connection.layout"],function(d){delete d.context.cropped});function o(d){var h=d.context;i.updateParent(h.shape||h.connection,h.oldParent)}function a(d){var h=d.context,m=h.shape||h.connection,v=h.parent||h.newParent;i.updateParent(m,v)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Gt(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],Gt(a));function s(d){var h=d.context,m=h.oldRoot,v=m.children;A(v,function(E){b(E,"bpmn:BaseElement")&&i.updateParent(E)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function c(d){var h=d.context.shape;b(h,"bpmn:BaseElement")&&i.updateBounds(h)}this.executed(["shape.move","shape.create","shape.resize"],Gt(function(d){d.context.shape.type!=="label"&&c(d)})),this.reverted(["shape.move","shape.create","shape.resize"],Gt(function(d){d.context.shape.type!=="label"&&c(d)})),e.on("shape.changed",function(d){d.element.type==="label"&&c({context:{shape:d.element}})});function l(d){i.updateConnection(d.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],Gt(l)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],Gt(l));function u(d){i.updateConnectionWaypoints(d.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],Gt(u)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],Gt(u)),this.executed("connection.reconnect",Gt(function(d){var h=d.context,m=h.connection,v=h.oldSource,E=h.newSource,C=X(m),x=X(v),y=X(E);C.conditionExpression&&!be(y,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(h.oldConditionExpression=C.conditionExpression,delete C.conditionExpression),v!==E&&x.default===C&&(h.oldDefault=x.default,delete x.default)})),this.reverted("connection.reconnect",Gt(function(d){var h=d.context,m=h.connection,v=h.oldSource,E=h.newSource,C=X(m),x=X(v),y=X(E);h.oldConditionExpression&&(C.conditionExpression=h.oldConditionExpression),h.oldDefault&&(x.default=h.oldDefault,delete y.default)}));function f(d){i.updateAttachment(d.context)}this.executed(["element.updateAttachment"],Gt(f)),this.reverted(["element.updateAttachment"],Gt(f)),this.executed("element.updateLabel",Gt(p)),this.reverted("element.updateLabel",Gt(p));function p(d){const{element:h}=d.context,m=an(h),v=Ae(h),E=v&&v.get("label");wr(h)||js(h)||(m&&!E?v.set("label",t.create("bpmndi:BPMNLabel")):!m&&E&&v.set("label",void 0))}}ie(Jt,G);Jt.$inject=["eventBus","bpmnFactory","connectionDocking"];Jt.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject};Jt.prototype.updateParent=function(e,t){if(!Me(e)&&!(b(e,"bpmn:DataStoreReference")&&e.parent&&b(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=Ae(e),o=n&&n.businessObject,a=Ae(n);b(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,o,t&&t.businessObject),b(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),b(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(i,o),b(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,o),this.updateDiParent(r,a)}};Jt.prototype.updateBounds=function(e){var t=Ae(e),n=rk(e);if(n){var i=Tn(n,t.get("bounds"));O(n,{x:e.x+i.x,y:e.y+i.y})}var r=Me(e)?this._getLabel(t):t,o=r.bounds;o||(o=this._bpmnFactory.createDiBounds(),r.set("bounds",o)),O(o,{x:e.x,y:e.y,width:e.width,height:e.height})};Jt.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;b(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),it(i,e)),b(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),ut(r,e))}};Jt.prototype.updateDiConnection=function(e,t,n){var i=Ae(e),r=Ae(t),o=Ae(n);i.sourceElement&&i.sourceElement.bpmnElement!==X(t)&&(i.sourceElement=t&&r),i.targetElement&&i.targetElement.bpmnElement!==X(n)&&(i.targetElement=n&&o)};Jt.prototype.updateDiParent=function(e,t){if(t&&!b(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(it(n,e),e.$parent=null)}};function ik(e){for(;e&&!b(e,"bpmn:Definitions");)e=e.$parent;return e}Jt.prototype.getLaneSet=function(e){var t,n;return b(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(b(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Jt.prototype.updateSemanticParent=function(e,t,n){var i;if(e.$parent!==t&&!((b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput"))&&(b(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(b(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(b(e,"bpmn:FlowElement")){if(t){if(b(t,"bpmn:Participant"))t=t.processRef;else if(b(t,"bpmn:Lane"))do t=t.$parent.$parent;while(b(t,"bpmn:Lane"))}i="flowElements"}else if(b(e,"bpmn:Artifact")){for(;t&&!b(t,"bpmn:Process")&&!b(t,"bpmn:SubProcess")&&!b(t,"bpmn:Collaboration");)if(b(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(b(e,"bpmn:MessageFlow"))i="messageFlows";else if(b(e,"bpmn:Participant")){i="participants";var r=e.processRef,o;r&&(o=ik(e.$parent||t),e.$parent&&(it(o.get("rootElements"),r),r.$parent=null),t&&(ut(o.get("rootElements"),r),r.$parent=o))}else b(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":b(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var a;if(e.$parent&&(a=e.$parent.get(i),it(a,e)),t?(a=t.get(i),a.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(i);it(a,e),t&&(s||(s=[],t.set(i,s)),s.push(e))}}};Jt.prototype.updateConnectionWaypoints=function(e){var t=Ae(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Jt.prototype.updateConnection=function(e){var t=e.connection,n=X(t),i=t.source,r=X(i),o=t.target,a=X(t.target),s;if(b(n,"bpmn:DataAssociation"))b(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=r,s=e.parent||e.newParent||a,this.updateSemanticParent(n,a,s)):b(n,"bpmn:DataOutputAssociation")&&(s=e.parent||e.newParent||r,this.updateSemanticParent(n,r,s),n.targetRef=a);else{var c=b(n,"bpmn:SequenceFlow");n.sourceRef!==r&&(c&&(it(n.sourceRef&&n.sourceRef.get("outgoing"),n),r&&r.get("outgoing")&&r.get("outgoing").push(n)),n.sourceRef=r),n.targetRef!==a&&(c&&(it(n.targetRef&&n.targetRef.get("incoming"),n),a&&a.get("incoming")&&a.get("incoming").push(n)),n.targetRef=a)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,i,o)};Jt.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function Gt(e){return function(t){var n=t.context,i=n.shape||n.connection||n.element;b(i,"bpmn:BaseElement")&&e(t)}}function rk(e){if(b(e,"bpmn:Activity")){var t=Ae(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function Qi(e,t){di.call(this),this._bpmnFactory=e,this._moddle=t}ie(Qi,di);Qi.$inject=["bpmnFactory","moddle"];Qi.prototype._baseCreate=di.prototype.create;Qi.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,O({type:"label",di:n},ua,t))}return this.createElement(e,t)};Qi.prototype.createElement=function(e,t){t=O({},t||{});var n,i=t.businessObject,r=t.di;if(!i){if(!t.type)throw new Error("no shape type specified");i=this._bpmnFactory.create(t.type),V_(i)}if(!ak(r)){var o=O({},r||{},{id:i.id+"_di"});e==="root"?r=this._bpmnFactory.createDiPlane(i,o):e==="connection"?r=this._bpmnFactory.createDiEdge(i,o):r=this._bpmnFactory.createDiShape(i,o)}b(i,"bpmn:Group")&&(t=O({isFrame:!0},t)),t=ok(i,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=uf(r,t,"isExpanded")),be(i,["bpmn:Lane","bpmn:Participant"])&&(t=uf(r,t,"isHorizontal")),b(i,"bpmn:SubProcess")&&(t.collapsed=!we(i,r)),b(i,"bpmn:ExclusiveGateway")&&(Vt(r,"isMarkerVisible")?r.isMarkerVisible===void 0&&(r.isMarkerVisible=!1):r.isMarkerVisible=!0),mt(t.triggeredByEvent)&&(i.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),mt(t.cancelActivity)&&(i.cancelActivity=t.cancelActivity,delete t.cancelActivity);var a,s;return t.eventDefinitionType&&(a=i.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(s),s.$parent=i,i.eventDefinitions=a,delete t.eventDefinitionType),n=this.getDefaultSize(i,r),t=O({id:i.id},n,t,{businessObject:i,di:r}),this._baseCreate(e,t)};Qi.prototype.getDefaultSize=function(e,t){var n=X(e);if(t=t||Ae(e),b(n,"bpmn:SubProcess"))return we(n,t)?{width:350,height:200}:{width:100,height:80};if(b(n,"bpmn:Task"))return{width:100,height:80};if(b(n,"bpmn:Gateway"))return{width:50,height:50};if(b(n,"bpmn:Event"))return{width:36,height:36};if(b(n,"bpmn:Participant")){var i=t.isHorizontal===void 0||t.isHorizontal===!0;return we(n,t)?i?{width:600,height:250}:{width:250,height:600}:i?{width:400,height:60}:{width:60,height:400}}return b(n,"bpmn:Lane")?{width:400,height:100}:b(n,"bpmn:DataObjectReference")?{width:36,height:50}:b(n,"bpmn:DataStoreReference")?{width:50,height:50}:b(n,"bpmn:TextAnnotation")?{width:100,height:30}:b(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};Qi.prototype.createParticipantShape=function(e){return gt(e)||(e={isExpanded:e}),e=O({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function ok(e,t,n){return A(n,function(i){t=uf(e,t,i)}),t}function uf(e,t,n){return t[n]===void 0?t:(e[n]=t[n],gn(t,[n]))}function ak(e){return be(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function yl(e,t){this._modeling=e,this._canvas=t}yl.$inject=["modeling","canvas"];yl.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;A(n,function(r){var o={x:0,y:0};mt(i.left)?o.x=i.left-r.x:mt(i.right)?o.x=i.right-r.width-r.x:mt(i.center)?o.x=i.center-Math.round(r.width/2)-r.x:mt(i.top)?o.y=i.top-r.y:mt(i.bottom)?o.y=i.bottom-r.height-r.y:mt(i.middle)&&(o.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],o,r.parent)})};yl.prototype.postExecute=function(e){};function _l(e){this._modeling=e}_l.$inject=["modeling"];_l.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i};_l.prototype.postExecute=function(e){var t=e.hints||{};sk(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function sk(e,t){return zi(e.outgoing,function(n){return n.target===t})}function bl(e,t){this._canvas=e,this._layouter=t}bl.$inject=["canvas","layouter"];bl.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,a=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,r,o),t};bl.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Ps=Math.round;function hd(e){this._modeling=e}hd.$inject=["modeling"];hd.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,o=e.hints,a=this._modeling;A(t,function(f){fe(f.x)||(f.x=0),fe(f.y)||(f.y=0)});var s=Ee(t,function(f){return!f.hidden}),c=pt(s);A(t,function(f){$e(f)&&(f.waypoints=Rt(f.waypoints,function(p){return{x:Ps(p.x-c.x-c.width/2+r.x),y:Ps(p.y-c.y-c.height/2+r.y)}})),O(f,{x:Ps(f.x-c.x-c.width/2+r.x),y:Ps(f.y-c.y-c.height/2+r.y)})});var l=zc(t),u={};A(t,function(f){if($e(f)){u[f.id]=fe(i)?a.createConnection(u[f.source.id],u[f.target.id],i,f,f.parent||n,o):a.createConnection(u[f.source.id],u[f.target.id],f,f.parent||n,o);return}var p=O({},o);l.indexOf(f)===-1&&(p.autoResize=!1),Me(f)&&(p=gn(p,["attach"])),u[f.id]=fe(i)?a.createShape(f,An(f,["x","y","width","height"]),f.parent||n,i,p):a.createShape(f,An(f,["x","y","width","height"]),f.parent||n,p)}),e.elements=$f(u)};var Rg=Math.round;function er(e){this._canvas=e}er.$inject=["canvas"];er.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?O(t,n):O(t,{x:n.x-Rg(t.width/2),y:n.y-Rg(t.height/2)}),this._canvas.addShape(t,i,r),t};er.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function Ba(e){er.call(this,e)}ie(Ba,er);Ba.$inject=["canvas"];var ck=er.prototype.execute;Ba.prototype.execute=function(e){var t=e.shape;return uk(t),t.labelTarget=e.labelTarget,ck.call(this,e)};var lk=er.prototype.revert;Ba.prototype.revert=function(e){return e.shape.labelTarget=null,lk.call(this,e)};function uk(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function $a(e,t){this._canvas=e,this._modeling=t}$a.$inject=["canvas","modeling"];$a.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;Ii(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Ii(n.outgoing,function(i){t.removeConnection(i,{nested:!0})})};$a.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Xf(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};$a.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,ut(n.children,t,i),this._canvas.addConnection(t,n),t};function md(e,t){this._modeling=e,this._elementRegistry=t}md.$inject=["modeling","elementRegistry"];md.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;A(i,function(r){n.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function ja(e,t){this._canvas=e,this._modeling=t}ja.$inject=["canvas","modeling"];ja.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Ii(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Ii(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),Ii(n.children,function(i){$e(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})};ja.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=Xf(i.children,n),t.removeShape(n),n};ja.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return ut(i.children,n,r),t.addShape(n,i),n};function xl(e){this._modeling=e}xl.$inject=["modeling"];var Pg={x:"y",y:"x"};xl.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function o(v,E){v.range.min=Math.min(E[i],v.range.min),v.range.max=Math.max(E[i]+E[r],v.range.max)}function a(v){return v[i]+v[r]/2}function s(v){return v.length-1}function c(v){return v.max-v.min}function l(v,E){var C={y:0};C[i]=v-a(E),C[i]&&(C[Pg[i]]=0,t.moveElements([E],C,E.parent))}var u=n[0],f=s(n),p=n[f],d,h,m=0;A(n,function(v,E){var C,x,y;if(v.elements.length<2){E&&E!==n.length-1&&(o(v,v.elements[0]),m+=c(v.range));return}C=Gn(v.elements,i),x=C[0],E===f&&(x=C[s(C)]),y=a(x),v.range=null,A(C,function(S){if(l(y,S),v.range===null){v.range={min:S[i],max:S[i]+S[r]};return}o(v,S)}),E&&E!==n.length-1&&(m+=c(v.range))}),h=Math.abs(p.range.min-u.range.max),d=Math.round((h-m)/(n.length-1)),!(d<n.length-1)&&A(n,function(v,E){var C={},x;v===u||v===p||(x=n[E-1],v.range.max=0,A(v.elements,function(y,S){C[Pg[i]]=0,C[i]=x.range.max-y[i]+d,v.range.min!==y[i]&&(C[i]+=y[i]-v.range.min),C[i]&&t.moveElements([y],C,y.parent),v.range.max=Math.max(y[i]+y[r],S?v.range.max:0)}))})};xl.prototype.postExecute=function(e){};function El(e,t){this._layouter=e,this._canvas=t}El.$inject=["layouter","canvas"];El.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return O(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};El.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function gd(){}gd.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=it(o.children,t),ut(i.children,t,r),t.parent=i,A(t.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),t};gd.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return it(n.children,t),ut(i.children,t,r),t.parent=i,A(t.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),t};function vd(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}vd.prototype.add=function(e,t){return this.addAll([e],t)};vd.prototype.addAll=function(e,t){var n=kC(e,!!t,this);return O(this,n),this};function Fa(e){this._modeling=e}Fa.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Fa.prototype.moveClosure=function(e,t,n,i,r){var o=this._modeling,a=e.allShapes,s=e.allConnections,c=e.enclosedConnections,l=e.topLevel,u=!1;r&&r.parent===n&&(u=!0),A(a,function(f){o.moveShape(f,t,l[f.id]&&!u&&n,{recurse:!1,layout:!1})}),A(s,function(f){var p=!!a[f.source.id],d=!!a[f.target.id];c[f.id]&&p&&d?o.moveConnection(f,t,l[f.id]&&!u&&n):o.layoutConnection(f,{connectionStart:p&&Hp(f,f.source,t),connectionEnd:d&&zp(f,f.target,t)})})};Fa.prototype.getClosure=function(e){return new vd().addAll(e,!0)};function wl(e){this._helper=new Fa(e)}wl.$inject=["modeling"];wl.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};wl.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Nr(e){this._modeling=e,this._helper=new Fa(e)}Nr.$inject=["modeling"];Nr.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=An(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=it(o.children,t),ut(i.children,t,r),O(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t};Nr.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&(A(t.incoming,function(o){r.layoutConnection(o,{connectionEnd:zp(o,t,n)})}),A(t.outgoing,function(o){r.layoutConnection(o,{connectionStart:Hp(o,t,n)})})),i.recurse!==!1&&this.moveChildren(e)};Nr.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return ut(n.children,t,i),O(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t};Nr.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Nr.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Ha(e){this._modeling=e}Ha.$inject=["modeling"];Ha.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return ge(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i};Ha.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!i||o.docking==="source")&&(a.connectionStart=a.connectionStart||Tg(ge(r)?r[0]:r)),i&&(!n||o.docking==="target")&&(a.connectionEnd=a.connectionEnd||Tg(ge(r)?r[r.length-1]:r)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))};Ha.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function Tg(e){return e.original||e}function vi(e,t){this._modeling=e,this._rules=t}vi.$inject=["modeling","rules"];vi.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,o=e.newData,a=e.hints||{},s;function c(h,m,v){return i.allowed("connection.reconnect",{connection:v,source:h,target:m})}var l={x:o.x,y:o.y},u={x:r.x,y:r.y,width:r.width,height:r.height};s=e.newShape=e.newShape||t.createShape(o,l,r.parent,a),r.host&&n.updateAttachment(s,r.host);var f;a.moveChildren!==!1&&(f=r.children.slice(),n.moveElements(f,{x:0,y:0},s,a));var p=r.incoming.slice(),d=r.outgoing.slice();A(p,function(h){var m=h.source,v=c(m,s,h);v&&t.reconnectEnd(h,s,ul(h,s,u),a)}),A(d,function(h){var m=h.target,v=c(s,m,h);v&&t.reconnectStart(h,s,ll(h,s,u),a)})};vi.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};vi.prototype.execute=function(e){};vi.prototype.revert=function(e){};vi.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)};vi.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)};vi.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function za(e){this._modeling=e}za.$inject=["modeling"];za.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},O(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};za.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&(A(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:ul(o,n,i)})}),A(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:ll(o,n,i)})}))};za.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return O(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function tr(e){this._modeling=e}tr.$inject=["modeling"];tr.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,o=e.start,a={};this.moveShapes(i,t),A(r,function(s){a[s.id]=pk(s)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(j2(i,r),t,n,o,i,r,a)};tr.prototype.execute=function(){};tr.prototype.revert=function(){};tr.prototype.moveShapes=function(e,t){var n=this;A(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})};tr.prototype.resizeShapes=function(e,t,n){var i=this;A(e,function(r){var o=F2(r,n,t);i._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};tr.prototype.updateConnectionWaypoints=function(e,t,n,i,r,o,a){var s=this,c=r.concat(o);A(e,function(l){var u=l.source,f=l.target,p=fk(l),d=Hx(n),h={};Ci(c,u)&&Ci(c,f)?(p=Rt(p,function(m){return Mg(m,i,n)&&(m[d]=m[d]+t[d]),m.original&&Mg(m.original,i,n)&&(m.original[d]=m.original[d]+t[d]),m}),s._modeling.updateWaypoints(l,p,{labelBehavior:!1})):(Ci(c,u)||Ci(c,f))&&(Ci(r,u)?h.connectionStart=Hp(l,u,t):Ci(r,f)?h.connectionEnd=zp(l,f,t):Ci(o,u)?h.connectionStart=ll(l,u,a[u.id]):Ci(o,f)&&(h.connectionEnd=ul(l,f,a[f.id])),s._modeling.layoutConnection(l,h))})};function Ag(e){return O({},e)}function fk(e){return Rt(e.waypoints,function(t){return t=Ag(t),t.original&&(t.original=Ag(t.original)),t})}function Hx(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function Mg(e,t,n){var i=Hx(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function Ci(e,t){return e.indexOf(t)!==-1}function pk(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Sl(e){this._modeling=e}Sl.$inject=["modeling"];Sl.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=zx(n),t.collapsed=!t.collapsed;var i=Vx(n,t.collapsed);return[t].concat(i)};Sl.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=Wx(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function zx(e){var t={};return A(e,function(n){t[n.id]=n.hidden,n.children&&(t=O({},t,zx(n.children)))}),t}function Vx(e,t){var n=[];return A(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(Vx(i.children,i.collapsed||t)))}),n}function Wx(e,t){var n=[];return A(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(Wx(i.children,t)))}),n}function Cl(e){this._modeling=e}Cl.$inject=["modeling"];Cl.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=Ux(i,t),Gx(n,t),t.host=n,t};Cl.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,Ux(n,t),Gx(i,t,r),t};function Ux(e,t){return it(e&&e.attachers,t)}function Gx(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),ut(i,t,n)}}function yd(){}yd.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};yd.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function Ne(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}Ne.$inject=["eventBus","elementFactory","commandStack"];Ne.prototype.getHandlers=function(){return{"shape.append":_l,"shape.create":er,"shape.delete":ja,"shape.move":Nr,"shape.resize":za,"shape.replace":vi,"shape.toggleCollapse":Sl,spaceTool:tr,"label.create":Ba,"connection.create":bl,"connection.delete":$a,"connection.move":gd,"connection.layout":El,"connection.updateWaypoints":yd,"connection.reconnect":Ha,"elements.create":hd,"elements.move":wl,"elements.delete":md,"elements.distribute":xl,"elements.align":yl,"element.updateAttachment":Cl}};Ne.prototype.registerHandlers=function(e){A(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};Ne.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)};Ne.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};Ne.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,o=n,a;r===!0?(a=n,o=n.parent):r===!1&&(a=null);var s={shapes:e,delta:t,newParent:o,newHost:a,hints:i};this._commandStack.execute("elements.move",s)};Ne.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)};Ne.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};Ne.prototype.createConnection=function(e,t,n,i,r,o){typeof n=="object"&&(o=r,r=i,i=n,n=void 0),i=this._create("connection",i);var a={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:o};return this._commandStack.execute("connection.create",a),a.connection};Ne.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var o=r.attach,a,s;e=this._create("shape",e),o?(a=n.parent,s=n):a=n;var c={position:t,shape:e,parent:a,parentIndex:i,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape};Ne.prototype.createElements=function(e,t,n,i,r){ge(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var o={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",o),o.elements};Ne.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape};Ne.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var o={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape};Ne.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};Ne.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)};Ne.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};Ne.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};Ne.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape};Ne.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};Ne.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)};Ne.prototype.createSpace=function(e,t,n,i,r){var o={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",o)};Ne.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)};Ne.prototype.reconnect=function(e,t,n,i,r){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)};Ne.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,O(i,{docking:"source"}))};Ne.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,O(i,{docking:"target"}))};Ne.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)};Ne.prototype._create=function(e,t){return TR(t)?t:this._elementFactory.create(e,t)};Ne.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function Va(e){this._elementRegistry=e}Va.$inject=["elementRegistry"];Va.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||dk(n,rc(i));return Kx(n,i),e.oldProperties=o,e.changed=r,r};Va.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return Kx(n,t),i};Va.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return b(e,"bpmn:DataObject")?hk(e,t):[]};function dk(e,t){return Xt(t,function(n,i){return n[i]=e.get(i),n},{})}function Kx(e,t){A(t,function(n,i){e.set(i,n)})}function hk(e,t){return t.filter(function(n){return b(n,"bpmn:DataObjectReference")&&X(n).dataObjectRef===e})}var jo="default",ci="id",Yx="di",mk={width:0,height:0};function Wa(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=i}Wa.$inject=["elementRegistry","moddle","modeling","textRenderer"];Wa.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,r=this._moddle.ids,o=t.businessObject,a=bk(e.properties),s=e.oldProperties||gk(t,a);return qx(a,o)&&(r.unclaim(o[ci]),i.updateId(t,a[ci]),r.claim(a[ci],o)),jo in a&&(a[jo]&&n.push(i.get(a[jo].id)),o[jo]&&n.push(i.get(o[jo].id))),Xx(t,a),e.oldProperties=s,e.changed=n,n};Wa.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&X(n).name;if(i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,mk)}};Wa.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return Xx(t,i),qx(n,r)&&(a.unclaim(n[ci]),o.updateId(t,i[ci]),a.claim(i[ci],r)),e.changed};function qx(e,t){return ci in e&&e[ci]!==t[ci]}function gk(e,t){var n=rc(t),i=e.businessObject,r=Ae(e);return Xt(n,function(o,a){return a!==Yx?o[a]=i.get(a):o[a]=vk(r,rc(t.di)),o},{})}function vk(e,t){return Xt(t,function(n,i){return n[i]=e&&e.get(i),n},{})}function Xx(e,t){var n=e.businessObject,i=Ae(e);A(t,function(r,o){o!==Yx?n.set(o,r):i&&yk(i,r)})}function yk(e,t){A(t,function(n,i){e.set(i,n)})}var _k=["default"];function bk(e){var t=O({},e);return _k.forEach(function(n){n in e&&(t[n]=X(t[n]))}),t}function Rl(e,t){this._canvas=e,this._modeling=t}Rl.$inject=["canvas","modeling"];Rl.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),o=r.businessObject,a=o.$parent,s=Ae(r);return t.setRootElement(n),t.removeRootElement(r),ut(a.rootElements,i),i.$parent=a,it(a.rootElements,o),o.$parent=null,r.di=null,s.bpmnElement=i,n.di=s,e.oldRoot=r,[]};Rl.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,o=r.businessObject,a=i.$parent,s=Ae(n);return t.setRootElement(r),t.removeRootElement(n),it(a.rootElements,i),i.$parent=null,ut(a.rootElements,o),o.$parent=a,n.di=null,s.bpmnElement=o,r.di=s,[]};function _d(e,t){this._modeling=e,this._spaceTool=t}_d.$inject=["modeling","spaceTool"];_d.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,o=hn(i),a=o===i,s=a?i:i.parent,c=Zi(s),l=dt(i);if(l?r==="left"?r="top":r==="right"&&(r="bottom"):r==="top"?r="left":r==="bottom"&&(r="right"),!c.length){var u=l?{x:i.x+dn,y:i.y,width:i.width-dn,height:i.height}:{x:i.x,y:i.y+dn,width:i.width,height:i.height-dn};n.createShape({type:"bpmn:Lane",isHorizontal:l},u,s)}var f=[];Mr(o,function(y){return f.push(y),y.label&&f.push(y.label),y===i?[]:Ee(y.children,function(S){return S!==i})});var p,d,h,m,v;r==="top"?(p=-120,d=i.y,h=d+10,m="n",v="y"):r==="left"?(p=-120,d=i.x,h=d+10,m="w",v="x"):r==="bottom"?(p=120,d=i.y+i.height,h=d-10,m="s",v="y"):r==="right"&&(p=120,d=i.x+i.width,h=d-10,m="e",v="x");var E=t.calculateAdjustments(f,v,p,h),C=l?{x:0,y:p}:{x:p,y:0};t.makeSpace(E.movingShapes,E.resizingShapes,C,m,h);var x=l?{x:i.x+(a?dn:0),y:d-(r==="top"?120:0),width:i.width-(a?dn:0),height:120}:{x:d-(r==="left"?120:0),y:i.y+(a?dn:0),width:120,height:i.height-(a?dn:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:l},x,s)};function bd(e){this._modeling=e}bd.$inject=["modeling"];bd.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=e.count,r=Zi(n),o=r.length;if(o>i)throw new Error(`more than <${i}> child lanes`);var a=dt(n),s=a?n.height:n.width,c=Math.round(s/i),l,u,f,p;for(p=0;p<i;p++)p===i-1?l=s-c*p:l=c,u=a?{x:n.x+dn,y:n.y+p*c,width:n.width-dn,height:l}:{x:n.x+p*c,y:n.y+dn,width:l,height:n.height-dn},p<o?t.resizeShape(r[p],u):(f={type:"bpmn:Lane",isHorizontal:a},t.createShape(f,u,n))};function Ua(e,t){this._modeling=e,this._spaceTool=t}Ua.$inject=["modeling","spaceTool"];Ua.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};Ua.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=YM(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})};Ua.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=le(e),r=le(t),o=Xb(r,i),a=hn(e),s=[],c=[];Mr(a,function(h){return s.push(h),(b(h,"bpmn:Lane")||b(h,"bpmn:Participant"))&&c.push(h),h.children});var l,u,f,p,d;(o.bottom||o.top)&&(l=o.bottom||o.top,u=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),f=o.bottom?"s":"n",p=o.top>0||o.bottom<0?-l:l,d=n.calculateAdjustments(s,"y",p,u),n.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:l},f)),(o.left||o.right)&&(l=o.right||o.left,u=e.x+(o.right?e.width:0)+(o.right?-10:100),f=o.right?"e":"w",p=o.left>0||o.right<0?-l:l,d=n.calculateAdjustments(c,"x",p,u),n.makeSpace(d.movingShapes,d.resizingShapes,{x:l,y:0},f))};var va="flowNodeRef",xd="lanes";function Ga(e){this._elementRegistry=e}Ga.$inject=["elementRegistry"];Ga.prototype._computeUpdates=function(e,t){var n=[],i=[],r={},o=[];function a(u,f){var p=le(f),d={x:u.x+u.width/2,y:u.y+u.height/2};return d.x>p.left&&d.x<p.right&&d.y>p.top&&d.y<p.bottom}function s(u){n.indexOf(u)===-1&&(o.push(u),n.push(u))}function c(u){var f=hn(u);return r[f.id]||(r[f.id]=sl(f)),r[f.id]}function l(u){if(!u.parent)return[];var f=c(u);return f.filter(function(p){return a(u,p)}).map(function(p){return p.businessObject})}return t.forEach(function(u){var f=hn(u);if(!(!f||n.indexOf(f)!==-1)){var p=f.children.filter(function(d){return b(d,"bpmn:FlowNode")});p.forEach(s),n.push(f)}}),e.forEach(s),o.forEach(function(u){var f=u.businessObject,p=f.get(xd),d=p.slice(),h=l(u);i.push({flowNode:f,remove:d,add:h})}),t.forEach(function(u){var f=u.businessObject;u.parent||f.get(va).forEach(function(p){i.push({flowNode:p,remove:[f],add:[]})})}),i};Ga.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(xd);n.remove.forEach(function(o){it(r,o),it(o.get(va),i)}),n.add.forEach(function(o){ut(r,o),ut(o.get(va),i)})}),[]};Ga.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var i=n.flowNode,r=i.get(xd);n.add.forEach(function(o){it(r,o),it(o.get(va),i)}),n.remove.forEach(function(o){ut(r,o),ut(o.get(va),i)})}),[]};function Pl(e){this._moddle=e}Pl.$inject=["moddle"];Pl.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.claim(n,i):t.unclaim(n),[]};Pl.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.unclaim(n):t.claim(n,i),[]};var xk={fill:void 0,stroke:void 0};function Ed(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(qt(t)){var n=Ek(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}Ed.$inject=["commandStack"];Ed.prototype.postExecute=function(e){var t=e.elements,n=e.colors||xk,i=this,r={};"fill"in n&&O(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&O(r,{"border-color":this._normalizeColor(n.stroke)}),A(t,function(o){var a=$e(o)?An(r,["border-color"]):r,s=Ae(o);if(wk(a),Me(o))i._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:s.label,properties:{color:r["border-color"]}});else{if(!be(s,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})}})};function Ek(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function wk(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var Sk={width:0,height:0};function Zx(e,t,n){function i(c,l){var u=c.label||c,f=c.labelTarget||c;return q1(u,l),[u,f]}function r(c){var l=c.element,u=l.businessObject,f=c.newLabel;if(!Me(l)&&wr(l)&&!Ic(l)&&!Dg(f)){var p=7,d=Ff(l);d={x:d.x,y:d.y+p},e.createLabel(l,d,{id:u.id+"_label",businessObject:u,di:l.di})}}function o(c){return c.oldLabel=an(c.element),i(c.element,c.newLabel)}function a(c){return i(c.element,c.oldLabel)}function s(c){var l=c.element,u=l.label||l,f=c.newLabel,p=c.newBounds,d=c.hints||{};if(!(!Me(u)&&!b(u,"bpmn:TextAnnotation"))){if(Me(u)&&Dg(f)){d.removeShape!==!1&&e.removeShape(u,{unsetLabel:!1});return}var h=an(l);typeof p>"u"&&(p=t.getExternalLabelBounds(u,h)),p&&e.resizeShape(u,p,Sk)}}this.preExecute=r,this.execute=o,this.revert=a,this.postExecute=s}Zx.$inject=["modeling","textRenderer","bpmnFactory"];function Dg(e){return!e||!e.trim()}function At(e,t,n,i){Ne.call(this,e,t,n),this._bpmnRules=i}ie(At,Ne);At.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];At.prototype.getHandlers=function(){var e=Ne.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Va,e["element.updateProperties"]=Wa,e["canvas.updateRoot"]=Rl,e["lane.add"]=_d,e["lane.resize"]=Ua,e["lane.split"]=bd,e["lane.updateRefs"]=Ga,e["id.updateClaim"]=Pl,e["element.setColor"]=Ed,e["element.updateLabel"]=Zx,e};At.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};At.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)};At.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};At.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};At.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};At.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};At.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};At.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};At.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};At.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};At.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};At.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};At.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function Jx(){}Jx.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||pe(t.source||e.source),t.connectionEnd||pe(t.target||e.target)]};var Ts=20,Ck=5,bc=Math.round,kg=20,Rk={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function Pk(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function Tk(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function Qx(e,t,n){var i=Tt(t,e,Ck),r=n.split(":")[0],o=bc((t.x-e.x)/2+e.x),a=bc((t.y-e.y)/2+e.y),s,c,l=Tk(r,i),u=/h|r|l/.test(r),f=!1,p=!1;return l?(s=u?{x:o,y:e.y}:{x:e.x,y:a},c=u?"h:h":"v:v"):(f=Pk(i,r),c=u?"h:v":"v:h",f?u?(p=a===e.y,s={x:e.x+Ts*(/l/.test(r)?-1:1),y:p?a+Ts:a}):(p=o===e.x,s={x:p?o+Ts:o,y:e.y+Ts*(/t/.test(r)?-1:1)}):s={x:o,y:a}),{waypoints:wd(e,s,c).concat(s),directions:c,turnNextDirections:p}}function Ak(e,t,n){return Qx(e,t,n)}function Mk(e,t,n){var i=Qx(t,e,Og(n));return{waypoints:i.waypoints.slice().reverse(),directions:Og(i.directions),turnNextDirections:i.turnNextDirections}}function Dk(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,o=wd(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:o,directions:r}}function Og(e){return e.split(":").reverse().join(":")}function kk(e,t,n){var i=bc((t.x-e.x)/2+e.x),r=bc((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function wd(e,t,n){if(n=n||"h:h",!Hk(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(e0(n)){var i=Ak(e,t,n),r=Mk(e,t,n),o=Dk(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return kk(e,t,n)}function Ok(e,t,n){var i=wd(e,t,n);return i.unshift(e),i.push(t),t0(i)}function Ik(e,t,n,i,r){var o=r&&r.preferredLayouts||[],a=I1(o,"straight")[0]||"h:h",s=Rk[a]||0,c=Tt(e,t,s),l=Fk(c,a);n=n||pe(e),i=i||pe(t);var u=l.split(":"),f=Ng(n,e,u[0],zk(c)),p=Ng(i,t,u[1],c);return Ok(f,p,l)}function Nk(e,t,n,i,r,o){ge(n)&&(r=n,o=i,n=pe(e),i=pe(t)),o=O({preferredLayouts:[]},o),r=r||[];var a=o.preferredLayouts,s=a.indexOf("straight")!==-1,c;return c=s&&Bk(e,t,n,i,o),c||(c=o.connectionEnd&&jk(t,e,i,r),c)||(c=o.connectionStart&&$k(e,t,n,r),c)?c:!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:Ik(e,t,n,i,o)}function Lk(e,t,n){return e>=t&&e<=n}function Ig(e,t,n){var i={x:"width",y:"height"};return Lk(t[e],n[e],n[e]+n[i[e]])}function Bk(e,t,n,i,r){var o={},a,s;return s=Tt(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),r.preserveDocking==="target"?Ig(a,i,e)?(o[a]=i[a],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:i.x,y:i.y}]):null:Ig(a,n,t)?(o[a]=n[a],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y,original:{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y}}]):null):null}function $k(e,t,n,i){return Sd(e,t,n,i)}function jk(e,t,n,i){var r=i.slice().reverse();return r=Sd(e,t,n,r),r?r.reverse():null}function Sd(e,t,n,i){function r(u){return u.length<3?!0:u.length>4?!1:!!De(u,function(f,p){var d=u[p-1];return d&&wa(f,d)<3})}function o(u,f,p){var d=ri(f,u);switch(d){case"v":return{x:p.x,y:u.y};case"h":return{x:u.x,y:p.y}}return{x:u.x,y:u.y}}function a(u,f,p){var d;for(d=u.length-2;d!==0;d--)if(Th(u[d],f,kg)||Th(u[d],p,kg))return u.slice(d);return u}if(r(i))return null;var s=i[0],c=i.slice(),l;return c[0]=n,c[1]=o(c[1],s,n),l=a(c,e,t),l!==c&&(c=Sd(e,t,n,l)),c&&ri(c)?null:c}function Fk(e,t){if(e0(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function Hk(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function e0(e){return e&&/t|r|b|l/.test(e)}function zk(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function Ng(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function t0(e){return e.reduce(function(t,n,i){var r=t[t.length-1],o=e[i+1];return Vf(r,o,n,0)||t.push(n),t},[])}var Vk=-10,Wk=40,Uk={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},Gk={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},Cd={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},zo={top:"t",right:"r",bottom:"b",left:"l"};function Tl(e){this._elementRegistry=e}ie(Tl,Jx);Tl.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,o=t.connectionStart,a=t.connectionEnd,s=this._elementRegistry,c,l;if(o||(o=Lg(r&&r[0],n)),a||(a=Lg(r&&r[r.length-1],i)),(b(e,"bpmn:Association")||b(e,"bpmn:DataAssociation"))&&r&&!Bg(n,i))return[].concat([o],r.slice(1,-1),[a]);var u=Rb(n,s)?Uk:Gk;return b(e,"bpmn:MessageFlow")?c=Yk(n,i,u):(b(e,"bpmn:SequenceFlow")||Bg(n,i))&&(n===i?c={preferredLayouts:eO(n,e,u)}:b(n,"bpmn:BoundaryEvent")?c={preferredLayouts:tO(n,i,a,u)}:ya(n)||ya(i)?c={preferredLayouts:u.subProcess,preserveDocking:Xk(n)}:b(n,"bpmn:Gateway")?c={preferredLayouts:u.fromGateway}:b(i,"bpmn:Gateway")?c={preferredLayouts:u.toGateway}:c={preferredLayouts:u.default}),c&&(c=O(c,t),l=t0(Nk(n,i,o,a,r,c))),l||[o,a]};function Kk(e){var t=e.host;return Tt(pe(e),t,Vk)}function Yk(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:qk(e,t)}}function qk(e,t){return b(t,"bpmn:Participant")?"source":b(e,"bpmn:Participant")?"target":ya(t)?"source":ya(e)||b(t,"bpmn:Event")?"target":b(e,"bpmn:Event")?"source":null}function Xk(e){return ya(e)?"target":"source"}function Lg(e,t){return e?e.original||e:pe(t)}function Bg(e,t){return b(t,"bpmn:Activity")&&b(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function ya(e){return b(e,"bpmn:SubProcess")&&we(e)}function vr(e,t){return e===t}function Zk(e,t){return t.indexOf(e)!==-1}function so(e){var t=/right|left/.exec(e);return t&&t[0]}function co(e){var t=/top|bottom/.exec(e);return t&&t[0]}function $g(e,t){return Cd[e]===t}function Jk(e,t){var n=so(e),i=Cd[n];return t.indexOf(i)!==-1}function Qk(e,t){var n=co(e),i=Cd[n];return t.indexOf(i)!==-1}function n0(e){return e==="right"||e==="left"}function eO(e,t,n){var i=t.waypoints,r=i&&i.length&&Tt(i[0],e);return r==="top"?n.loop.fromTop:r==="right"?n.loop.fromRight:r==="left"?n.loop.fromLeft:n.loop.fromBottom}function tO(e,t,n,i){var r=pe(e),o=pe(t),a=Kk(e),s,c,l=vr(e.host,t),u=Zk(a,["top","right","bottom","left"]),f=Tt(o,r,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return l?nO(a,u,e,t,n,i):(s=iO(a,f,u,i.isHorizontal),c=rO(a,f,u,i.isHorizontal),[s+":"+c])}function nO(e,t,n,i,r,o){var a=t?e:o.isHorizontal?co(e):so(e),s=zo[a],c;return t?n0(e)?c=jg("y",n,i,r)?"h":o.boundaryLoop.alternateHorizontalSide:c=jg("x",n,i,r)?"v":o.boundaryLoop.alternateVerticalSide:c=o.boundaryLoop.default,[s+":"+c]}function jg(e,t,n,i){var r=Wk;return!(lu(e,i,n,r)||lu(e,i,{x:n.x+n.width,y:n.y+n.height},r)||lu(e,i,pe(t),r))}function lu(e,t,n,i){return Math.abs(t[e]-n[e])<i}function iO(e,t,n,i){if(n)return zo[e];var r=co(e),o=so(e),a=co(t),s=so(t);if(i){if(vr(r,a)||$g(o,s))return zo[r]}else if(vr(o,s)||$g(r,a))return zo[o];return zo[i?o:r]}function rO(e,t,n,i){return n?n0(e)?Jk(e,t)||vr(e,t)?"h":"v":Qk(e,t)||vr(e,t)?"v":"h":i?vr(co(e),co(t))?"h":"v":vr(so(e),so(t))?"v":"h"}Tl.$inject=["elementRegistry"];function Fg(e){return O({original:e.point.original||e.point},e.actual)}function nr(e,t){this._elementRegistry=e,this._graphicsFactory=t}nr.$inject=["elementRegistry","graphicsFactory"];nr.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(Fg(i)),o.push(Fg(r)),o};nr.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,o,a;return r=n?0:i.length-1,o=i[r],a=this._getIntersection(t,e,n),{point:o,actual:a||o,idx:r}};nr.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return Bu(i,r,n)};nr.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};nr.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};nr.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const i0={__init__:["modeling","bpmnUpdater"],__depends__:[QD,v2,_2,b2,Bx,Y2,X2,nk,qn,Uf,Fx],bpmnFactory:["type",xn],bpmnUpdater:["type",Jt],elementFactory:["type",Qi],modeling:["type",At],layouter:["type",Tl],connectionDocking:["type",nr]},Hg=Math.round;function Al(e,t,n,i,r,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=r,this._rules=o}Al.prototype.create=function(e,t,n){const i=this._complexPreview,r=this._connectionDocking,o=this._elementFactory,a=this._eventBus,s=this._layouter,c=this._rules,l=o.createShape(O({type:t},n)),u=a.fire("autoPlace",{source:e,shape:l});if(!u)return;O(l,{x:u.x-Hg(l.width/2),y:u.y-Hg(l.height/2)});const f=c.allowed("connection.create",{source:e,target:l,hints:{targetParent:e.parent}});let p=null;f&&(p=o.createConnection(f),p.waypoints=s.layoutConnection(p,{source:e,target:l}),p.waypoints=r.getCroppedWaypoints(p,e,l)),i.create({created:[l,p].filter(d=>!la(d))})};Al.prototype.cleanUp=function(){this._complexPreview.cleanUp()};Al.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const oO={__depends__:[vp,TM,i0],__init__:["appendPreview"],appendPreview:["type",Al]};var zg=Math.min,Vg=Math.max;function uu(e){e.preventDefault()}function na(e){e.stopPropagation()}function aO(e){return e.nodeType===Node.TEXT_NODE}function sO(e){return[].slice.call(e)}function Dn(e){this.container=e.container,this.parent=He('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Ie("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=Wt(this.autoResize,this),this.handlePaste=Wt(this.handlePaste,this)}Dn.prototype.create=function(e,t,n,i){var r=this,o=this.parent,a=this.content,s=this.container;i=this.options=i||{},t=this.style=t||{};var c=An(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);O(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},c);var l=An(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return O(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},l),i.centerVertically&&O(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},l),a.innerText=n,me.bind(a,"keydown",this.keyHandler),me.bind(a,"mousedown",na),me.bind(a,"paste",r.handlePaste),i.autoResize&&me.bind(a,"input",this.autoResize),i.resizable&&this.resizable(t),s.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o};Dn.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}};Dn.prototype.insertText=function(e){e=cO(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Dn.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,o=t.endOffset,a=t.commonAncestorContainer,s=sO(a.childNodes),c,l;if(aO(a)){var u=n.textContent;n.textContent=u.substring(0,r)+e+u.substring(o),c=n,l=r+e.length}else if(n===this.content&&i===this.content){var f=document.createTextNode(e);this.content.insertBefore(f,s[r]),c=f,l=f.textContent.length}else{var p=s.indexOf(n),d=s.indexOf(i);s.forEach(function(h,m){m===p?h.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(o):m>p&&m<=d&&Kn(h)}),c=n,l=r+e.length}c&&l!==void 0&&setTimeout(function(){self.setSelection(c,l)})};Dn.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}};Dn.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=He('<div class="djs-direct-editing-resize-handle"></div>');var s,c,l,u,f=function(h){uu(h),na(h),s=h.clientX,c=h.clientY;var m=t.getBoundingClientRect();l=m.width,u=m.height,me.bind(document,"mousemove",p),me.bind(document,"mouseup",d)},p=function(h){uu(h),na(h);var m=zg(Vg(l+h.clientX-s,i),o),v=zg(Vg(u+h.clientY-c,r),a);t.style.width=m+"px",t.style.height=v+"px",e.resizeHandler({width:l,height:u,dx:h.clientX-s,dy:h.clientY-c})},d=function(h){uu(h),na(h),me.unbind(document,"mousemove",p,!1),me.unbind(document,"mouseup",d,!1)};me.bind(n,"mousedown",f)}O(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Dn.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),me.unbind(t,"keydown",this.keyHandler),me.unbind(t,"mousedown",na),me.unbind(t,"input",this.autoResize),me.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Kn(n)),Kn(e)};Dn.prototype.getValue=function(){return this.content.innerText.trim()};Dn.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Dn.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function cO(e){return e.replace(/\r\n|\r|\n/g,`
`)}function En(e,t){this._eventBus=e,this._providers=[],this._textbox=new Dn({container:t.getContainer(),keyHandler:Wt(this._handleKey,this),resizeHandler:Wt(this._handleResize,this)})}En.$inject=["eventBus","canvas"];En.prototype.registerProvider=function(e){this._providers.push(e)};En.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};En.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};En.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};En.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0};En.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),o=e.context.text;(r!==o||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}};En.prototype.getValue=function(){return this._textbox.getValue()};En.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};En.prototype._handleResize=function(e){this._fire("resize",e)};En.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=De(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const r0={__depends__:[Gc],__init__:["directEditing"],directEditing:["type",En]};function Wg(e){return function(t){var n=t.target,i=X(e),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,a=(r&&r.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!i.triggeredByEvent,c=n.isExpanded===void 0||n.isExpanded===we(e);return!o||!a||!s||!c}}var lO=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],uO=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],fO=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],pO=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],dO=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],hO=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],o0=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],mO=o0,Ug=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],gO=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],vO=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],yO=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],_O=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],bO=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],xO=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];const Gg={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function fn(e,t,n,i,r,o,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=o,this._translate=a,this._moddleCopy=s,this._register()}fn.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];fn.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};fn.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,i=[];if(ge(e)||!n.allowed("shape.replace",{element:e}))return{};var r=Wg(e);return b(t,"bpmn:DataObjectReference")?this._createEntries(e,gO):b(t,"bpmn:DataStoreReference")&&!b(e.parent,"bpmn:Collaboration")?this._createEntries(e,vO):b(t,"bpmn:StartEvent")&&!b(t.$parent,"bpmn:SubProcess")?(i=Ee(lO,r),this._createEntries(e,i)):b(t,"bpmn:Participant")?(i=Ee(xO,function(o){return we(e)!==o.target.isExpanded}),this._createEntries(e,i)):b(t,"bpmn:StartEvent")&&Pt(t.$parent)?(i=Ee(_O,function(o){var a=o.target,s=a.isInterrupting!==!1,c=t.isInterrupting===s;return r(o)||!r(o)&&!c}),this._createEntries(e,i)):b(t,"bpmn:StartEvent")&&!Pt(t.$parent)&&b(t.$parent,"bpmn:SubProcess")?(i=Ee(uO,r),this._createEntries(e,i)):b(t,"bpmn:EndEvent")?(i=Ee(pO,function(o){var a=o.target;return a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!b(t.$parent,"bpmn:Transaction")?!1:r(o)}),this._createEntries(e,i)):b(t,"bpmn:BoundaryEvent")?(i=Ee(yO,function(o){var a=o.target;if(a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!b(t.attachedToRef,"bpmn:Transaction"))return!1;var s=a.cancelActivity!==!1,c=t.cancelActivity==s;return r(o)||!r(o)&&!c}),this._createEntries(e,i)):b(t,"bpmn:IntermediateCatchEvent")||b(t,"bpmn:IntermediateThrowEvent")?(i=Ee(fO,r),this._createEntries(e,i)):b(t,"bpmn:Gateway")?(i=Ee(dO,r),this._createEntries(e,i)):b(t,"bpmn:Transaction")?(i=Ee(o0,r),this._createEntries(e,i)):Pt(t)&&we(e)?(i=Ee(mO,r),this._createEntries(e,i)):b(t,"bpmn:SubProcess")&&we(e)?(i=Ee(hO,r),this._createEntries(e,i)):b(t,"bpmn:AdHocSubProcess")&&!we(e)?(i=Ee(Ug,function(o){var a=o.target,s=a.type==="bpmn:SubProcess",c=a.isExpanded===!0;return Wg(a)&&(!s||c)}),this._createEntries(e,i)):b(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,bO):b(t,"bpmn:FlowNode")?(i=Ee(Ug,r),b(t,"bpmn:SubProcess")&&!we(e)&&(i=Ee(i,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,i)):{}};fn.prototype.getPopupMenuHeaderEntries=function(e){var t={};return b(e,"bpmn:Activity")&&!Pt(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),b(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),b(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),b(e,"bpmn:SubProcess")&&!b(e,"bpmn:Transaction")&&!Pt(e)&&(t={...t,...this._getAdHocHeaderEntries(e)}),ax(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};fn.prototype._createEntries=function(e,t){var n={},i=this;return A(t,function(r){n[r.actionName]=i._createEntry(r,e)}),n};fn.prototype._createSequenceFlowEntries=function(e,t){var n=X(e),i={},r=this._modeling,o=this._moddle,a=this;return A(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(b(n.sourceRef,"bpmn:ExclusiveGateway")||b(n.sourceRef,"bpmn:InclusiveGateway")||b(n.sourceRef,"bpmn:ComplexGateway")||b(n.sourceRef,"bpmn:Activity"))&&(i={...i,[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&b(n.sourceRef,"bpmn:Activity")&&(i={...i,[s.actionName]:a._createEntry(s,e,function(){var c=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:c})})});break;default:b(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i={...i,[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e,{conditionExpression:void 0})})}),(b(n.sourceRef,"bpmn:ExclusiveGateway")||b(n.sourceRef,"bpmn:InclusiveGateway")||b(n.sourceRef,"bpmn:ComplexGateway")||b(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i={...i,[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e.source,{default:void 0})})})}}),i};fn.prototype._createEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,o=function(){return r(t,e.target)},a=e.label;return a&&typeof a=="function"&&(a=a(t)),n=n||o,{label:i(a),className:e.className,action:n}};fn.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function i(l,u){if(u.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const f=e.businessObject.get("loopCharacteristics"),p=t._moddle.create(u.options.loopCharacteristics);f&&t._moddleCopy.copyElement(f,p),p.set("isSequential",u.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:p})}var r=X(e),o=r.loopCharacteristics,a,s,c;return o&&(a=o.isSequential,s=o.isSequential===void 0,c=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:c,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:a,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};fn.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};function r(a,s){t._modeling.updateModdleProperties(e,i,{isCollection:!s.active})}var o=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:r}}};fn.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(a,s){var c=s.active,l;c||(l=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:l})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!o,action:r}}};fn.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=X(e),i=b(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(o,a){return i?r(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):r(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}};fn.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=X(e),i=this,r=sx(e),o=b(e,"bpmn:BoundaryEvent")?Gg["intermediate-event-non-interrupting"]:Gg["start-event-non-interrupting"],a=!n[r];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:a,action:function(){i._modeling.updateProperties(e,{[r]:!!a})}}}};const EO={__depends__:[hp,Bx,vp],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",fn]};function Ka(e,t,n,i,r,o,a,s,c,l,u,f,p){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=c,this._canvas=l,this._rules=u,this._translate=f,this._eventBus=n,this._appendPreview=p,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(d){var h=d.context,m=h.shape;if(!(!da(d)||!i.isOpen(m))){var v=i.getEntries(m);v.replace&&v.replace.action.click(d,m)}}),n.on("contextPad.close",function(){p.cleanUp()})}Ka.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];Ka.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&O(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(i,r){t.removeElements(r.slice())}}}}),n};Ka.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return ge(t)?Pr(e,n=>t.includes(n)):t};Ka.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,a=this._popupMenu,s=this._autoPlace,c=this._translate,l=this._appendPreview,u={};if(e.type==="label")return this._isDeleteAllowed([e])&&O(u,h()),u;var f=e.businessObject;function p(x,y){r.start(x,y)}function d(x,y){n.removeElements([y])}function h(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:c("Delete"),action:{click:d}}}}function m(x){var y=5,S=t.getPad(x).html,T=S.getBoundingClientRect(),I={x:T.left,y:T.bottom+y};return I}function v(x,y,S,T){function I(N,j){var Y=i.createShape(O({type:x},T));o.start(N,Y,{source:j})}var D=s?function(N,j){var Y=i.createShape(O({type:x},T));s.append(j,Y)}:I,B=s?function(N,j){return l.create(j,x,T),()=>{l.cleanUp()}}:null;return{group:"model",className:y,title:S,action:{dragstart:I,click:D,hover:B}}}function E(x){return function(y,S){n.splitLane(S,x),t.open(S,!0)}}if(be(f,["bpmn:Lane","bpmn:Participant"])&&we(e)){var C=Zi(e);O(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:c("Add lane above"),action:{click:function(x,y){n.addLane(y,"top")}}}}),C.length<2&&((dt(e)?e.height>=120:e.width>=120)&&O(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:c("Divide into two lanes"),action:{click:E(2)}}}),(dt(e)?e.height>=180:e.width>=180)&&O(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:c("Divide into three lanes"),action:{click:E(3)}}})),O(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:c("Add lane below"),action:{click:function(x,y){n.addLane(y,"bottom")}}}})}return b(f,"bpmn:FlowNode")&&(b(f,"bpmn:EventBasedGateway")?O(u,{"append.receive-task":v("bpmn:ReceiveTask","bpmn-icon-receive-task",c("Append receive task")),"append.message-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",c("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",c("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",c("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":v("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",c("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):Kg(f,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?O(u,{"append.compensation-activity":v("bpmn:Task","bpmn-icon-task",c("Append compensation activity"),{isForCompensation:!0})}):!b(f,"bpmn:EndEvent")&&!f.isForCompensation&&!Kg(f,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Pt(f)&&O(u,{"append.end-event":v("bpmn:EndEvent","bpmn-icon-end-event-none",c("Append end event")),"append.gateway":v("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",c("Append gateway")),"append.append-task":v("bpmn:Task","bpmn-icon-task",c("Append task")),"append.intermediate-event":v("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",c("Append intermediate/boundary event"))})),a.isEmpty(e,"bpmn-replace")||O(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:c("Change element"),action:{click:function(x,y){var S=O(m(y),{cursor:{x:x.x,y:x.y}});a.open(y,"bpmn-replace",S,{title:c("Change element"),width:300,search:!0})}}}}),b(f,"bpmn:SequenceFlow")&&O(u,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),be(f,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&O(u,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect to other element"),action:{click:p,dragstart:p}}}),b(f,"bpmn:TextAnnotation")&&O(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using association"),action:{click:p,dragstart:p}}}),be(f,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&O(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using data input association"),action:{click:p,dragstart:p}}}),b(f,"bpmn:Group")&&O(u,{"append.text-annotation":v("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),this._isDeleteAllowed([e])&&O(u,h()),u};function Kg(e,t,n){var i=e.$instanceOf(t),r=!1,o=e.eventDefinitions||[];return A(o,function(a){a.$type===n&&(r=!0)}),i&&r}const wO={__depends__:[oO,r0,rb,qn,Ep,ml,EO],__init__:["contextPadProvider"],contextPadProvider:["type",Ka]};var SO={horizontal:["x","width"],vertical:["y","height"]},Yg=5;function yi(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var i=t.allowed("elements.distribute",{elements:n});return ge(i)?i:i?n:[]})}yi.$inject=["modeling","rules"];yi.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};yi.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i};yi.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(A(t,function(o){r=o(r,n,i)}),r):e};yi.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var o=Gn(e,i);return A(o,function(a,s){var c=n._findRange(a,i,r),l,u=t[t.length-1];u&&n._hasIntersection(u.range,c)?t[t.length-1].elements.push(a):(l={range:c,elements:[a]},t.push(l))}),t};yi.prototype._setOrientation=function(e){var t=SO[e];this._axis=t[0],this._dimension=t[1]};yi.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};yi.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+Yg,max:t+n-Yg}};const CO={__init__:["distributeElements"],distributeElements:["type",yi]};function Ml(e){_n.call(this,e)}Ml.$inject=["eventBus"];ie(Ml,_n);Ml.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=Ee(t,function(n){var i=be(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)}),t=zc(t),t.length<3?!1:t})};var qg={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},RO=900;function Ya(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",RO,this)}Ya.$inject=["popupMenu","distributeElements","translate","rules"];Ya.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&O(t,this._getEntries(e)),t};Ya.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Ya.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu,r={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:qg.horizontal,action:function(o,a){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:qg.vertical,action:function(o,a){t.trigger(e,"vertical"),i.close()}}};return r};const PO={__depends__:[hp,CO],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Ml],distributeElementsMenuProvider:["type",Ya]};var a0="is not a registered action",TO="is already registered";function wn(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}wn.$inject=["eventBus","injector"];wn.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),c=e.get("keyboardMove",!1),l=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&i&&this.register("copy",function(){var u=i.get();if(u.length)return o.copy(u)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(u){r.stepZoom(u.value)}),a&&this.register("zoom",function(u){a.zoom(u.value)}),n&&i&&s&&this.register("removeSelection",function(){var u=i.get();if(u.length){var f=s.allowed("elements.delete",{elements:u}),p;f!==!1&&(ge(f)?p=f:p=u,p.length&&n.removeElements(p.slice()))}}),c&&this.register("moveCanvas",function(u){c.moveCanvas(u)}),l&&this.register("moveSelection",function(u){l.moveSelection(u.direction,u.accelerated)})};wn.prototype.trigger=function(e,t){if(!this._actions[e])throw Rd(e,a0);return this._actions[e](t)};wn.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);A(e,function(i,r){n._registerAction(r,i)})};wn.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw Rd(e,TO);this._actions[e]=t};wn.prototype.unregister=function(e){if(!this.isRegistered(e))throw Rd(e,a0);this._actions[e]=void 0};wn.prototype.getActions=function(){return Object.keys(this._actions)};wn.prototype.isRegistered=function(e){return!!this._actions[e]};function Rd(e,t){return new Error(e+" "+t)}const AO={__init__:["editorActions"],editorActions:["type",wn]};function Dl(e){e.invoke(wn,this)}ie(Dl,wn);Dl.$inject=["injector"];Dl.prototype._registerDefaultActions=function(e){wn.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),c=e.get("distributeElements",!1),l=e.get("alignElements",!1),u=e.get("directEditing",!1),f=e.get("searchPad",!1),p=e.get("modeling",!1),d=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var h=t.getRootElement(),m=n.filter(function(v){return v!==h});return i.select(m),m}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),i&&c&&this._registerAction("distributeElements",function(h){var m=i.get(),v=h.type;m.length&&c.trigger(m,v)}),i&&l&&this._registerAction("alignElements",function(h){var m=i.get(),v=[],E=h.type;m.length&&(v=Ee(m,function(C){return!b(C,"bpmn:Lane")}),l.trigger(v,E))}),i&&p&&this._registerAction("setColor",function(h){var m=i.get();m.length&&p.setColor(m,h)}),i&&u&&this._registerAction("directEditing",function(){var h=i.get();h.length&&u.activate(h[0])}),f&&this._registerAction("find",function(){f.toggle()}),t&&p&&this._registerAction("moveToOrigin",function(){var h=t.getRootElement(),m,v;b(h,"bpmn:Collaboration")?v=n.filter(function(E){return b(E.parent,"bpmn:Collaboration")}):v=n.filter(function(E){return E!==h&&!b(E.parent,"bpmn:SubProcess")}),m=pt(v),p.moveElements(v,{x:-m.x,y:-m.y},h)}),i&&d&&this._registerAction("replaceElement",function(h){d.triggerEntry("replace","click",h)})};const MO={__depends__:[AO],editorActions:["type",Dl]};function s0(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;be(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}s0.$inject=["eventBus"];var qs=10;function fu(e,t,n){return n||(n="round"),Math[n](e/t)*t}var DO=1200,kO=800;function ir(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",kO,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],DO,function(o){var a=o.originalEvent;if(!(!r.active||a&&sn(a))){var s=o.context,c=s.gridSnappingContext;c||(c=s.gridSnappingContext={}),["x","y"].forEach(function(l){var u={},f=IO(o,l,e);f&&(u.offset=f);var p=OO(o,l);p&&O(u,p),oo(o,l)||r.snapEvent(o,l,u)})}})}ir.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);nt(e,t,i)};ir.prototype.getGridSpacing=function(){return qs};ir.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=fu(e,qs);var i,r;return t&&t.min&&(i=t.min,fe(i)&&(i=fu(i+n,qs,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,fe(r)&&(r=fu(r+n,qs,"floor"),e=Math.min(e,r))),e-=n,e};ir.prototype.isActive=function(){return this.active};ir.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};ir.prototype.toggleActive=function(){this.setActive(!this.active)};ir.$inject=["elementRegistry","eventBus","config.gridSnapping"];function OO(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},o=n.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;i&&(Xs(t)?(a.x.min=i.left,a.x.max=i.right):(a.y.min=i.top,a.y.max=i.bottom));var c=r.min,l=r.max;return c&&(Xs(t)?Zg(s)?a.x.max=c.left:a.x.min=c.right:Xg(s)?a.y.max=c.top:a.y.min=c.bottom),l&&(Xs(t)?Zg(s)?a.x.min=l.left:a.x.max=l.right:Xg(s)?a.y.min=l.top:a.y.max=l.bottom),a[t]}function IO(e,t,n){var i=e.context,r=e.shape,o=i.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;return s&&fe(s[t])||(s||(s=o.snapOffset={}),fe(s[t])||(s[t]=0),!r)||(n.get(r.id)||(Xs(t)?s[t]+=r[t]+r.width/2:s[t]+=r[t]+r.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=r.width/2:/right/.test(a)&&(s[t]+=r.width/2):/top/.test(a)?s[t]-=r.height/2:/bottom/.test(a)&&(s[t]+=r.height/2)),s[t]}function Xs(e){return e==="x"}function Xg(e){return e.indexOf("n")!==-1}function Zg(e){return e.indexOf("w")!==-1}function Lr(e,t){G.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,o=r.hints||{},a=o.autoResize;if(a){var s=r.shape,c=r.newBounds;qt(a)?r.newBounds=n.snapComplex(c,a):r.newBounds=n.snapSimple(s,c)}})}Lr.$inject=["eventBus","gridSnapping","modeling"];ie(Lr,G);Lr.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Lr.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Lr.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),r&&(i?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),O(e,o),e};Lr.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),i&&(r?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),O(e,o),e};var NO=2e3;function c0(e,t){e.on(["spaceTool.move","spaceTool.end"],NO,function(n){var i=n.context;if(i.initialized){var r=i.axis,o;r==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}c0.$inject=["eventBus","gridSnapping"];const LO={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Lr],gridSnappingSpaceToolBehavior:["type",c0]},BO={__depends__:[LO],__init__:["gridSnapping"],gridSnapping:["type",ir]};var $O=2e3;function l0(e,t,n){e.on("autoPlace",$O,function(i){var r=i.source,o=pe(r),a=i.shape,s=Pb(r,a,n);return["x","y"].forEach(function(c){var l={};s[c]!==o[c]&&(s[c]>o[c]?l.min=s[c]:l.max=s[c],b(a,"bpmn:TextAnnotation")&&(jO(c)?l.offset=-a.width/2:l.offset=-a.height/2),s[c]=t.snapValue(s[c],l))}),s})}l0.$inject=["eventBus","gridSnapping","elementRegistry"];function jO(e){return e==="x"}var FO=1750;function u0(e,t,n){t.on(["create.start","shape.move.start"],FO,function(i){var r=i.context,o=r.shape,a=e.getRootElement();if(!(!b(o,"bpmn:Participant")||!b(a,"bpmn:Process")||!a.children.length)){var s=r.createConstraints;s&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}u0.$inject=["canvas","eventBus","gridSnapping"];var HO=3e3;function kl(e,t,n){G.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],HO,function(r){var o=r.context,a=o.connection,s=o.hints||{},c=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||zO(c)&&n.updateWaypoints(a,i.snapMiddleSegments(c))})}kl.$inject=["eventBus","gridSnapping","modeling"];ie(kl,G);kl.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=UO(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function zO(e){return e.length>3}function VO(e){return e==="h"}function WO(e){return e==="v"}function UO(e,t,n){var i=ri(t,n),r={};return VO(i)&&(r.y=e.snapValue(t.y)),WO(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=O({},t,r),n=O({},n,r)),[t,n]}const GO={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",l0],gridSnappingParticipantBehavior:["type",u0],gridSnappingLayoutConnectionBehavior:["type",kl]},KO={__depends__:[BO,GO],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",s0]};var YO=30,f0=30;function qa(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,o=i.gfx;if(b(r,"bpmn:Lane"))return n._createParticipantHit(r,o);if(b(r,"bpmn:Participant"))return we(r)?n._createParticipantHit(r,o):n._createDefaultHit(r,o);if(b(r,"bpmn:SubProcess"))return we(r)?n._createSubProcessHit(r,o):n._createDefaultHit(r,o)})}qa.$inject=["eventBus","interactionEvents"];qa.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};qa.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=dt(e)?{width:YO,height:e.height}:{width:e.width,height:f0};return this._interactionEvents.createBoxHit(t,"all",n),!0};qa.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:f0}),!0};const qO={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",qa]};function Ol(e){e.invoke(vo,this)}ie(Ol,vo);Ol.$inject=["injector"];Ol.prototype.registerBindings=function(e,t){vo.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0}),n("replaceElement",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["r","R"],r))return t.trigger("replaceElement",r),!0})};const XO={__depends__:[sp],__init__:["keyboardBindings"],keyboardBindings:["type",Ol]};var ZO={moveSpeed:1,moveSpeedAccelerated:10},JO=1500,Jg="left",Qg="up",ev="right",tv="down",QO={ArrowLeft:Jg,Left:Jg,ArrowUp:Qg,Up:Qg,ArrowRight:ev,Right:ev,ArrowDown:tv,Down:tv},eI={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function p0(e,t,n,i,r){var o=this;this._config=O({},ZO,e||{}),t.addListener(JO,function(a){var s=a.keyEvent,c=QO[s.key];if(c&&!t.isCmd(s)){var l=t.isShift(s);return o.moveSelection(c,l),!0}}),this.moveSelection=function(a,s){var c=r.get();if(c.length){var l=this._config[s?"moveSpeedAccelerated":"moveSpeed"],u=eI[a](l),f=i.allowed("elements.move",{shapes:c});f&&n.moveElements(c,u)}}}p0.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const tI={__depends__:[sp,qn],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",p0]};var nv=10;function Xa(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function o(c,l){var u=c.shape,f=c.direction,p=c.resizeConstraints,d;c.delta=l,d=FM(u,f,l),c.newBounds=zM(d,p),c.canExecute=r.canResize(c)}function a(c){var l=c.resizeConstraints,u=c.minBounds;l===void 0&&(u===void 0&&(u=r.computeMinResizeBox(c)),c.resizeConstraints={min:le(u)})}function s(c){var l=c.shape,u=c.canExecute,f=c.newBounds;if(u){if(f=e_(f),!nI(l,f))return;n.resizeShape(l,f)}}e.on("resize.start",function(c){a(c.context)}),e.on("resize.move",function(c){var l={x:c.dx,y:c.dy};o(c.context,l)}),e.on("resize.end",function(c){s(c.context)})}Xa.prototype.canResize=function(e){var t=this._rules,n=An(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};Xa.prototype.activate=function(e,t,n){var i=this._dragging,r,o;if(typeof n=="string"&&(n={direction:n}),r=O({shape:t},n),o=r.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,d0(t,o),"resize",{autoActivate:!0,cursor:iI(o),data:{shape:t,context:r}})};Xa.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:nv,height:nv},r=Zb(t,e.childrenBoxPadding),VM(n,t,i,r)};Xa.$inject=["eventBus","rules","modeling","dragging"];function nI(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function d0(e,t){var n=pe(e),i=le(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function iI(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var iv="djs-resizing",rv="resize-not-ok",rI=500;function h0(e,t,n){function i(o){var a=o.shape,s=o.newBounds,c=o.frame;c||(c=o.frame=n.addFrame(a,t.getActiveLayer()),t.addMarker(a,iv)),s.width>5&&te(c,{x:s.x,width:s.width}),s.height>5&&te(c,{y:s.y,height:s.height}),o.canExecute?Te(c).remove(rv):Te(c).add(rv)}function r(o){var a=o.shape,s=o.frame;s&&ct(o.frame),t.removeMarker(a,iv)}e.on("resize.move",rI,function(o){i(o.context)}),e.on("resize.cleanup",function(o){r(o.context)})}h0.$inject=["eventBus","canvas","previewSupport"];var As=-6,Ms=8,Ds=20,Fo="djs-resizer",oI=["n","w","s","e","nw","ne","se","sw"];function rr(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(o){var a=o.newSelection;r.removeResizers(),a.length===1&&A(a,Wt(r.addResizer,r))}),e.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(r.removeResizers(),r.addResizer(a))})}rr.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(o){Ui(o)&&i.activate(o,e,n)}me.bind(t,"mousedown",r),me.bind(t,"touchstart",r)};rr.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),o=aI(i),a=ae("g");Te(a).add(Fo),Te(a).add(Fo+"-"+e.id),Te(a).add(Fo+"-"+i),de(r,a);var s=ae("rect");te(s,{x:-Ms/2+o.x,y:-Ms/2+o.y,width:Ms,height:Ms}),Te(s).add(Fo+"-visual"),de(a,s);var c=ae("rect");return te(c,{x:-Ds/2+o.x,y:-Ds/2+o.y,width:Ds,height:Ds}),Te(c).add(Fo+"-hit"),de(a,c),Ls(a,t,n),a};rr.prototype.createResizer=function(e,t){var n=d0(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)};rr.prototype.addResizer=function(e){var t=this;$e(e)||!this._resize.canResize({shape:e})||A(oI,function(n){t.createResizer(e,n)})};rr.prototype.removeResizers=function(){var e=this._getResizersParent();Nc(e)};rr.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};rr.$inject=["eventBus","canvas","selection","resize"];function aI(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-As:e.indexOf("w")!==-1&&(t.x=As),e.indexOf("s")!==-1?t.y=-As:e.indexOf("n")!==-1&&(t.y=As),t}const m0={__depends__:[Zn,mi,Eo],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Xa],resizePreview:["type",h0],resizeHandles:["type",rr]};var sI=2e3;function Za(e,t,n,i,r,o,a){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=a,i.registerProvider(this),e.on("element.dblclick",function(c){s(c.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],sI,function(c){i.isActive(c.element)&&i.cancel()}),e.on(["commandStack.changed"],function(c){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(c){o.removeResizers()}),e.on("create.end",500,function(c){var l=c.context,u=l.shape,f=c.context.canExecute,p=c.isTouch;p||f&&(l.hints&&l.hints.createElementsBehavior===!1||s(u))}),e.on("autoPlace.end",500,function(c){s(c.shape)});function s(c,l){(l||be(c,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||Pd(c))&&i.activate(c)}}Za.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];Za.prototype.activate=function(e){var t=an(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);O(n,i);var r={},o=n.style||{};return O(o,{backgroundColor:null,border:null}),(be(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Pd(e))&&O(r,{centerVertically:!0}),wr(e)&&(O(r,{autoResize:!0}),O(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),b(e,"bpmn:TextAnnotation")&&(O(r,{resizable:!0,autoResize:!0}),O(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),O(n,{options:r,style:o}),n}};Za.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},o={x:i.x,y:i.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),c=this._textRenderer.getExternalStyle(),l=c.fontSize*a,u=c.lineHeight,f=s.fontSize*a,p=s.lineHeight,d={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(b(e,"bpmn:Lane")||uI(e)){var h=dt(e),m=h?{width:i.height,height:30*a,x:i.x-i.height/2+15*a,y:r.y-30*a/2}:{width:i.width,height:30*a};O(o,m),O(d,{fontSize:f+"px",lineHeight:p,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:h?"rotate(-90deg)":null})}if(lI(e)){var v=dt(e),E=v?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:r.x-i.height/2,y:r.y-i.width/2};O(o,E),O(d,{fontSize:f+"px",lineHeight:p,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:v?null:"rotate(-90deg)"})}(be(e,["bpmn:Task","bpmn:CallActivity"])||Pd(e))&&(O(o,{width:i.width,height:i.height}),O(d,{fontSize:f+"px",lineHeight:p,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"})),cI(e)&&(O(o,{width:i.width,x:i.x}),O(d,{fontSize:f+"px",lineHeight:p,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var C=90*a,x=7*a,y=4*a;if(n.labelTarget&&(O(o,{width:C,height:i.height+x+y,x:r.x-C/2,y:i.y-x}),O(d,{fontSize:l+"px",lineHeight:u,paddingTop:x+"px",paddingBottom:y+"px"})),wr(n)&&!Ic(n)&&!Me(n)){var S=Ff(e),T=t.getAbsoluteBBox({x:S.x,y:S.y,width:0,height:0}),I=l+x+y;O(o,{width:C,height:I,x:T.x-C/2,y:T.y-I/2}),O(d,{fontSize:l+"px",lineHeight:u,paddingTop:x+"px",paddingBottom:y+"px"})}return b(e,"bpmn:TextAnnotation")&&(O(o,{width:i.width,height:i.height,minWidth:30*a,minHeight:10*a}),O(d,{textAlign:"left",paddingTop:5*a+"px",paddingBottom:7*a+"px",paddingLeft:7*a+"px",paddingRight:5*a+"px",fontSize:f+"px",lineHeight:p})),{bounds:o,style:d}};Za.prototype.update=function(e,t,n,i){var r,o;b(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),fI(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function Pd(e){return b(e,"bpmn:SubProcess")&&!we(e)}function cI(e){return b(e,"bpmn:SubProcess")&&we(e)}function lI(e){return b(e,"bpmn:Participant")&&!we(e)}function uI(e){return b(e,"bpmn:Participant")&&we(e)}function fI(e){return!e||!e.trim()}var ov="djs-element-hidden",av="djs-label-hidden";function g0(e,t,n){var i=this,r=t.getDefaultLayer(),o,a,s;e.on("directEditing.activate",function(c){var l=c.active;if(o=l.element.label||l.element,b(o,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(o),s=ae("g");var u=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),f=i.path=ae("path");te(f,{d:u,strokeWidth:2,stroke:pI(o)}),de(s,f),de(r,s),yt(s,o.x,o.y)}b(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,ov):(b(o,"bpmn:Task")||b(o,"bpmn:CallActivity")||b(o,"bpmn:SubProcess")||b(o,"bpmn:Participant")||b(o,"bpmn:Lane"))&&t.addMarker(o,av)}),e.on("directEditing.resize",function(c){if(b(o,"bpmn:TextAnnotation")){var l=c.height,u=c.dy,f=Math.max(o.height/a.height*(l+u),0),p=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:f,position:{mx:0,my:0}});te(i.path,{d:p})}}),e.on(["directEditing.complete","directEditing.cancel"],function(c){var l=c.active;l&&(t.removeMarker(l.element.label||l.element,ov),t.removeMarker(o,av)),o=void 0,a=void 0,s&&(ct(s),s=void 0)})}g0.$inject=["eventBus","canvas","pathMap"];function pI(e,t){var n=Ae(e);return n.get("stroke")||t||"black"}const dI={__depends__:[Uf,m0,r0],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Za],labelEditingPreview:["type",g0]};var hI=new Ca("tt");function mI(e){var t=He('<div class="djs-tooltip-container" />');return Ct(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function gI(e,t,n){Ct(e,{left:t+"px",top:n+"px"})}function Td(e,t){e.style.display=t===!1?"none":""}var v0="djs-tooltip",pu="."+v0;function Ut(e,t){this._eventBus=e,this._canvas=t,this._ids=hI,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=mI(t.getContainer());var n=this;Yt.bind(this._tooltipRoot,pu,"mousedown",function(i){i.stopPropagation()}),Yt.bind(this._tooltipRoot,pu,"mouseover",function(i){n.trigger("mouseover",i)}),Yt.bind(this._tooltipRoot,pu,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}Ut.$inject=["eventBus","canvas"];Ut.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=O({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};Ut.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(kt(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};Ut.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};Ut.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};Ut.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};Ut.prototype.remove=function(e){var t=this.get(e);t&&(Kn(t.html),Kn(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};Ut.prototype.show=function(){Td(this._tooltipRoot)};Ut.prototype.hide=function(){Td(this._tooltipRoot,!1)};Ut.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i};Ut.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),qt(n)&&(n=He(n)),i=He('<div data-tooltip-id="'+t+'" class="'+v0+'">'),Ct(i,{position:"absolute"}),i.appendChild(n),e.type&&Ze(i).add("djs-tooltip-"+e.type),e.className&&Ze(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)};Ut.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;gI(n,t.x,t.y)};Ut.prototype._updateTooltipVisibilty=function(e){A(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),Td(i,r))})};Ut.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const vI={__init__:["tooltips"],tooltips:["type",Ut]};var yI="flow elements must be children of pools/participants";function y0(e,t,n){function i(r,o,a){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var o=r.context,a=o.shape,s=o.target;b(s,"bpmn:Collaboration")&&b(a,"bpmn:FlowNode")&&i(r,n(yI))})}y0.$inject=["eventBus","tooltips","translate"];const _I={__depends__:[vI],__init__:["modelingFeedback"],modelingFeedback:["type",y0]};var bI=500,xI=1250,EI=1500,xc=Math.round;function wI(e){return{x:e.x+xc(e.width/2),y:e.y+xc(e.height/2)}}function _0(e,t,n,i,r){function o(s,c,l,u){return r.allowed("elements.move",{shapes:s,delta:c,position:l,target:u})}e.on("shape.move.start",EI,function(s){var c=s.context,l=s.shape,u=i.get().slice();u.indexOf(l)===-1&&(u=[l]),u=SI(u),O(c,{shapes:u,validatedShapes:u,shape:l})}),e.on("shape.move.start",xI,function(s){var c=s.context,l=c.validatedShapes,u;if(u=c.canExecute=o(l),!u)return!1}),e.on("shape.move.move",bI,function(s){var c=s.context,l=c.validatedShapes,u=s.hover,f={x:s.dx,y:s.dy},p={x:s.x,y:s.y},d;if(d=o(l,f,p,u),c.delta=f,c.canExecute=d,d===null){c.target=null;return}c.target=u}),e.on("shape.move.end",function(s){var c=s.context,l=c.delta,u=c.canExecute,f=u==="attach",p=c.shapes;if(u===!1)return!1;l.x=xc(l.x),l.y=xc(l.y),!(l.x===0&&l.y===0)&&n.moveElements(p,l,c.target,{primaryShape:c.shape,attach:f})}),e.on("element.mousedown",function(s){if(Ui(s)){var c=po(s);if(!c)throw new Error("must supply DOM mousedown event");return a(c,s.element)}});function a(s,c,l,u){if(gt(l)&&(u=l,l=!1),!(c.waypoints||!c.parent)&&!Te(s.target).has("djs-hit-no-move")){var f=wI(c);return t.init(s,f,"shape.move",{cursor:"grabbing",autoActivate:l,data:{shape:c,context:u||{}}}),!0}}this.start=a}_0.$inject=["eventBus","dragging","modeling","selection","rules"];function SI(e){var t=uo(e,"id");return Ee(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var sv=499,du="djs-dragging",cv="drop-ok",lv="drop-not-ok",uv="new-parent",fv="attach-ok";function b0(e,t,n,i){function r(c){var l=o(c),u=CI(l);return u}function o(c){var l=Sa(c,!0),u=l.flatMap(d=>(d.incoming||[]).concat(d.outgoing||[])),f=l.concat(u),p=[...new Set(f)];return p}function a(c,l){[fv,cv,lv,uv].forEach(function(u){u===l?t.addMarker(c,u):t.removeMarker(c,u)})}function s(c,l,u){i.addDragger(l,c.dragGroup),u&&t.addMarker(l,du),c.allDraggedElements?c.allDraggedElements.push(l):c.allDraggedElements=[l]}e.on("shape.move.start",sv,function(c){var l=c.context,u=l.shapes,f=l.allDraggedElements,p=r(u);if(!l.dragGroup){var d=ae("g");te(d,n.cls("djs-drag-group",["no-events"]));var h=t.getActiveLayer();de(h,d),l.dragGroup=d}p.forEach(function(m){i.addDragger(m,l.dragGroup)}),f?f=Bf([f,o(u)]):f=o(u),A(f,function(m){t.addMarker(m,du)}),l.allDraggedElements=f,l.differentParents=RI(u)}),e.on("shape.move.move",sv,function(c){var l=c.context,u=l.dragGroup,f=l.target,p=l.shape.parent,d=l.canExecute;f&&(d==="attach"?a(f,fv):l.canExecute&&p&&f.id!==p.id?a(f,uv):a(f,l.canExecute?cv:lv)),yt(u,c.dx,c.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(c){var l=c.context,u=l.target;u&&a(u,null)}),e.on("shape.move.cleanup",function(c){var l=c.context,u=l.allDraggedElements,f=l.dragGroup;A(u,function(p){t.removeMarker(p,du)}),f&&ct(f)}),this.makeDraggable=s}b0.$inject=["eventBus","canvas","styles","previewSupport"];function CI(e){var t=Ee(e,function(n){return $e(n)?De(e,Pn({id:n.source.id}))&&De(e,Pn({id:n.target.id})):!0});return t}function RI(e){return N1(uo(e,function(t){return t.parent&&t.parent.id}))!==1}const PI={__depends__:[Gc,qn,Kf,Zn,mi,Eo],__init__:["move","movePreview"],move:["type",_0],movePreview:["type",b0]};var x0=".djs-palette-toggle",E0=".entry",TI=x0+", "+E0,ff="djs-palette-",AI="shown",pf="open",pv="two-column",MI=1e3;function rt(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}rt.$inject=["eventBus","canvas"];rt.prototype.registerProvider=function(e,t){t||(t=e,e=MI),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};rt.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(kI,{})};rt.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};rt.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=He(rt.HTML_MARKUP);n.appendChild(i),Ze(n).add(ff+AI),Yt.bind(i,TI,"click",function(r){var o=r.delegateTarget;if($c(o,x0))return e.toggle();e.trigger("click",r)}),me.bind(i,"mousedown",function(r){r.stopPropagation()}),Yt.bind(i,E0,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};rt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};rt.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,o=Ze(n),a=Ze(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(pv,r),a.toggle(ff+pv,r),"open"in e&&(o.toggle(pf,e.open),a.toggle(ff+pf,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};rt.prototype._update=function(){var e=Ie(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Bc(e),A(t,function(n,i){var r=n.group||"default",o=Ie("[data-group="+pa(r)+"]",e);o||(o=He('<div class="group"></div>'),kt(o,"data-group",r),e.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=He(a);if(o.appendChild(s),!n.separator&&(kt(s,"data-action",i),n.title&&kt(s,"title",n.title),n.className&&DI(s,n.className),n.imageUrl)){var c=He("<img>");kt(c,"src",n.imageUrl),s.appendChild(c)}}),this.open()};rt.prototype.trigger=function(e,t,n){var i,r,o=t.delegateTarget||t.target;return o?(i=kt(o,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()};rt.prototype.triggerEntry=function(e,t,n,i){var r=this._entries,o,a;if(o=r[e],!!o&&(a=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(lt(a)){if(t==="click")return a(n,i)}else if(a[t])return a[t](n,i);n.preventDefault()}};rt.prototype._layoutChanged=function(){this._toggleState({})};rt.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};rt.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};rt.prototype.open=function(){this._toggleState({open:!0})};rt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};rt.prototype.isActiveTool=function(e){return e&&this._activeTool===e};rt.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Ie(".djs-palette-entries",this._container),this._toolsContainer=Ie("[data-group=tools]",t)),n=this._toolsContainer,A(n.children,function(i){var r=i.getAttribute("data-action");if(r){var o=Ze(i);r=r.replace("-tool",""),o.contains("entry")&&r===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};rt.prototype.isOpen=function(){return Ze(this._container).has(pf)};rt.prototype._getParentContainer=function(){return this._canvas.getContainer()};rt.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function DI(e,t){var n=Ze(e),i=ge(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function kI(e,t){var n=t.getPaletteEntries();return lt(n)?n(e):(A(n,function(i,r){e[r]=i}),e)}const OI={__init__:["palette"],palette:["type",rt]};var w0="crosshair";function Br(e,t,n,i,r,o,a){this._selection=r,this._dragging=n,this._mouse=a;var s=this,c={create:function(l){var u=t.getActiveLayer(),f;f=l.frame=ae("rect"),te(f,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),de(u,f)},update:function(l){var u=l.frame,f=l.bbox;te(u,{x:f.x,y:f.y,width:f.width,height:f.height})},remove:function(l){l.frame&&ct(l.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(l){var u=l.originalEvent.target;!l.hover&&!(u instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(l.originalEvent,!0)})}),e.on("lasso.end",0,function(l){var u=l.context,f=hu(l),p=i.filter(function(h){return h}),d=uc(l);s.select(p,f,d?u.selection:[])}),e.on("lasso.start",function(l){var u=l.context;u.bbox=hu(l),c.create(u),u.selection=r.get()}),e.on("lasso.move",function(l){var u=l.context;u.bbox=hu(l),c.update(u)}),e.on("lasso.cleanup",function(l){var u=l.context;c.remove(u)}),e.on("element.mousedown",1500,function(l){if(uc(l))return s.activateLasso(l.originalEvent),!0})}Br.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];Br.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:w0,data:{context:{}}})};Br.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:w0,data:{context:{}},keepSelection:!0})};Br.prototype.select=function(e,t,n=[]){var i=OC(e,t);this._selection.select([...n,...$f(i)])};Br.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Br.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function hu(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const II={__depends__:[gl,Na],__init__:["lassoTool"],lassoTool:["type",Br]};var mu=1500,S0="grab";function wo(e,t,n,i,r,o){this._dragging=n,this._mouse=o;var a=this,s=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",mu,function(c){if(da(c))return a.activateMove(c.originalEvent,!0),!1}),s&&s.addListener(mu,function(c){if(!(!dv(c.keyEvent)||a.isActive())){var l=a._mouse.getLastMoveEvent();a.activateMove(l,!!l)}},"keyboard.keydown"),s&&s.addListener(mu,function(c){!dv(c.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(c){var l=c.originalEvent.target;if(!c.hover&&!(l instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(c.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(c){var l=t.viewbox().scale;t.scroll({dx:c.dx*l,dy:c.dy*l})}),e.on("hand.move.end",function(c){var l=c.context,u=l.reactivate;return!da(c)&&u&&e.once("hand.move.ended",function(f){a.activateHand(f.originalEvent,!0,!0)}),!1})}wo.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];wo.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:S0,data:{context:n||{}}})};wo.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:S0,data:{context:{reactivate:n}}})};wo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};wo.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function dv(e){return ft("Space",e)}const NI={__depends__:[gl,Na],__init__:["handTool"],handTool:["type",wo]};var hv="connect-ok",mv="connect-not-ok";function So(e,t,n,i,r,o,a){var s=this;this._dragging=t,this._rules=o,this._mouse=a,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(c){var l=c.context,u=c.hover,f=l.canStartConnect=s.canStartConnect(u);f!==null&&(l.startTarget=u,i.addMarker(u,f?hv:mv))}),e.on(["global-connect.out","global-connect.cleanup"],function(c){var l=c.context.startTarget,u=c.context.canStartConnect;l&&i.removeMarker(l,u?hv:mv)}),e.on(["global-connect.ended"],function(c){var l=c.context,u=l.startTarget,f={x:c.x,y:c.y},p=s.canStartConnect(u);if(p)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,u,f)}),!1})}So.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];So.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};So.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};So.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};So.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const LI={__depends__:[Ep,Zn,mi,gl,Na],globalConnect:["type",So]};function Ad(e,t,n,i,r,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}Ad.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Ad.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,r=this._lassoTool,o=this._handTool,a=this._globalConnect,s=this._translate;function c(f,p,d,h,m){function v(E){var C=n.createShape(O({type:f},m));t.start(E,C)}return{group:p,className:d,title:h,action:{dragstart:v,click:v}}}function l(f){var p=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),d=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:p});t.start(f,[p,d],{hints:{autoSelect:[p]}})}function u(f){t.start(f,n.createParticipantShape())}return O(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate hand tool"),action:{click:function(f){o.activateHand(f)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate lasso tool"),action:{click:function(f){r.activateSelection(f)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate create/remove space tool"),action:{click:function(f){i.activateSelection(f)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate global connect tool"),action:{click:function(f){a.start(f)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":c("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create start event")),"create.intermediate-event":c("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create intermediate/boundary event")),"create.end-event":c("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create end event")),"create.exclusive-gateway":c("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create gateway")),"create.task":c("bpmn:Task","activity","bpmn-icon-task",s("Create task")),"create.data-object":c("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create data object reference")),"create.data-store":c("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded sub-process"),action:{dragstart:l,click:l}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create pool/participant"),action:{dragstart:u,click:u}},"create.group":c("bpmn:Group","artifact","bpmn-icon-group",s("Create group"))}),e};const BI={__depends__:[OI,ml,Fx,II,NI,LI,Fc],__init__:["paletteProvider"],paletteProvider:["type",Ad]};var $I=250;function Md(e,t,n,i,r){G.call(this,e);function o(s){var c=s.canExecute.replacements;A(c,function(l){var u=l.oldElementId,f={type:l.newElementType};if(!s.visualReplacements[u]){var p=t.get(u);O(f,{x:p.x,y:p.y});var d=n.createShape(f);i.addShape(d,p.parent);var h=Ie('[data-element-id="'+pa(p.id)+'"]',s.dragGroup);h&&te(h,{display:"none"});var m=r.addDragger(d,s.dragGroup);s.visualReplacements[u]=m,i.removeShape(d)}})}function a(s){var c=s.visualReplacements;A(c,function(l,u){var f=Ie('[data-element-id="'+pa(u)+'"]',s.dragGroup);f&&te(f,{display:"inline"}),l.remove(),c[u]&&delete c[u]})}e.on("shape.move.move",$I,function(s){var c=s.context,l=c.canExecute;c.visualReplacements||(c.visualReplacements={}),l&&l.replacements?o(c):a(c)})}Md.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];ie(Md,G);const jI={__depends__:[Eo],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Md]};var FI=1250,gu=40,HI=20,zI=10,gv=20,C0=["x","y"],VI=Math.abs;function R0(e){e.on(["connect.hover","connect.move","connect.end"],FI,function(t){var n=t.context,i=n.canExecute,r=n.start,o=n.hover,a=n.source,s=n.target;t.originalEvent&&sn(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&WI(t,o,YI(o)),o&&KI(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=mn(r),be(o,["bpmn:Event","bpmn:Gateway"])&&vv(t,mn(o)),be(o,["bpmn:Task","bpmn:SubProcess"])&&UI(t,o),b(a,"bpmn:BoundaryEvent")&&s===a.host&&GI(t)):P0(i,"bpmn:MessageFlow")?(b(r,"bpmn:Event")&&(n.connectionStart=mn(r)),b(o,"bpmn:Event")&&vv(t,mn(o))):n.connectionStart=n.initialConnectionStart)})}R0.$inject=["eventBus"];function WI(e,t,n){C0.forEach(function(i){var r=T0(i,t);e[i]<t[i]+n?nt(e,i,t[i]+n):e[i]>t[i]+r-n&&nt(e,i,t[i]+r-n)})}function UI(e,t){var n=mn(t);C0.forEach(function(i){qI(e,t,i)&&nt(e,i,n[i])})}function GI(e){var t=e.context,n=t.source,i=t.target;if(!XI(t)){var r=mn(n),o=Tt(r,i,-10),a=[];/top|bottom/.test(o)&&a.push("x"),/left|right/.test(o)&&a.push("y"),a.forEach(function(s){var c=e[s],l;VI(c-r[s])<gu&&(c>r[s]?l=r[s]+gu:l=r[s]-gu,nt(e,s,l))})}}function vv(e,t){nt(e,"x",t.x),nt(e,"y",t.y)}function P0(e,t){return e&&e.type===t}function KI(e,t){return zi(t,function(n){return P0(e,n)})}function T0(e,t){return e==="x"?t.width:t.height}function YI(e){return b(e,"bpmn:Task")?zI:HI}function qI(e,t,n){return e[n]>t[n]+gv&&e[n]<t[n]+T0(n,t)-gv}function XI(e){var t=e.hover,n=e.source;return t&&n&&t===n}function or(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}or.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};or.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};or.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};or.prototype.getSnapLocations=function(){return this._snapLocations};or.prototype.setSnapLocations=function(e){this._snapLocations=e};or.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Il,n.initDefaults(this._defaultSnaps)),n};function Il(){this._snapValues={}}Il.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Il.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&fM(e[n],r[n],i)};Il.prototype.initDefaults=function(e){var t=this;A(e||{},function(n,i){A(n,function(r){t.add(i,r)})})};var ZI=1250;function Jn(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],ZI,function(r){var o=r.context,a=o.shape,s=o.snapContext,c=o.target;if(!(r.originalEvent&&sn(r.originalEvent))&&!(oo(r)||!c)){var l=s.pointsForTarget(c);l.initialized||(l=i.addSnapTargetPoints(l,a,c),l.initialized=!0),n.snap(r,l)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}Jn.$inject=["elementRegistry","eventBus","snapping"];Jn.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new or);var o;t.get(i.id)?o=mn(i,e):o={x:e.x+mn(i).x,y:e.y+mn(i).y};var a={x:o.x-i.width/2,y:o.y-i.height/2},s={x:o.x+i.width/2,y:o.y+i.height/2};return r.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),Me(i)||(r.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),r.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),r};Jn.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return A(i,function(r){if(Me(r)){Me(t)&&e.add("mid",mn(r));return}if($e(r)){if(r.waypoints.length<3)return;var o=r.waypoints.slice(1,-1);A(o,function(a){e.add("mid",a)});return}e.add("mid",mn(r))}),!fe(t.x)||!fe(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",mn(t)),e};Jn.prototype.getSnapTargets=function(e,t){return Vb(t).filter(function(n){return!JI(n)})};function JI(e){return!!e.hidden}var yv=1500;function Co(e,t){t.invoke(Jn,this),e.on(["create.move","create.end"],yv,nN),e.on(["create.move","create.end","shape.move.move","shape.move.end"],yv,function(n){var i=n.context,r=i.canExecute,o=i.target,a=r&&(r==="attach"||r.attach);a&&!oo(n)&&QI(n,o)})}ie(Co,Jn);Co.$inject=["eventBus","injector"];Co.prototype.initSnap=function(e){var t=Jn.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return A(n.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,t.setSnapOrigin(r.id+"-docking",bv(o,i,e))}),A(n.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,t.setSnapOrigin(r.id+"-docking",bv(o,i,e))}),b(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};Co.prototype.addSnapTargetPoints=function(e,t,n){Jn.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);A(i,function(o){(tN(o)||eN([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",Hb(o)),e.add("bottom-right",zb(o)))});var r=this._elementRegistry;return A(t.incoming,function(o){if(r.get(t.id)){_v(i,o.source)||e.add("mid",pe(o.source));var a=o.waypoints[0];e.add(o.id+"-docking",a.original||a)}}),A(t.outgoing,function(o){if(r.get(t.id)){_v(i,o.target)||e.add("mid",pe(o.target));var a=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",a.original||a)}}),b(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};Co.prototype.getSnapTargets=function(e,t){return Jn.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!b(n,"bpmn:Lane")})};function QI(e,t){var n=le(t),i=mx(e,t),r=e.context,o=r.shape,a;o.parent?a={x:0,y:0}:a=pe(o),/top/.test(i)?nt(e,"y",n.top-a.y):/bottom/.test(i)&&nt(e,"y",n.bottom-a.y),/left/.test(i)?nt(e,"x",n.left-a.x):/right/.test(i)&&nt(e,"x",n.right-a.x)}function eN(e,t){return e.every(function(n){return b(n,t)})}function tN(e){return b(e,"bpmn:SubProcess")&&we(e)?!0:b(e,"bpmn:Participant")}function nN(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,r=n.right,o=n.bottom,a=n.left;(a&&a>=e.x||r&&r<=e.x)&&nt(e,"x",e.x),(i&&i>=e.y||o&&o<=e.y)&&nt(e,"y",e.y)}}function _v(e,t){return e.indexOf(t)!==-1}function bv(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var iN=1250;function Ja(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],iN,function(i){var r=i.context,o=r.shape,a=o.parent,s=r.direction,c=r.snapContext;if(!(i.originalEvent&&sn(i.originalEvent))&&!oo(i)){var l=c.pointsForTarget(a);l.initialized||(l=n.addSnapTargetPoints(l,o,a,s),l.initialized=!0),aN(s)&&nt(i,"x",i.x),sN(s)&&nt(i,"y",i.y),t.snap(i,l)}}),e.on(["resize.cleanup"],function(){t.hide()})}Ja.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new or);var o=A0(n,i);return r.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),r};Ja.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return A(r,function(o){e.add("corner",zb(o)),e.add("corner",Hb(o))}),e.add("corner",A0(t,i)),e};Ja.$inject=["eventBus","snapping"];Ja.prototype.getSnapTargets=function(e,t){return Vb(t).filter(function(n){return!rN(n,e)&&!$e(n)&&!oN(n)&&!Me(n)})};function A0(e,t){var n=pe(e),i=le(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function rN(e,t){return e.host===t}function oN(e){return!!e.hidden}function aN(e){return e==="n"||e==="s"}function sN(e){return e==="e"||e==="w"}var cN=7,lN=1e3;function ar(e){this._canvas=e,this._asyncHide=$y(Wt(this.hide,this),lN)}ar.$inject=["canvas"];ar.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),o={x:oo(e,"x"),y:oo(e,"y")};A(r,function(a){var s=i.getSnapOrigin(a),c={x:e.x+s.x,y:e.y+s.y};if(A(["x","y"],function(l){var u;o[l]||(u=t.snap(c,a,l,cN),u!==void 0&&(o[l]={value:u,originValue:u-s[l]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),A(["x","y"],function(a){var s=o[a];gt(s)&&nt(e,a,s.originValue)})};ar.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=ae("path");return te(n,{d:"M0,0 L0,0"}),Te(n).add("djs-snap-line"),de(t,n),{update:function(i){fe(i)?e==="horizontal"?te(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):te(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):te(n,{display:"none"})}}};ar.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};ar.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};ar.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};ar.prototype.hide=function(){A(this._snapLines,function(e){e.update()})};const uN={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Jn],resizeSnapping:["type",Ja],snapping:["type",ar]},fN={__depends__:[uN],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",R0],createMoveSnapping:["type",Co]};var M0=300;function he(e,t,n,i){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=i,this._container=this._getBoxHtml(),this._searchInput=Ie(he.INPUT_SELECTOR,this._container),this._resultsContainer=Ie(he.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}he.$inject=["canvas","eventBus","selection","translate"];he.prototype._bindEvents=function(){var e=this;function t(n,i,r,o){e._eventMaps.push({el:n,type:r,listener:Yt.bind(n,i,r,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,he.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,he.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,he.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,he.INPUT_SELECTOR,"keydown",function(n){ft("ArrowUp",n)&&n.preventDefault(),ft("ArrowDown",n)&&n.preventDefault()}),t(this._container,he.INPUT_SELECTOR,"keyup",function(n){if(ft("Escape",n))return e.close();if(ft("Enter",n)){var i=e._getCurrentResult();return i?e._select(i):e.close(!1)}if(ft("ArrowUp",n))return e._scrollToDirection(!0);if(ft("ArrowDown",n))return e._scrollToDirection();ft(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};he.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){Yt.unbind(e.el,e.type,e.listener)})};he.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n=n.filter(function(r){return!t._canvas.getRootElements().includes(r.element)}),!n.length){this._clearMarkers(),this._selection.select(null);return}n.forEach(function(r){var o=r.element.id,a=t._createResultNode(r,o);t._results[o]={element:r.element,node:a}});var i=Ie(he.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}};he.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};he.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}};he.prototype._clearResults=function(){Bc(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};he.prototype._clearMarkers=function(){for(var e in this._results)this._canvas.removeMarker(this._results[e].element,"djs-search-preselected")};he.prototype._getCurrentResult=function(){return Ie(he.RESULT_SELECTED_SELECTOR,this._resultsContainer)};he.prototype._createResultNode=function(e,t){var n=He(he.RESULT_HTML);return e.primaryTokens.length>0&&xv(n,e.primaryTokens,he.RESULT_PRIMARY_HTML),xv(n,e.secondaryTokens,he.RESULT_SECONDARY_HTML),kt(n,he.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};he.prototype.registerProvider=function(e){this._searchProvider=e};he.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._bindEvents(),this._open=!0,Ze(this._canvas.getContainer()).add("djs-search-open"),Ze(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};he.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,Ze(this._canvas.getContainer()).remove("djs-search-open"),Ze(this._container).remove("open"),this._clearMarkers(),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"))};he.prototype.toggle=function(){this.isOpen()?this.close():this.open()};he.prototype.isOpen=function(){return this._open};he.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){this._clearMarkers(),t&&Ze(t).remove(he.RESULT_SELECTED_CLASS);var n=kt(e,he.RESULT_ID_ATTRIBUTE),i=this._results[n].element;Ze(e).add(he.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(i,{top:M0}),this._selection.select(i),this._canvas.addMarker(i,"djs-search-preselected"),this._eventBus.fire("searchPad.preselected",i)}};he.prototype._select=function(e){var t=kt(e,he.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:M0}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};he.prototype._getBoxHtml=function(){const e=He(he.BOX_HTML),t=Ie(he.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function xv(e,t,n){var i=pN(t),r=He(n);r.innerHTML=i,e.appendChild(r)}function pN(e){var t="";return e.forEach(function(n){n.matched?t+='<b class="'+he.RESULT_HIGHLIGHT_CLASS+'">'+$u(n.matched)+"</b>":t+=$u(n.normal)}),t!==""?t:null}he.CONTAINER_SELECTOR=".djs-search-container";he.INPUT_SELECTOR=".djs-search-input input";he.RESULTS_CONTAINER_SELECTOR=".djs-search-results";he.RESULT_SELECTOR=".djs-search-result";he.RESULT_SELECTED_CLASS="djs-search-result-selected";he.RESULT_SELECTED_SELECTOR="."+he.RESULT_SELECTED_CLASS;he.RESULT_ID_ATTRIBUTE="data-result-id";he.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";he.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;he.RESULT_HTML='<div class="djs-search-result"></div>';he.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';he.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const dN={__depends__:[Fc,Wc,qn],searchPad:["type",he]};function Dd(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}Dd.$inject=["elementRegistry","searchPad","canvas"];Dd.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(i){return!Me(i)&&!t.includes(i)});return n.reduce(function(i,r){var o=an(r),a=Sv(o,e),s=Sv(r.id,e);return Ec(a)||Ec(s)?[...i,{primaryTokens:a,secondaryTokens:s,element:r}]:i},[]).sort(function(i,r){return Ev(i.primaryTokens,r.primaryTokens)||Ev(i.secondaryTokens,r.secondaryTokens)||wv(an(i.element),an(r.element))||wv(i.element.id,r.element.id)}).map(function(i){return{element:i.element,primaryTokens:i.primaryTokens.map(function(r){return gn(r,["index"])}),secondaryTokens:i.secondaryTokens.map(function(r){return gn(r,["index"])})}})};function df(e){return"matched"in e}function Ec(e){return e.find(df)}function Ev(e,t){const n=Ec(e),i=Ec(t);if(n&&!i)return-1;if(!n&&i)return 1;if(!n&&!i)return 0;const r=e.find(df),o=t.find(df);return r.index<o.index?-1:r.index>o.index?1:0}function wv(e="",t=""){return e.localeCompare(t)}function Sv(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(r!==0&&n.push({normal:i.slice(0,r),index:0}),n.push({matched:i.slice(r,r+t.length),index:r}),t.length+r<e.length&&n.push({normal:i.slice(r+t.length),index:r+t.length})):n.push({normal:i,index:0}),n}const hN={__depends__:[dN],__init__:["bpmnSearch"],bpmnSearch:["type",Dd]};var mN='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Wn(e){Ma.call(this,e)}ie(Wn,Ma);Wn.Viewer=qi;Wn.NavigatedViewer=ha;Wn.prototype.createDiagram=function(){return this.importXML(mN)};Wn.prototype._interactionModules=[X_,eb,ib];Wn.prototype._modelingModules=[SA,vp,KA,HA,dM,Ep,_M,wO,Ix,ml,PO,MO,KO,qO,XO,tI,dI,i0,_I,PI,BI,jI,m0,fN,hN];Wn.prototype._modules=[].concat(qi.prototype._modules,Wn.prototype._interactionModules,Wn.prototype._modelingModules);const gN=`<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn2:process id="Process_1" isExecutable="false">
    <bpmn2:startEvent id="StartEvent_1"/>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">

      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds height="36.0" width="36.0" x="412.0" y="240.0"/>
      </bpmndi:BPMNShape>
<!-- 
 -->

   </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>
`,vN=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};class yN{constructor(t){const n=t.fire.bind(t);let i=window.localStorage.getItem("eventList");const r=new Set(i?JSON.parse(i):[]);t.fire=(o,a)=>{try{return typeof o=="string"&&(r.add(o),window.localStorage.setItem("eventList",JSON.stringify(Array.from(r)))),n(o,a)}catch(s){throw s}}}}let Cv=window.localStorage.getItem("toTranslate");const Rv=new Set(Cv?JSON.parse(Cv):[]);function _N(e,t){const n={"search in diagram":"Buscar en diagrama","activate hand tool":"Activar herramienta de mano","activate lasso tool":"Activar herramienta de lazo","activate create/remove space tool":"Activar herramienta para crear/eliminar espacio","activate global connect tool":"Activar herramienta de conexión global","create start event":"Crear evento de inicio","create intermediate/boundary event":"Crear evento intermedio/de límite","create end event":"Crear evento de fin","create gateway":"Crear puerta de enlace","create task":"Crear tarea","create data object reference":"Crear referencia de objeto de datos","create data store reference":"Crear referencia de almacén de datos","create expanded sub-process":"Crear subproceso expandido","create pool/participant":"Crear grupo/participante","create group":"Crear grupo","append end event":"Añadir evento de fin","append gateway":"Añadir puerta de enlace","append task":"Añadir tarea","append intermediate/boundary event":"Añadir evento intermedio/de límite","intermediate throw event":"Evento intermedio de lanzamiento","end event":"Evento de fin","message start event":"Evento de inicio por mensaje","timer start event":"Evento de inicio por temporizador","conditional start event":"Evento de inicio condicional","signal start event":"Evento de inicio por señal","change element":"Cambiar elemento","add text annotation":"Añadir anotación de texto","connect to other element":"Conectar con otro elemento",delete:"Eliminar","start event":"Evento de inicio","message intermediate catch event":"Evento intermedio de captura de mensaje","message intermediate throw event":"Evento intermedio de lanzamiento de mensaje","timer intermediate catch event":"Evento intermedio de captura de temporizador","escalation intermediate throw event":"Evento intermedio de lanzamiento de escalada","conditional intermediate catch event":"Evento intermedio de captura condicional","link intermediate catch event":"Evento intermedio de captura de enlace","link intermediate throw event":"Evento intermedio de lanzamiento de enlace","compensation intermediate throw event":"Evento intermedio de lanzamiento de compensación","signal intermediate catch event":"Evento intermedio de captura de señal","signal intermediate throw event":"Evento intermedio de lanzamiento de señal","message end event":"Evento de fin por mensaje","escalation end event":"Evento de fin por escalada","error end event":"Evento de fin por error","compensation end event":"Evento de fin por compensación","signal end event":"Evento de fin por señal","terminate end event":"Evento de terminación","parallel gateway":"Puerta de enlace paralela","inclusive gateway":"Puerta de enlace inclusiva","complex gateway":"Puerta de enlace compleja","event-based gateway":"Puerta de enlace basada en eventos","align elements left":"Alinear elementos a la izquierda","align elements center":"Alinear elementos al centro","align elements right":"Alinear elementos a la derecha","align elements top":"Alinear elementos arriba","align elements middle":"Alinear elementos en el medio","align elements bottom":"Alinear elementos abajo","distribute elements horizontally":"Distribuir elementos horizontalmente","distribute elements vertically":"Distribuir elementos verticalmente","align elements":"Alinear elementos","user task":"Tarea de usuario","service task":"Tarea de servicio","send task":"Tarea de envío","receive task":"Tarea de recepción","manual task":"Tarea manual","business rule task":"Tarea de regla de negocio","script task":"Tarea de script","call activity":"Actividad de llamada","sub-process (collapsed)":"Subproceso (colapsado)","sub-process (expanded)":"Subproceso (expandido)","parallel multi-instance":"Multi-instancia paralela","sequential multi-instance":"Multi-instancia secuencial",loop:"Bucle",transaction:"Transacción","event sub-process":"Subproceso de evento","ad-hoc":"Ad-hoc","data store reference":"Referencia de almacén de datos",collection:"Colección","connect using data input association":"Conectar usando asociación de entrada de datos","data object reference":"Referencia de objeto de datos","add lane above":"Añadir carril arriba","divide into two lanes":"Dividir en dos carriles","divide into three lanes":"Dividir en tres carriles","add lane below":"Añadir carril abajo","empty pool/participant (removes content)":"Grupo/participante vacío (elimina contenido)","participant multiplicity":"Multiplicidad de participante","default flow":"Flujo predeterminado","conditional flow":"Flujo condicional"};return Rv.add(e.toLowerCase()),window.localStorage.setItem("toTranslate",JSON.stringify(Array.from(Rv))),(n==null?void 0:n[e.toLowerCase()])??e}const bN={name:"",components:{},props:{},emits:[],data(){return{bpmnId:"bpmm_space_"+window.crypto.randomUUID()}},watch:{},methods:{accion(){this.modeler.get("canvas")},async buildModeler(){this.modeler=new Wn({container:`#${this.bpmnId}`,keyboard:{bindTo:window},additionalModules:[{translate:["value",_N]}]});let e=this.$refs.bpmnContainer.firstElementChild;e.removeChild(e.firstElementChild),await this.modeler.importXML(gN),this.eventBus=this.modeler.get("eventBus"),this.evHandler=new yN(this.eventBus)}},computed:{},mounted(){this.buildModeler()},created(){this.modeler=null,this.eventBus=null}},xN={style:{height:"100%"}},EN=["id"];function wN(e,t,n,i,r,o){return Sy(),bw("div",xN,[tc("div",{class:"bpmn-desk-bg-circles",ref:"bpmnContainer",style:{height:"100%",position:"relative",overflow:"hidden"},id:r.bpmnId},null,8,EN),t[0]||(t[0]=tc("div",{class:"text-blue text-h5",style:{position:"absolute",bottom:"24px",right:"32px"}}," Suite IEA - Demo ",-1))])}const SN=vN(bN,[["render",wN]]),CN={__name:"App",setup(e){return(t,n)=>(Sy(),xw(SN))}};var wt=[];for(var vu=0;vu<256;++vu)wt.push((vu+256).toString(16).slice(1));function RN(e,t=0){return(wt[e[t+0]]+wt[e[t+1]]+wt[e[t+2]]+wt[e[t+3]]+"-"+wt[e[t+4]]+wt[e[t+5]]+"-"+wt[e[t+6]]+wt[e[t+7]]+"-"+wt[e[t+8]]+wt[e[t+9]]+"-"+wt[e[t+10]]+wt[e[t+11]]+wt[e[t+12]]+wt[e[t+13]]+wt[e[t+14]]+wt[e[t+15]]).toLowerCase()}var ks,PN=new Uint8Array(16);function TN(){if(!ks&&(ks=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ks))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ks(PN)}var AN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Pv={randomUUID:AN};function MN(e,t,n){if(Pv.randomUUID&&!t&&!e)return Pv.randomUUID();e=e||{};var i=e.random||(e.rng||TN)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return RN(i)}typeof window.crypto.randomUUID>"u"&&(window.crypto.randomUUID=MN);const kd=r1(CN);kd.use(l1());kd.use(D1,{plugins:{}});kd.mount("#app");
